(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{319:function(t,e,a){var n=a(10),r=a(341).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},340:function(t,e,a){"use strict";a.r(e);var n=a(419),r=a(420),o=(a(516),a(82)),s=Object(o.a)(r.a,n.render,n.staticRenderFns,!1,null,"6eade584",null),c=a(250);c.install(a(4)),c.compatible&&(t.hot.accept(),c.isRecorded("6eade584")?c.reload("6eade584",s.options):c.createRecord("6eade584",s.options),t.hot.accept(419,function(t){n=a(419),c.rerender("6eade584",{render:n.render,staticRenderFns:n.staticRenderFns})}.bind(this))),s.options.__file="vue/components/Board.vue",e.default=s.exports},341:function(t,e,a){var n=a(20),r=a(65),o=a(21),s=a(88).f,c=function(t){return function(e){for(var a,c=o(e),i=r(c),p=i.length,l=0,u=[];p>l;)a=i[l++],n&&!s.call(c,a)||u.push(t?[a,c[a]]:c[a]);return u}};t.exports={entries:c(!0),values:c(!1)}},342:function(t,e,a){var n=a(60),r=a(343);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},s=n(r,o),c=r.locals?r.locals:{};r.locals||t.hot.accept(343,(function(){var e=a(343);"string"==typeof(e=e.__esModule?e.default:e)&&(e=[[t.i,e,""]]),s(e)})),t.hot.dispose((function(){s()})),t.exports=c},343:function(t,e,a){(e=a(61)(!1)).push([t.i,"\n.board[data-v-6eade584]{\n  color: #666;\n  width: auto;\n  letter-spacing: 1px;\n  padding: 10px 20px 10px 10px;\n  text-align: center;\n  font-weight: normal;\n}\n.profit[data-v-6eade584] {\n  font-size: 12px;\n}\n.refresh[data-v-6eade584], .kanban[data-v-6eade584] {\n  font-weight: 100;\n  font-size: 12px;\n  color: #ddd;\n  padding: 0px 6px;\n}\n.title[data-v-6eade584] {\n  font-size: 14px;\n  margin: 10px;\n}\n.table[data-v-6eade584] {\n  font-size: 12px;\n  margin-top: 10px;\n}\n.scroll[data-v-6eade584] {\n  display: block;\n  max-height: 200px;\n  width: 100%;\n  overflow: hidden;\n  overflow-y: auto;\n}\n.table th[data-v-6eade584] {\n  min-width: 100px;\n  font-weight: normal;\n  padding: 1px 0px 0px 0px;\n}\n.table thead th[data-v-6eade584] {\n  padding-bottom: 5px;\n}\n.table tbody tr:hover span[data-v-6eade584]:only-child {\n  border-bottom: #000 dotted 1px;\n}\n.table tbody tr:hover a[data-v-6eade584] {\n  border-bottom: none;\n}\n",""]),t.exports=e},419:function(t,e,a){"use strict";a.r(e),a.d(e,"render",(function(){return n})),a.d(e,"staticRenderFns",(function(){return r}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"board",staticClass:"board background-glass",on:{click:function(t){t.stopPropagation()}}},[t.$props.options.title?a("p",{staticClass:"title"},[t._v("\n    "+t._s(t.$props.options.title)+"\n    "),t.$props.options.simple?a("i",{staticClass:"kanban cursor-pointer fa fa-bar-chart",attrs:{title:"股票看板"},on:{click:t.kanban}}):t._e()]):t._e(),t._v(" "),Object.values(this.trace).length&&!t.$props.options.simple?a("div",[a("br"),t._v(" "),a("p",[t._v(" \n      跟踪 \n      "),a("span",{staticClass:"profit cursor-pointer",class:{red:t.profit>=0,green:t.profit<0},attrs:{title:t.tooltip()}},[t._v("("+t._s(t.profit)+"%)")]),t._v(" "),a("i",{staticClass:"refresh cursor-pointer fa fa-refresh",attrs:{title:"更新股票数据 用于榜单长期持有收益跟踪分析 亏损扭转情况和持续盈利情况"},on:{click:t.update}})]),t._v(" "),a("table",{staticClass:"table"},[a("thead",{class:{scroll:!t.$props.options.simple}},[a("tr",t._l(t.translator,(function(e,n){return a("th",{directives:[{name:"show",rawName:"v-show",value:t.isShowOptionField(n,!0),expression:"isShowOptionField(key, true)"}],key:n,attrs:{scope:"col",title:"以"+e+"倒序排序"},on:{click:function(e){return t.sort(n,!1)}}},[t._v(t._s(t.translator[n]))])})),0)]),t._v(" "),a("tbody",{class:{scroll:!t.$props.options.simple}},t._l(t.sortedTrace,(function(e){return a("tr",{key:e.code,class:{red:e.change>=0,green:e.change<0}},t._l(t.translator,(function(n,r){return a("th",{directives:[{name:"show",rawName:"v-show",value:t.isShowOptionField(r,!0),expression:"isShowOptionField(key, true)"}],key:r,staticClass:"cursor-default",class:{animated:"rate"===r&&e.change<0&&e.rate<0,infinite:!0,shake:!0,slower:!0},attrs:{scope:"row"}},["code"===r?a("span",[a("a",{attrs:{href:t.urlOfNetinflow(e.code,e.name),target:"_blank"}},[t._v(t._s(e.code))]),t._v(" "),t.isT0List?a("i",{staticClass:"cursor-pointer",attrs:{title:"从榜单中移除此股票",onclick:"this.style.display = 'none'; window.dispatchEvent(new CustomEvent('onIgnoreStockEvent', { detail: { time:'"+t.time+"', vtype:'"+t.vtype+"', listname:'"+t.listname+"', code:'"+e.code+"', name:'"+e.name+"' }}))"}},[t._v(" (x)")]):t._e()]):"name"===r?a("span",[a("a",{attrs:{href:t.urlOfQuote(e.code,e.name),target:"_blank"}},[t._v(t._s(e.name)+" ")]),t._v(" "),t.markets&&t.markets.bondOfStock(e.code)?a("a",{attrs:{href:t.urlOfQuote(t.markets.bondOfStock(e.code)),target:"_blank",title:"查看可转债行情 "+t.markets.bondOfStock(e.code)}},[a("i",{staticClass:"fa fa-money"})]):t._e()]):"change"===r?a("span",{staticClass:"cursor-pointer"},[a("span",{staticStyle:{width:"40px",display:"inline-block"},attrs:{title:"今日涨跌幅"}},[t._v(t._s(e[r]))]),t._v(" / "),a("span",{class:t.calcChange(e.code)>=0?"red":"green",staticStyle:{width:"40px",display:"inline-block"},attrs:{title:"两日涨跌幅"}},[t._v(t._s(t.calcChange(e.code)))])]):a("span","prevclose"===r?[t.calcPrevChange(e.code)>=9.8?a("i",{attrs:{title:"(• 表示昨日涨停)"}},[t._v("•")]):t._e(),t._v(" "+t._s(e[r])+" \n            ")]:[t._v(t._s(t.toMoney(r,e[r])))])])})),0)})),0)])]):t._e(),t._v(" "),a("div",[t.$props.options.simple?t._e():a("br"),t._v(" "),t.$props.options.simple?t._e():a("p",[t._v("\n      捕获\n      "),a("i",{staticClass:"kanban cursor-pointer fa fa-bar-chart",attrs:{title:"股票看板"},on:{click:t.kanban}})]),t._v(" "),a("table",{staticClass:"table"},[a("thead",{class:{scroll:!t.$props.options.simple}},[a("tr",t._l(t.translator,(function(e,n){return a("th",{directives:[{name:"show",rawName:"v-show",value:t.isShowOptionField(n),expression:"isShowOptionField(key)"}],key:n,attrs:{scope:"col",title:"以"+e+"倒序排序"},on:{click:function(e){return t.sort(n,!0)}}},[t._v(t._s(t.translator[n]))])})),0)]),t._v(" "),a("tbody",{class:{scroll:!t.$props.options.simple}},t._l(t.sortedCapture,(function(e){return a("tr",{key:e.code,class:{red:e.change>=0,green:e.change<0}},t._l(t.translator,(function(n,r){return a("th",{directives:[{name:"show",rawName:"v-show",value:t.isShowOptionField(r),expression:"isShowOptionField(key)"}],key:r,staticClass:"cursor-default",attrs:{scope:"row"}},[a("span","code"===r?[a("a",{attrs:{href:t.urlOfNetinflow(e.code,e.name),target:"_blank"}},[t._v(t._s(e.code))]),t._v(" "),e.code.startsWith("1")?t._e():a("i",{staticClass:"cursor-pointer",attrs:{title:"查看股票基因数据",onclick:"window.dispatchEvent(new CustomEvent('onShowGeneEvent', { detail: { code: '"+e.code+"', vtype:'"+t.vtype+"' }}))"}},[t._v(" (i)")])]:"name"===r?[a("a",{attrs:{href:t.urlOfQuote(e.code,e.name),target:"_blank"}},[t._v(t._s(e.name)+" ")]),t._v(" "),t.markets&&t.markets.bondOfStock(e.code)?a("a",{attrs:{href:t.urlOfQuote(t.markets.bondOfStock(e.code)),target:"_blank",title:"查看可转债行情 "+t.markets.bondOfStock(e.code)}},[a("i",{staticClass:"fa fa-money"})]):t._e()]:[t._v(t._s(t.toMoney(r,e[r])))])])})),0)})),0)]),t._v(" "),a("br")])])},r=[];n._withStripped=!0},420:function(t,e,a){"use strict";a(27),a(39),a(62),a(87),a(32),a(251),a(63),a(319),a(28),a(40),a(33);var n=a(1),r=a.n(n),o=(a(19),a(2)),s={props:["time","vtype","listname","captureList","traceList","options"],data:function(){return{translator:{code:"股票代码",name:"股票简称",price:"股价",change:"涨跌幅",rate:"主力净占比",prevclose:"昨收",turnover:"换手率",qrr:"量比",volume:"成交量",inflow:"主力流入资金",outflow:"主力流出资金",netinflow:"主力净流入资金",hot:"热度",block:"板块",times:"连板天数(昨日)"},trace:{},capture:{},sortedTrace:[],sortedCapture:[],profit:0,potential:0,intervalId:-1,listener:function(){},markets:window.__Walle_Stock_Markets}},computed:{isT0List:function(){return this.$props.time.includes("t0")}},watch:{"$props.options":function(t,e){this.$props.options.show?console.log("#Stock-Board# show start auto-update"):(this.stopAutoUpdate(),console.log("#Stock-Board# hidden disable auto-update"))}},created:function(){var t=this;return Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.trace=t.$props.traceList,t.capture=t.$props.captureList,t.sortedTrace=t.trace?Object.values(t.trace):[],t.sortedCapture=Object.values(t.capture),e.next=6,t.calc();case 6:t.listener=function(){return t.listen.apply(t,arguments)},window.addEventListener("__Walle_Stock_Daily_Trace_Event",t.listener),t.startAutoUpdate();case 9:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.removeEventListener("__Walle_Stock_Daily_Trace_Event",this.listener),this.stopAutoUpdate()},methods:{tooltip:function(){var t=" 达成涨幅 ".concat(this.profit,"% 潜在涨幅 ").concat(this.potential,"% ");return this.$props.time&&(t="".concat(this.$props.time,"-").concat(this.$props.vtype,"-").concat(this.$props.listname)+t),t},listen:function(t){var e=this,a=t.detail;return Object(o.a)(r.a.mark((function t(){var n,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$props.options.update){t.next=2;break}return t.abrupt("return");case 2:if(n=a.name,a.change,o=a.trace,s=a.capture,e.$props.time+"-"+e.$props.vtype!==n){t.next=12;break}return e.trace=o[e.$props.listname],e.capture=s[e.$props.listname],e.sortedTrace=Object.values(e.trace),e.sortedCapture=Object.values(e.capture),t.next=11,e.calc();case 11:console.log("#Stock-Board# event update ".concat(n," ..."));case 12:case"end":return t.stop()}}),t)})))()},isShowOptionField:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var a=["hot","block","times"];if(e&&a.includes(t))return!1;var n=Object.values(this.$props.captureList)[0];return void 0!==n[t]}catch(t){return!1}},toMoney:function(t,e){return["volume","inflow","outflow","netinflow"].includes(t)&&(e=Math.abs(+e)>=1e8?(+e/1e8).toFixed(2)+"亿":(+e/1e4).toFixed(2)+"万"),e},urlOfQuote:function(t,e){var a={6:"sh",0:"sz",3:"sz",9:"sh",2:"sz"}[(t=t.replace("A",""))[0]];return"1"===t[0]&&(a={11:"sh",12:"sz"}[t.slice(0,2)]),t="".concat(a).concat(t),"上证指数"===e?"http://quote.eastmoney.com/zs000001.html":"http://quote.eastmoney.com/".concat(t,".html")},urlOfNetinflow:function(t,e){return t=t.replace("A",""),"上证指数"===e?"http://data.eastmoney.com/zjlx/zs000001.html":"http://data.eastmoney.com/zjlx/".concat(t,".html")},kanban:function(){var t=this;return Object(o.a)(r.a.mark((function e(){var a,n,o,s,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=[],t.capture)a.push(n.replace("A",""));s=(o=function(t){var e={};for(var a in t){var n=t[a];e[a.replace("A","")]=n}return e})(t.capture),c=o(t.trace),Object.keys(c).length||(c=s),i=t.$props.options.title||"".concat(t.$props.time,"-").concat(t.$props.vtype,"-").concat(t.$props.listname),window.dispatchEvent(new CustomEvent("onOpenKanbanEvent",{detail:{title:i,stocks:a,capture:s,trace:c}}));case 8:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.__Walle_Stock_Crawler){e.next=3;break}return e.abrupt("return");case 3:return a=Object.keys(t.capture),e.next=6,window.__Walle_Stock_Crawler.captureStocks(a);case 6:return t.trace=e.sent,t.sortedTrace=t.trace?Object.values(t.trace):[],e.next=10,t.calc();case 10:console.log("#Stock-Board# update ",t.trace),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})))()},sort:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(o.a)(r.a.mark((function n(){var o,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{o=a?e.capture:e.trace,s=Object.values(o).sort((function(e,a){return+a[t]-e[t]})),a?e.sortedCapture=s:e.sortedTrace=s}catch(t){}case 1:case"end":return n.stop()}}),n)})))()},calc:function(){var t=this;return Object(o.a)(r.a.mark((function e(){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.trace){e.next=3;break}return e.abrupt("return");case 3:for(o in a=0,n=0,t.trace)a+=t.calcChange(o),n+=t.calcPotentialChange(o);t.profit=+a.toFixed(2),t.potential=+n.toFixed(2),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("#Stock-Board# calc",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},calcChange:function(t){var e=this.capture[t].price,a=this.trace[t].price;return 0===a?+((this.trace[t].prevclose-this.capture[t].price)/this.capture[t].price*100).toFixed(2):+((a-e)/e*100).toFixed(2)},calcPotentialChange:function(t){return 0===this.trace[t].price?0:+(10-this.trace[t].change).toFixed(2)},calcPrevChange:function(t){var e=this.capture[t].prevclose;return+((this.trace[t].prevclose-e)/e*100).toFixed(2)},stopAutoUpdate:function(){clearInterval(this.intervalId),console.log("#Stock-Board# auto-update stoped")},startAutoUpdate:function(){var t=this;return Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.__Walle_Stock_Cron){e.next=2;break}return e.abrupt("return");case 2:if(t.$props.options.update){e.next=5;break}return console.log("#Stock-Board# force disable auto-update"),e.abrupt("return");case 5:return console.log("#Stock-Board# auto-update start"),e.next=8,window.__Walle_Stock_Cron.interval(Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.update();case 1:case"end":return e.stop()}}),e)}))),null,30,"stock-board");case 8:t.intervalId=e.sent;case 9:case"end":return e.stop()}}),e)})))()}}};e.a=s},516:function(t,e,a){"use strict";var n=a(342);a.n(n).a}}]);