(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2de4014"],{"0ae6":function(t,e,r){"use strict";r.r(e);var n=r("a34a"),a=r.n(n),i=(r("96cf"),r("1da1")),s=r("d4ec"),o=r("bee2"),c=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("ade3"));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=function t(e){var r=e.capture,n=e.trace,a=e.interval,i=e.lists,o=e.date,u=e.name;Object(s["a"])(this,t),Object(c["a"])(this,"capture",void 0),Object(c["a"])(this,"trace",[]),Object(c["a"])(this,"interval",void 0),Object(c["a"])(this,"lists",void 0),Object(c["a"])(this,"date",void 0),Object(c["a"])(this,"name",void 0),this.capture=r,this.trace=n,this.interval=a,this.lists=i,this.name=u,this.date=o},p=(r("caad"),r("b64b"),r("ac1f"),r("2532"),r("466d"),r("2ca0"),r("0cae")),f=(r("4160"),r("fb6a"),r("0d03"),r("b680"),r("25f0"),r("1276"),r("159b"),r("3835")),d=r("90d5"),v=r("1797"),b=(r("4e82"),r("07ac"),r("4795"),r("0fed")),y=r("9313"),g=r("2894"),m=r("a37f"),w=r("127d"),k=r("c1df"),x=r.n(k),O=r("a002"),S=r.n(O),j="1.000001",T=S.a.createInstance({name:"flow",driver:S.a.INDEXEDDB}),E=function(){function t(){var e=this;Object(s["a"])(this,t),Object(c["a"])(this,"flows",{}),Object(c["a"])(this,"maOfFlows",{}),Object(c["a"])(this,"continueOfFlows",{}),Object(c["a"])(this,"topOfFlows",{rate:[],change:[],limitup:[]}),Object(c["a"])(this,"lastFlowDate","");var r=parent.location.hash||location.hash,n=r.includes("9529");setTimeout(Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return console.info("#Flows# force download start ..."),t.next=4,e.download();case 4:return console.info("#Flows# force download end ..."),t.abrupt("return");case 6:return t.next=8,e.load();case 8:return t.next=10,e.calcContinue();case 10:return t.next=12,e.calcTop();case 12:return t.next=14,e.update();case 14:case"end":return t.stop()}}),t)}))))}return Object(o["a"])(t,[{key:"load",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.length();case 3:if(e=t.sent,e){t.next=7;break}return console.log("#Flows# flows not exist!"),t.abrupt("return");case 7:return t.next=9,T.iterate((function(t,e){t&&(r.flows[e]=t)}));case 9:this.lastFlowDate=this.flows[j][0].date,console.info("#Flows# load flows ".concat(e," date ").concat(this.lastFlowDate," ...")),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.warn("#Flows# load flows fail ",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e in this.flows)this.flows[e].length>30&&(this.flows[e]=this.flows[e].slice(0,30)),T.setItem(e,this.flows[e]);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"download",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=b["a"].stocks(),e=[].concat(e,j),console.time("Flows Download"),r=!0,n=!1,i=void 0,t.prev=7,s=e[Symbol.iterator]();case 9:if(r=(o=s.next()).done){t.next=19;break}return c=o.value,t.next=13,d["a"].captureFlows(c);case 13:return this.flows[c]=t.sent,t.next=16,Object(w["a"])(50);case 16:r=!0,t.next=9;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](7),n=!0,i=t.t0;case 25:t.prev=25,t.prev=26,r||null==s["return"]||s["return"]();case 28:if(t.prev=28,!n){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(25);case 33:console.timeEnd("Flows Download"),this.save(),t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](0),console.warn("#Flows# download flows fail ",t.t1);case 40:case"end":return t.stop()}}),t,this,[[0,37],[7,21,25,33],[26,,28,32]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l,p,f;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.length();case 2:if(e=t.sent,e){t.next=6;break}return console.log("#Flows# flows not exist, update exit !"),t.abrupt("return");case 6:if(y["a"].isWeekend()){t.next=31;break}return t.next=9,y["a"].until("150000");case 9:console.info("#Flows# auto update daily ..."),r=g["a"].stocks(),n=x()().format("YYYYMMDD"),t.t0=a.a.keys(r);case 13:if((t.t1=t.t0()).done){t.next=30;break}if(i=t.t1.value,t.prev=15,s=r[i],o=s.name,c=s.price,u=s.change,h=s.netinflow,l=s.rate,p=this.flows[i][0],!(p&&+p.date>=+n)){t.next=20;break}return t.abrupt("continue",13);case 20:if(p.price!==c||p.rate!==l||p.netinflow!==h){t.next=22;break}return t.abrupt("continue",13);case 22:f=new m["a"]({code:i,name:o,date:n,price:c,change:u,netinflow:h,netinflowrate:l}),this.flows[i].unshift(f),t.next=28;break;case 26:t.prev=26,t.t2=t["catch"](15);case 28:t.next=13;break;case 30:this.save();case 31:case"end":return t.stop()}}),t,this,[[15,26]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"downloadDaily",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=x()().format("YYYYMMDD"),r=x()().format("HHmmss"),n=x()().subtract(1,"day").format("YYYYMMDD"),1===+x()().day()&&(n=x()().subtract(3,"days").format("YYYYMMDD")),!(e===this.lastFlowDate||n<=this.lastFlowDate)){t.next=6;break}return t.abrupt("return");case 6:if(!(+r>=15e4)){t.next=8;break}return t.abrupt("return");case 8:if(y["a"].isWeekend()){t.next=17;break}return i=Math.floor(58*Math.random())+1,s="00".concat(i).slice(-2),o="07"+s+"00",console.info("#Flows# auto download daily at ".concat(o," ...")),t.next=15,y["a"].until(o);case 15:return t.next=17,this.download();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"has",value:function(t){return!!this.flows[t]&&this.flows[t]}},{key:"flow",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.has(e)){t.next=2;break}return t.abrupt("return",this.capture(e));case 2:return t.abrupt("return",this.flows[e]);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.flows[e]=d["a"].captureFlows(e),t.abrupt("return",this.flows[e]);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcContinue",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=a.a.keys(this.flows);case 1:if((t.t1=t.t0()).done){t.next=12;break}return e=t.t1.value,r=this.flows[e],n=r[0]?r[0].name:"",t.next=7,L.isValidStock(e,n);case 7:if(t.sent){t.next=9;break}return t.abrupt("continue",1);case 9:this.calcContinueCore(e,n,r),t.next=1;break;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcContinueCore",value:function(t,e,r){this.continueOfFlows[t]={code:t,name:e,rate:0,change:0,limitup:0};var n=!0,a=!1,i=void 0;try{for(var s,o=r[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,u=(c.change,c.rate);if(!(u>0))break;this.continueOfFlows[t].rate+=1}}catch(S){a=!0,i=S}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw i}}var h=!0,l=!1,p=void 0;try{for(var f,d=r[Symbol.iterator]();!(h=(f=d.next()).done);h=!0){var v=f.value,b=v.change;v.rate;if(!(b>0))break;this.continueOfFlows[t].change+=1}}catch(S){l=!0,p=S}finally{try{h||null==d["return"]||d["return"]()}finally{if(l)throw p}}var y=!0,g=!1,m=void 0;try{for(var w,k=r[Symbol.iterator]();!(y=(w=k.next()).done);y=!0){var x=w.value,O=x.change;x.rate;if(!(O>=9.8))break;this.continueOfFlows[t].limitup+=1}}catch(S){g=!0,m=S}finally{try{y||null==k["return"]||k["return"]()}finally{if(g)throw m}}}},{key:"calcTop",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calcTopCore("rate"),this.calcTopCore("change"),this.calcTopCore("limitup");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcTopCore",value:function(t){var e=Object.values(this.continueOfFlows),r=e.sort((function(e,r){return r[t]-e[t]}));this.topOfFlows[t]=r,console.info("#Flow# top continue ".concat(t," stocks ...")),console.table(this.topOfFlows[t].slice(0,20))}},{key:"ma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{var r=0,n=0,a=this.flows[t],i=g["a"].stocks([t])[t],s=x()().format("YYYYMMDD");r+=+i.price,n++;var o=!0,c=!1,u=void 0;try{for(var h,l=a[Symbol.iterator]();!(o=(h=l.next()).done);o=!0){var p=h.value,f=p.price,d=p.date;if(s!==d&&(r+=f,n++,n===e))break}}catch(v){c=!0,u=v}finally{try{o||null==l["return"]||l["return"]()}finally{if(c)throw u}}return+(r/n).toFixed(2)}catch(b){return 0}}},{key:"top",value:function(t){return this.topOfFlows[t]}},{key:"continue",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.continueOfFlows[e]){t.next=3;break}return t.abrupt("return",this.continueOfFlows[e][r]);case 3:return t.next=5,this.flow(e);case 5:return n=t.sent,i=n[0]?n[0].name:"",this.calcContinueCore(e,i,n),t.abrupt("return",this.continueOfFlows[e][r]);case 11:return t.prev=11,t.t0=t["catch"](0),t.abrupt("return",0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),D=new E,R="1.000001",C=function(){function t(e,r,n,a,i){Object(s["a"])(this,t),Object(c["a"])(this,"$valid",{rateRatio:.6,averageChange2:.2,bigChange:6}),Object(c["a"])(this,"range",{change:[null,null],price:[null,null],rate:[null,null],amount:[null,null]}),Object(c["a"])(this,"day",{rise:0,down:0,bigRise:0,bigDown:0}),Object(c["a"])(this,"fundamental",{eps:0,bvps:0,roe:0}),Object(c["a"])(this,"index",{days:0,daysRatio:0,changeUpRatio:0,changeDownRatio:0}),Object(c["a"])(this,"ratio",{mainRatio:0,abnormalRatio:0,lockRatio:0,onePercentRate:0,onePercentAmount:0}),Object(c["a"])(this,"longterm",{days:0,averagePrice:0,change:0,rate:0,amount:0}),Object(c["a"])(this,"shortterm",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(c["a"])(this,"limitup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(c["a"])(this,"riseup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(c["a"])(this,"rateup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(c["a"])(this,"code",void 0),Object(c["a"])(this,"name",void 0),Object(c["a"])(this,"stock",void 0),Object(c["a"])(this,"vtype",void 0),Object(c["a"])(this,"validator",void 0),Object(c["a"])(this,"flow",[]),Object(c["a"])(this,"gene",{}),this.code=e,this.stock=r,this.flow=n,this.vtype=i;var o=!0,u=!1,h=void 0;try{for(var l,p=v["a"].validators[Symbol.iterator]();!(o=(l=p.next()).done);o=!0){var f=l.value;if(f.name===i){this.validator=new L(f);break}}}catch(d){u=!0,h=d}finally{try{o||null==p["return"]||p["return"]()}finally{if(u)throw h}}Object.assign(this,a),r&&(this.name=r.name)}return Object(o["a"])(t,[{key:"toMoney",value:function(t){return t=Math.abs(+t)>=1e8?(+t/1e8).toFixed(2)+"亿":(+t/1e4).toFixed(2)+"万",t}},{key:"analyse",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.flow||!this.flow.length){t.next=25;break}return t.next=4,this.calcFundamental();case 4:return t.next=6,this.calcDays();case 6:return t.next=8,this.calcRange();case 8:return t.next=10,this.calcLimitup();case 10:return t.next=12,this.calcRiseup();case 12:return t.next=14,this.calcRateup();case 14:return t.next=16,this.calcLongterm();case 16:return t.next=18,this.calcShortterm();case 18:return t.next=20,this.calcRatio();case 20:if(this.code===R){t.next=23;break}return t.next=23,this.calcIndex();case 23:return t.next=25,this.calcGene();case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](0),console.warn("#Gene# analyse fail ",this.code,t.t0);case 30:return t.abrupt("return",this);case 31:case"end":return t.stop()}}),t,this,[[0,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcRange",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,a=this.flow[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var i=n.value,s=i.price,o=i.change,c=i.rate,u=i.netinflow;null===this.range.price[0]&&(this.range.price[0]=s),null===this.range.price[1]&&(this.range.price[1]=s),s<this.range.price[0]&&(this.range.price[0]=s),s>this.range.price[1]&&(this.range.price[1]=s),null===this.range.change[0]&&(this.range.change[0]=o),null===this.range.change[1]&&(this.range.change[1]=o),o<this.range.change[0]&&(this.range.change[0]=o),o>this.range.change[1]&&(this.range.change[1]=o),null===this.range.amount[0]&&(this.range.amount[0]=u),null===this.range.amount[1]&&(this.range.amount[1]=u),u<this.range.amount[0]&&(this.range.amount[0]=u),u>this.range.amount[1]&&(this.range.amount[1]=u),null===this.range.rate[0]&&(this.range.rate[0]=c),null===this.range.rate[1]&&(this.range.rate[1]=c),c<this.range.rate[0]&&(this.range.rate[0]=c),c>this.range.rate[1]&&(this.range.rate[1]=c)}}catch(h){e=!0,r=h}finally{try{t||null==a["return"]||a["return"]()}finally{if(e)throw r}}this.range.price[0]=+this.range.price[0].toFixed(2),this.range.price[1]=+this.range.price[1].toFixed(2),this.range.change[0]=+this.range.change[0].toFixed(2),this.range.change[1]=+this.range.change[1].toFixed(2),this.range.amount[0]=+this.range.amount[0].toFixed(2),this.range.amount[1]=+this.range.amount[1].toFixed(2),this.range.rate[0]=+this.range.rate[0].toFixed(2),this.range.rate[1]=+this.range.rate[1].toFixed(2)}},{key:"calcDays",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,a=this.flow[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var i=n.value.change;i>=0?this.day.rise++:this.day.down++,i>=this.$valid.bigChange&&this.day.bigRise++,i<=-this.$valid.bigChange&&this.day.bigDown++}}catch(s){e=!0,r=s}finally{try{t||null==a["return"]||a["return"]()}finally{if(e)throw r}}}},{key:"calcIndex",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=0,r=0,n=0,i=0,s=0,t.next=3,M.gene(R,this.vtype);case 3:o=t.sent,c=o.flow,this.flow.forEach((function(t,a){var o=c[a];o&&t.date===o.date&&(t.change>0&&o.change>0&&(e++,r+=t.change,i+=o.change),t.change<0&&o.change<0&&(e++,n+=t.change,s+=o.change))})),this.index.days=e,this.index.daysRatio=+(e/this.flow.length).toFixed(2),this.index.changeUpRatio=+(r/i).toFixed(2),this.index.changeDownRatio=-(n/s).toFixed(2);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcFundamental",value:function(){this.fundamental.eps=+this.stock.eps.toFixed(2),this.fundamental.bvps=+this.stock.bvps.toFixed(2),this.fundamental.roe=+this.stock.roe.toFixed(2)}},{key:"calcLongterm",value:function(){var t=0,e=!0,r=!1,n=void 0;try{for(var a,i=this.flow[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value,o=s.price,c=s.change,u=s.rate,h=s.netinflow;this.longterm.change+=c,this.longterm.rate+=u,this.longterm.amount+=h,this.longterm.days++,t+=o}}catch(l){r=!0,n=l}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}this.longterm.averagePrice=+(t/this.flow.length).toFixed(2),this.longterm.change=+this.longterm.change.toFixed(2),this.longterm.rate=+this.longterm.rate.toFixed(2),this.longterm.amount=+this.longterm.amount.toFixed(2)}},{key:"calcShorttermFun",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c,u,h,l,p,f,d,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0,i=0,s=0,o=0,t.t0=a.a.keys(this.flow);case 2:if((t.t1=t.t0()).done){t.next=16;break}return c=t.t1.value,u=this.flow[c],h=u.code,l=u.name,p=u.price,f=u.change,d=u.rate,t.next=7,r({code:h,name:l,price:p,change:f,rate:d});case 7:if(t.sent){t.next=9;break}return t.abrupt("continue",2);case 9:n++,s+=f,i+=d,v=this.flow[+c+1],v&&(o+=+v.change),t.next=2;break;case 16:n>0&&(e.days=n,e.change=+o.toFixed(2),e.averageChange=+(s/n).toFixed(2),e.averageRate=+(i/n).toFixed(2),e.averageChange2=+(o/n).toFixed(2));case 17:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"calcShortterm",value:function(){return this.calcShorttermFun(this.shortterm,function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.code,e.name,e.price,r=e.change,n=e.rate,t.abrupt("return",r>0&&n>0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"calcLimitup",value:function(){return this.calcShorttermFun(this.limitup,(function(t){t.code,t.name,t.price;var e=t.change,r=t.rate;return e>=9&&r>0}))}},{key:"calcRiseup",value:function(){var t=this;return this.calcShorttermFun(this.riseup,(function(e){e.code,e.name,e.price;var r=e.change,n=e.rate;return r>=t.$valid.bigChange&&n>0}))}},{key:"calcRateup",value:function(){var t=this;return this.calcShorttermFun(this.rateup,(function(e){e.code,e.name,e.price,e.change;var r=e.rate;return r>t.range.rate[1]*t.$valid.rateRatio}))}},{key:"isValidShortterm",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.code,e.change,r=e.rate,n={},t.next=4,this.calcShorttermFun(n,(function(t){t.code,t.name,t.price,t.change;var e=t.rate;return Math.abs((e-r)/r)>=.2}));case 4:return t.abrupt("return",n.averageChange2>=this.$valid.averageChange2);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcRatio",value:function(){var t=0,e=0,r=0,n=this.flow.slice(-1)[0],a=!0,i=!1,s=void 0;try{for(var o,c=this.flow[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,h=u.change,l=u.rate,p=u.netinflow;h>0&&l>0&&(t+=l,e+=p,r+=h)}}catch(f){i=!0,s=f}finally{try{a||null==c["return"]||c["return"]()}finally{if(i)throw s}}this.ratio.onePercentRate=+(t/r).toFixed(2),this.ratio.onePercentAmount=+(e/r).toFixed(2),this.ratio.mainRatio=+(this.longterm.rate/this.longterm.days).toFixed(2),this.ratio.abnormalRatio=+((this.day.bigRise+this.day.bigDown)/this.longterm.days).toFixed(2),this.ratio.lockRatio=+(+n.price/this.longterm.averagePrice).toFixed(2)}},{key:"calcGene",value:function(){this.gene.ratio={mainRatio:this.ratio.mainRatio,abnormalRatio:this.ratio.abnormalRatio,lockRatio:this.ratio.lockRatio,onePercentRate:this.ratio.onePercentRate,onePercentAmount:this.toMoney(this.ratio.onePercentAmount)},this.gene.shortterm=this.shortterm,this.gene.longterm={days:this.longterm.days,averagePrice:this.longterm.averagePrice,change:this.longterm.change,rate:this.longterm.rate,amount:this.toMoney(this.longterm.amount)},this.gene.limitup=this.limitup,this.gene.riseup=this.riseup,this.gene.rateup=this.rateup,this.gene.day=this.day,this.gene.range={change:this.range.change.toString(),price:this.range.price.toString(),rate:this.range.rate.toString(),amount:[this.toMoney(this.range.amount[0]),this.toMoney(this.range.amount[1])]},this.gene.index=this.index,this.gene.fundamental=this.fundamental}},{key:"show",value:function(){for(var t in this.gene)console.info("%c".concat(this.code,".").concat(t.toUpperCase()),"padding-left: 45%; color:#FFC107;"),console.table(this.gene[t])}},{key:"getFlow",value:function(){return this.flow}},{key:"getGene",value:function(){return this.gene}},{key:"toString",value:function(){var t="";for(var e in this.gene){var r=this.gene[e];for(var n in r)t+="".concat(e,".").concat(n,": ").concat(r[n].toString(),"  ")}return t}}]),t}(),B=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"genes",{}),Object(c["a"])(this,"vtypes",{});var e=!0,r=!1,n=void 0;try{for(var a,i=v["a"].validators[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,u=o.name,h=o.rule["gene"],l={};for(var p in h)if(p.startsWith("$")){var d=p.split("."),b=Object(f["a"])(d,2),y=b[0],g=b[1];l[y]||(l[y]={}),l[y][g]=+h[p]}this.vtypes[u]=l}}catch(m){r=!0,n=m}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}}return Object(o["a"])(t,[{key:"has",value:function(t,e){return!!this.genes[e]&&this.genes[e][t]}},{key:"param",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.vtypes[e]||{});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"gene",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.has(e,r)){t.next=3;break}return t.next=3,this.capture(e,r);case 3:return t.abrupt("return",this.genes[r][e]);case 4:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.has(e,r)){t.next=3;break}return t.abrupt("return",this.gene(e,r));case 3:return t.next=5,Promise.all([D.flow(e),d["a"].captureStock(e)]);case 5:return n=t.sent,i=Object(f["a"])(n,2),s=i[0],o=i[1],t.next=11,new C(e,o,s,this.vtypes[r],r).analyse();case 11:return c=t.sent,this.genes[r]||(this.genes[r]={}),this.genes[r][e]=c,t.abrupt("return",c);case 17:t.prev=17,t.t0=t["catch"](0),console.warn("#Genes# capture fail ",r,e,t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),M=new B,I=r("2909"),F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[],values:[]};return Function.apply(void 0,Object(I["a"])(e.keys).concat(['"use strict";return ('.concat(t,")")])).apply(void 0,Object(I["a"])(e.values))},_=F,A=r("776f"),P=9.8,L=function(){function t(e){Object(s["a"])(this,t),this.config=e}return Object(o["a"])(t,[{key:"hasCaptureRule",value:function(t){return this.config.capture.includes(t)}},{key:"hasIntervalRule",value:function(t){return this.config.interval.includes(t)}},{key:"filter",value:function(){var e=Object(i["a"])(a.a.mark((function e(r,n){var i,s,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n.code,n.name,n.price,n.change,n.rate,n.turnover,n.qrr,n.eps,n.bvps,n.roe,i=this.config.capture,s=A["mb"].getIntervalKeys(),s.includes(r)&&(i=this.config.interval),o=A["mb"].getBondKeys(),o.includes(r)){e.next=11;break}return e.next=9,t.filterOfList(n);case 9:if(e.sent){e.next=11;break}return e.abrupt("return",!1);case 11:if(![A["F"].key,A["t"].key].includes(r)){e.next=13;break}return e.abrupt("return",!0);case 13:if(!i.includes("base")){e.next=18;break}return e.next=16,this.isValidBase(n);case 16:if(e.sent){e.next=18;break}return e.abrupt("return",!1);case 18:if(!i.includes("fundamental")){e.next=23;break}return e.next=21,this.isValidFundamental(n);case 21:if(e.sent){e.next=23;break}return e.abrupt("return",!1);case 23:if(!i.includes("whitelist")){e.next=28;break}return e.next=26,this.isValidWhitelist(n);case 26:if(e.sent){e.next=28;break}return e.abrupt("return",!1);case 28:if(!i.includes("gene")){e.next=33;break}return e.next=31,this.isValidGeneAnalyse(n.code,n);case 31:if(e.sent){e.next=33;break}return e.abrupt("return",!1);case 33:return e.abrupt("return",!0);case 36:return e.prev=36,e.t0=e["catch"](0),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,this,[[0,36]])})));function r(t,r){return e.apply(this,arguments)}return r}()},{key:"filterOfPreTrace",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c,u,h,l,p,f,d,v,b,y,g,m;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.config.capture,n.includes("pre-trace")){t.next=3;break}return t.abrupt("return",!0);case 3:if(i=this.config.rule["pre-trace"],i){t.next=6;break}return t.abrupt("return",!0);case 6:s=Object.keys(e),o=0,c=s;case 8:if(!(o<c.length)){t.next=22;break}if(u=c[o],![A["F"].key,A["t"].key].includes(u)){t.next=12;break}return t.abrupt("continue",19);case 12:if(h=e[u],l=r[u],h&&l){t.next=16;break}return t.abrupt("continue",19);case 16:for(d in p=h.getStocks(),f=l.getStocks(),p)for(y in v=p[d],b=f[d],i)g=(b[y]-v[y])/v[y],m="".concat(g).concat(i[y]),_(m)||(console.info("#Validator# filter stock of PreTrace",u,v.code,v.name,v.price,v.change,y,"[ ",b[y]," - ",v[y],i[y]," ]"),delete p[d]);case 19:o++,t.next=8;break;case 22:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"check",value:function(t,e,r,n){if(!t)return!0;try{for(var a=Object.keys(t),i=0,s=a;i<s.length;i++){var o=s[i],c=_("data.".concat(o),{keys:["data"],values:[e]}),u="".concat(c).concat(t[o]);if(void 0!==c&&!_(u))return!1}}catch(h){}return!0}},{key:"isFullRequiredFields",value:function(t){var e=new p["a"]({});for(var r in e)if(!t.hasOwnProperty(r))return!1;return!0}},{key:"isValidBase",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.code,n=e.name,e.price,e.change,e.rate,e.turnover,e.qrr,t.abrupt("return",this.check(this.config.rule.base,e,r,n));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidWhitelist",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.code,e.name,b["a"].whitelist().has(r)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidFundamental",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.config.rule.fundamental,r){t.next=3;break}return t.abrupt("return",!0);case 3:return t.abrupt("return",this.check(r,e,e.code,e.name));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidGeneAnalyse",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.config.rule["gene"],n){t.next=3;break}return t.abrupt("return",!0);case 3:return i=this.config.name,t.next=6,M.gene(e,i);case 6:return s=t.sent,t.next=9,s.isValidShortterm(r);case 9:if(t.sent){t.next=11;break}return t.abrupt("return",!1);case 11:o={},t.t0=a.a.keys(n);case 13:if((t.t1=t.t0()).done){t.next=20;break}if(c=t.t1.value,!c.startsWith("$")){t.next=17;break}return t.abrupt("continue",13);case 17:o[c]=n[c],t.next=13;break;case 20:return t.abrupt("return",this.check(o,s,s.code,s.name));case 21:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()}],[{key:"filterOfList",value:function(){var e=Object(i["a"])(a.a.mark((function e(r){var n,i,s,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.code,i=r.name,s=r.price,o=r.change,r.rate,r.turnover,r.qrr,!(o>P||s<=0)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",t.isValidStock(n,i));case 4:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()},{key:"isValidStock",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.toUpperCase().includes("ST")){t.next=2;break}return t.abrupt("return",!1);case 2:if(!r.toUpperCase().includes("B")&&!r.toUpperCase().includes("Ｂ")){t.next=4;break}return t.abrupt("return",!1);case 4:if(!r.includes("退")){t.next=6;break}return t.abrupt("return",!1);case 6:if(!r.match(/\d+/g)){t.next=8;break}return t.abrupt("return",!1);case 8:if(!("".concat(e).startsWith("688")||"".concat(e).startsWith("300")||"".concat(e).startsWith("200")||"".concat(e).startsWith("900"))){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),V=(r("4de4"),r("99de")),N=r("7e84"),H=r("262e"),q=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"name",void 0),this.name=e}return Object(o["a"])(t,[{key:"filter",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(t,e,r){window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:{name:t,vtype:e,stock:r}}))}},{key:"monitor",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r||(r=new L(v["a"].validators[0])),n=r.config.name,i=!0,s=!1,o=void 0,t.prev=6,c=e[Symbol.iterator]();case 8:if(i=(u=c.next()).done){t.next=25;break}if(h=u.value,r.isFullRequiredFields(h)){t.next=14;break}return t.next=13,d["a"].captureStock(h.code);case 13:h=t.sent;case 14:return t.next=16,r.filter(this.name,h);case 16:if(t.sent){t.next=18;break}return t.abrupt("continue",22);case 18:return t.next=20,this.filter(h);case 20:if(!t.sent){t.next=22;break}this.broadcast(this.name,n,h);case 22:i=!0,t.next=8;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](6),s=!0,o=t.t0;case 31:t.prev=31,t.prev=32,i||null==c["return"]||c["return"]();case 34:if(t.prev=34,!s){t.next=37;break}throw o;case 37:return t.finish(34);case 38:return t.finish(31);case 39:t.next=43;break;case 41:t.prev=41,t.t1=t["catch"](0);case 43:case"end":return t.stop()}}),t,this,[[0,41],[6,27,31,39],[32,,34,38]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),Y=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A["K"].key,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(s["a"])(this,e),t=Object(V["a"])(this,Object(N["a"])(e).call(this,r)),t.minContinueDays=n,t}return Object(H["a"])(e,t),Object(o["a"])(e,[{key:"filter",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.minContinueDays){t.next=6;break}return t.next=3,D["continue"](e.code,"limitup");case 3:if(r=t.sent,!(r<this.minContinueDays)){t.next=6;break}return t.abrupt("return",!1);case 6:return t.abrupt("return",+e.change>=9.5);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{y["a"].interval(Object(i["a"])(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,t.next=4,g["a"].listOfStocks("netinflow");case 4:return r=t.sent,r=r.slice(0,200),t.next=8,e.monitor(r);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](0),console.warn("#diggers# capture fail",t.t1);case 17:case"end":return t.stop()}}),t,null,[[0,14],[1,10]])}))),null,30)}catch(r){}case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(q),K=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A["M"].key,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(s["a"])(this,e),t=Object(V["a"])(this,Object(N["a"])(e).call(this,r)),t.dayOfMa=n,t}return Object(H["a"])(e,t),Object(o["a"])(e,[{key:"filter",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=D.ma(e.code,this.dayOfMa),t.abrupt("return",+e.price<r);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(q),U=r("257e");function W(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(N["a"])(t),null===t)break;return t}function z(t,e,r){return z="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=W(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}},z(t,e,r||t)}var G=r("7366"),Z=r.n(G),$=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s["a"])(this,t),Object(c["a"])(this,"name",void 0),Object(c["a"])(this,"origin",{}),Object(c["a"])(this,"stocks",{}),this.name=e,this.origin=Z()(n),this.stocks=Z()(a),window.addEventListener("__Walle_Stock_Ignore_Event",(function(t){var e=t.detail;r.ignore(e)}))}return Object(o["a"])(t,[{key:"filter",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"buy";window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:{name:t,vtype:e,stock:r,tradetype:n}}))}},{key:"ignore",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.time,n=e.vtype,i=e.listkey,s=e.code,t.prev=1,"interval"!==r||"v0"!==n||i!==this.name){t.next=9;break}if(!this.origin[s]){t.next=8;break}return t.next=6,this.deliver(s);case 6:t.next=9;break;case 8:delete this.stocks[s];case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:case"end":return t.stop()}}),t,this,[[1,11]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deliver",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=ht.controller("interval","v0"),!this.origin[e]){t.next=15;break}return console.log("#Digger# filter ".concat(this.name," stock"),e),t.next=6,d["a"].captureStock(e);case 6:return n=t.sent,i=this.origin[e],t.next=10,r.ignore(this.name,e);case 10:return t.next=12,r.t0Statement.remove(this.name,e);case 12:return t.next=14,r.t1Statement.update(this.name,i,n);case 14:delete this.stocks[e];case 15:t.next=19;break;case 17:t.prev=17,t.t0=t["catch"](0);case 19:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=Object.keys(this.stocks),r.length){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,d["a"].captureStocks(r);case 6:this.stocks=t.sent,n=!0,i=!1,s=void 0,t.prev=10,o=e[Symbol.iterator]();case 12:if(n=(c=o.next()).done){t.next=19;break}return u=c.value,t.next=16,u.monitor(this.stocks,this.validator);case 16:n=!0,t.next=12;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](10),i=!0,s=t.t0;case 25:t.prev=25,t.prev=26,n||null==o["return"]||o["return"]();case 28:if(t.prev=28,!i){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(25);case 33:t.next=37;break;case 35:t.prev=35,t.t1=t["catch"](0);case 37:return t.abrupt("return",Object.values(this.stocks));case 38:case"end":return t.stop()}}),t,this,[[0,35],[10,21,25,33],[26,,28,32]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c,u,h,l,p,f,b,y,g,m,w;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r||(r=new L(v["a"].validators[0])),n=r.config.name,i=!0,s=!1,o=void 0,t.prev=6,c=e[Symbol.iterator]();case 8:if(i=(u=c.next()).done){t.next=34;break}if(h=u.value,r.isFullRequiredFields(h)){t.next=14;break}return t.next=13,d["a"].captureStock(h.code);case 13:h=t.sent;case 14:return t.next=16,r.filter(this.name,h);case 16:if(t.sent){t.next=18;break}return t.abrupt("continue",31);case 18:return t.next=20,this.filter(h);case 20:if(t.sent){t.next=22;break}return t.abrupt("continue",31);case 22:if(l=h,p=l.code,f=l.name,l.price,b=l.change,y=l.netinflow,g=l.rate,l.eps,l.bvps,l.roe,l.turnover,l.qrr,console.log("#Digger# capture ".concat(this.name,"-").concat(n," stock"),p,f,b,g,y),!this.stocks[p]&&!this.origin[p]){t.next=26;break}return t.abrupt("continue",31);case 26:if(m=Object.keys(this.stocks).length,!(m>=10)){t.next=29;break}return t.abrupt("break",34);case 29:this.broadcast(this.name,"v0",h,"buy"),this.stocks[p]=h;case 31:i=!0,t.next=8;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t["catch"](6),s=!0,o=t.t0;case 40:t.prev=40,t.prev=41,i||null==c["return"]||c["return"]();case 43:if(t.prev=43,!s){t.next=46;break}throw o;case 46:return t.finish(43);case 47:return t.finish(40);case 48:return w=ht.controller("interval","v0"),t.next=51,w.update(this.name,this.stocks);case 51:t.next=55;break;case 53:t.prev=53,t.t1=t["catch"](0);case 55:return t.abrupt("return",Object.values(this.stocks));case 56:case"end":return t.stop()}}),t,this,[[0,53],[6,36,40,48],[41,,43,47]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),X=function(t){function e(){var t,r;Object(s["a"])(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Object(V["a"])(this,(t=Object(N["a"])(e)).call.apply(t,[this].concat(a))),Object(c["a"])(Object(U["a"])(r),"ma5Monitor",new K(A["M"].key,5)),Object(c["a"])(Object(U["a"])(r),"ma7Monitor",new K(A["N"].key,7)),Object(c["a"])(Object(U["a"])(r),"ma10Monitor",new K(A["L"].key,10)),r}return Object(H["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e=v["a"].intervals[0],y["a"].interval(Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.clear();case 2:return t.next=4,r.capture(r.name);case 4:case"end":return t.stop()}}),t)}))),e.trace)}catch(n){}case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[this.ma5Monitor,this.ma7Monitor,this.ma10Monitor],t.abrupt("return",z(Object(N["a"])(e.prototype),"update",this).call(this,r));case 2:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"clear",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(this.stocks);case 2:if((t.t1=t.t0()).done){t.next=13;break}return e=t.t1.value,r=this.stocks[e],t.next=7,this.filter(r);case 7:if(t.sent){t.next=11;break}return this.broadcast(this.name,"v0",r,"sell"),t.next=11,this.deliver(r.code);case 11:t.next=2;break;case 13:t.next=17;break;case 15:t.prev=15,t.t2=t["catch"](0);case 17:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(r,n){var i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].captureList(r);case 3:return i=t.sent,t.abrupt("return",z(Object(N["a"])(e.prototype),"capture",this).call(this,i,n));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"filter",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=D.ma(e.code,5),n=D.ma(e.code,7),t.abrupt("return",+e.price>r&&+e.price>n);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}($),J=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"diggers",{})}return Object(o["a"])(t,[{key:"load",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l,p,d,v,b,y;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=ht.controller("interval","v0"),t.next=4,Promise.all([e.getYesterdayLists(),e.getTodayLists()]);case 4:if(r=t.sent,n=Object(f["a"])(r,2),i=n[0],s=n[1],s){t.next=11;break}return t.next=11,e.override(i);case 11:for(o=e.lists,c=A["mb"].getIntervalKeys(),u=!0,h=!1,l=void 0,t.prev=16,p=c[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){v=d.value,b={},y={};try{b=i[v].stocks,y=o[v].stocks}catch(a){}this.diggers[v]=new X(v,b,y)}t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](16),h=!0,l=t.t0;case 24:t.prev=24,t.prev=25,u||null==p["return"]||p["return"]();case 27:if(t.prev=27,!h){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=36;break;case 34:t.prev=34,t.t1=t["catch"](0);case 36:case"end":return t.stop()}}),t,this,[[0,34],[16,20,24,32],[25,,27,31]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:t.prev=2,e=A["mb"].getIntervalKeys(),r=!0,n=!1,i=void 0,t.prev=7,s=e[Symbol.iterator]();case 9:if(r=(o=s.next()).done){t.next=16;break}return c=o.value,t.next=13,this.diggers[c].start();case 13:r=!0,t.next=9;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](7),n=!0,i=t.t0;case 22:t.prev=22,t.prev=23,r||null==s["return"]||s["return"]();case 25:if(t.prev=25,!n){t.next=28;break}throw i;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return t.next=32,(new Y).start();case 32:t.next=36;break;case 34:t.prev=34,t.t1=t["catch"](2);case 36:case"end":return t.stop()}}),t,this,[[2,34],[7,18,22,30],[23,,25,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"list",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.diggers[e].update());case 1:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),Q=new J,tt=function(){function t(){Object(s["a"])(this,t)}return Object(o["a"])(t,[{key:"list",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},Object(c["a"])(r,A["g"].key,(function(){return i.listOfBond("change")})),Object(c["a"])(r,A["f"].key,(function(){return i.listOfStock("change")})),Object(c["a"])(r,A["j"].key,(function(){return i.listOfBond("rate")})),Object(c["a"])(r,A["i"].key,(function(){return i.listOfStock("rate")})),Object(c["a"])(r,A["k"].key,(function(){return i.listOfBond("netinflow")})),Object(c["a"])(r,A["h"].key,(function(){return i.listOfStock("netinflow")})),n=r,t.abrupt("return",n[e]());case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listOfBond",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p,f,d;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=b["a"].stocksOfBonds(),n=g["a"].stocks(r),i=g["a"].listOfBonds(e),s=[],o=!0,c=!1,u=void 0,t.prev=7,h=i[Symbol.iterator]();case 9:if(o=(l=h.next()).done){t.next=25;break}if(p=l.value,f=b["a"].stockOfBond(p.code),d=n[f],d){t.next=15;break}return t.abrupt("continue",22);case 15:return t.next=17,L.isValidStock(d.code,d.name);case 17:if(t.sent){t.next=19;break}return t.abrupt("continue",22);case 19:if(!(p.price<=0)){t.next=21;break}return t.abrupt("continue",22);case 21:s.push(p);case 22:o=!0,t.next=9;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](7),c=!0,u=t.t0;case 31:t.prev=31,t.prev=32,o||null==h["return"]||h["return"]();case 34:if(t.prev=34,!c){t.next=37;break}throw u;case 37:return t.finish(34);case 38:return t.finish(31);case 39:return t.abrupt("return",s);case 40:case"end":return t.stop()}}),t,null,[[7,27,31,39],[32,,34,38]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listOfStock",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p,f,d,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=b["a"].stocksOfBonds(),n=g["a"].stocks(r),i=g["a"].bonds(),s=g["a"].list(n,e),o=[],c=!0,u=!1,h=void 0,t.prev=8,l=s[Symbol.iterator]();case 10:if(c=(p=l.next()).done){t.next=26;break}return f=p.value,t.next=14,L.isValidStock(f.code,f.name);case 14:if(t.sent){t.next=16;break}return t.abrupt("continue",23);case 16:if(d=b["a"].bondOfStock(f.code),v=i[d],v){t.next=20;break}return t.abrupt("continue",23);case 20:if(!(v.price<=0)){t.next=22;break}return t.abrupt("continue",23);case 22:o.push(v);case 23:c=!0,t.next=10;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t["catch"](8),u=!0,h=t.t0;case 32:t.prev=32,t.prev=33,c||null==l["return"]||l["return"]();case 35:if(t.prev=35,!u){t.next=38;break}throw h;case 38:return t.finish(35);case 39:return t.finish(32);case 40:return t.abrupt("return",o);case 41:case"end":return t.stop()}}),t,null,[[8,28,32,40],[33,,35,39]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),et=new tt,rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["a"])(this,t),Object(c["a"])(this,"stocks",{}),this.stocks=e}return Object(o["a"])(t,[{key:"getStocks",value:function(){return this.stocks}},{key:"setStocks",value:function(t){this.stocks=t}},{key:"getStockCodes",value:function(){return Object.keys(this.stocks)}},{key:"clone",value:function(){var e=Object.assign({},e);return new t(e)}},{key:"merge",value:function(t){for(var e in t.stocks){var r=Object.keys(this.stocks).length;if(r>9)return;this.stocks[e]||(this.stocks[e]=t.stocks[e])}}},{key:"recover",value:function(t){return this.stocks=t.stocks,this}},{key:"get",value:function(t){return this.stocks[t]}},{key:"upsert",value:function(t){this.stocks[t.code]=t}},{key:"remove",value:function(t){delete this.stocks[t]}}]),t}(),nt=function(){function t(e,r){Object(s["a"])(this,t),Object(c["a"])(this,"oldlist",void 0),Object(c["a"])(this,"newlist",void 0),Object(c["a"])(this,"openChange",void 0),Object(c["a"])(this,"closeChange",void 0),this.oldlist=e,this.newlist=r,this.calc()}return Object(o["a"])(t,[{key:"calc",value:function(){var t=this.oldlist.getStockCodes(),e=0,r=0,n=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value;0!==this.newlist.get(c).price?(e+=(this.newlist.get(c).price-this.oldlist.get(c).price)/this.oldlist.get(c).price,r+=(this.newlist.get(c).open-this.oldlist.get(c).price)/this.oldlist.get(c).price):console.info("#Statement# suspension stock consider as change 0% ...",c,this.newlist.get(c).name)}}catch(u){a=!0,i=u}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw i}}this.closeChange=(100*e).toFixed(2),this.openChange=(100*r).toFixed(2)}},{key:"getOpenChange",value:function(){return this.openChange}},{key:"getCloseChange",value:function(){return this.closeChange}},{key:"getChange",value:function(){return this.closeChange}},{key:"getProfit",value:function(t){return(this.closeChange*t).toFixed(2)}}]),t}(),at=S.a.createInstance({name:"trace",driver:S.a.INDEXEDDB}),it=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isToday:!1};Object(s["a"])(this,t),Object(c["a"])(this,"isToday",void 0),Object(c["a"])(this,"record",{change:{},capture:{},trace:{}}),Object(c["a"])(this,"name",void 0),Object(c["a"])(this,"rule",void 0),Object(c["a"])(this,"listController",void 0),Object(c["a"])(this,"oldlists",void 0),Object(c["a"])(this,"newlists",void 0),Object(c["a"])(this,"openChanges",{}),Object(c["a"])(this,"closeChanges",{}),this.rule=r,this.listController=e,this.isToday=n.isToday,this.name=(this.isToday?"t0-".concat(this.rule.name):this.rule.name).toLowerCase(),this.reset(),this.deprecated()}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=!1,r=e?120:300,t.prev=2,t.next=5,this.load();case 5:if(!this.rule.name.includes("interval")||this.isToday){t.next=7;break}return t.abrupt("return");case 7:y["a"].interval(Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("#StatementController# ".concat(n.name," capture start ...")),t.next=3,n.capture();case 3:console.log("#StatementController# ".concat(n.name," capture end ..."));case 4:case"end":return t.stop()}}),t)}))),null,r),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.warn("#StatementController# ",t.t0);case 13:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"deprecated",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y["a"].until("150000");case 2:return t.next=5,at.length();case 5:if(e=t.sent,!(e<=200)){t.next=8;break}return t.abrupt("break",15);case 8:return t.next=10,at.key(0);case 10:return r=t.sent,t.next=13,at.removeItem(r);case 13:t.next=2;break;case 15:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=x()().format("YYYYMMDD"),t.next=4,at.getItem(e);case 4:if(r=t.sent,r){t.next=7;break}return t.abrupt("return");case 7:for(r[this.name]&&(this.record=r[this.name]),n=this.rule.interval?A["mb"].getIntervalKeys():A["mb"].getNormalKeys(),i=!0,s=!1,o=void 0,t.prev=12,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)h=u.value,l=A["mb"].name(h),this.oldlists[h]=new rt(this.record.capture[l]),this.newlists[h]=new rt(this.record.trace[l]);t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),s=!0,o=t.t0;case 20:t.prev=20,t.prev=21,i||null==c["return"]||c["return"]();case 23:if(t.prev=23,!s){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:t.next=32;break;case 30:t.prev=30,t.t1=t["catch"](0);case 32:case"end":return t.stop()}}),t,this,[[0,30],[12,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=x()().format("YYYYMMDD"),t.next=3,at.getItem(r);case 3:return n=t.sent,n||(n={}),this.record={change:e.change,trace:e.trace,capture:e.capture},n[this.name]=this.record,t.abrupt("return",at.setItem(r,n));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){var t=this.rule.interval?A["mb"].getIntervalKeys():A["mb"].getNormalKeys();this.oldlists={},this.newlists={};var e=!0,r=!1,n=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;this.newlists[s]=new rt,this.oldlists[s]=new rt}}catch(o){r=!0,n=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}}},{key:"remove",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.load();case 3:this.newlists[e]&&this.newlists[e].remove(r),this.oldlists[e]&&this.oldlists[e].remove(r),this.calc(),this.broadcast(),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.load();case 3:this.newlists[e]||(this.newlists[e]=new rt),this.oldlists[e]||(this.oldlists[e]=new rt),this.oldlists[e].upsert(r),this.newlists[e].upsert(n),this.calc(),this.broadcast(),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.newlists=null,this.oldlists=null,!e){t.next=7;break}this.oldlists=e,t.next=16;break;case 7:if(!this.isToday){t.next=13;break}return t.next=10,this.listController.getTodayLists();case 10:this.oldlists=t.sent,t.next=16;break;case 13:return t.next=15,this.listController.getYesterdayLists();case 15:this.oldlists=t.sent;case 16:if(this.oldlists){t.next=18;break}return t.abrupt("return");case 18:this.newlists={},r=Object.keys(this.oldlists),n=0,i=r;case 21:if(!(n<i.length)){t.next=37;break}if(s=i[n],t.prev=23,A["mb"].get(s)){t.next=26;break}return t.abrupt("continue",34);case 26:return t.next=28,this.captureList(this.oldlists[s]);case 28:this.newlists[s]=t.sent,t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](23),console.warn("#StatementController# ",t.t0);case 34:n++,t.next=21;break;case 37:this.calc(),this.broadcast(),t.next=44;break;case 41:t.prev=41,t.t1=t["catch"](0),console.warn("#StatementController# capture",t.t1);case 44:return t.abrupt("return",this.newlists);case 45:case"end":return t.stop()}}),t,this,[[0,41],[23,31]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calc",value:function(){if(this.newlists)for(var t=Object.keys(this.newlists),e=0,r=t;e<r.length;e++){var n=r[e],a=new nt(this.oldlists[n],this.newlists[n]);this.closeChanges[n]=a.getCloseChange(),this.openChanges[n]=a.getOpenChange()}}},{key:"broadcast",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e={name:this.name,change:{},trace:{},capture:{}},r=Object.keys(this.newlists),n=0,i=r;n<i.length;n++)s=i[n],o=A["mb"].name(s),c=x()().format("HH:mm"),u=this.closeChanges[s],this.record.change[o]||(this.record.change[o]=[]),this.record.change[o].unshift(u,c),e.change[o]=this.record.change[o],e.trace[o]=this.newlists[s].getStocks(),e.capture[o]=this.oldlists[s].getStocks();return t.next=5,this.save(e);case 5:console.log("#StatementController# list trace [".concat(this.name,"] at ").concat(x()().format("HH:mm:ss")," ...")),window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Trace_Event",{detail:e}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureList",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new rt,n=Object.keys(e.getStocks()),t.next=4,d["a"].captureStocks(n);case 4:return i=t.sent,r.setStocks(i),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),st=S.a.createInstance({name:"capture",driver:S.a.INDEXEDDB}),ot=10,ct=function(){function t(e,r){Object(s["a"])(this,t),Object(c["a"])(this,"rule",void 0),Object(c["a"])(this,"validator",void 0),Object(c["a"])(this,"lists",void 0),Object(c["a"])(this,"listKeys",void 0),Object(c["a"])(this,"statement",void 0),Object(c["a"])(this,"t0Statement",void 0),Object(c["a"])(this,"blocks",{concept:[],industry:[]}),this.rule=e,this.validator=r,this.t1Statement=new it(this,e),this.t0Statement=new it(this,e,{isToday:!0}),this.listKeys=e.interval?A["mb"].getIntervalKeys():A["mb"].getNormalKeys(),this.reset(),this.deprecated()}return Object(o["a"])(t,[{key:"all",value:function(){return this.lists}},{key:"list",value:function(t){return this.lists[t]}},{key:"stocks",value:function(t){return this.lists[t].getStocks()}},{key:"ignore",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:if(this.lists[e]){t.next=4;break}return t.abrupt("return");case 4:return this.lists[e].remove("".concat(r)),this.broadcast(),t.next=8,this.save();case 8:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.lists[e]||(this.lists[e]=new rt),this.lists[e].merge({stocks:r}),this.broadcast(),t.next=5,this.save();case 5:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"override",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.lists=e,this.broadcast(),t.next=4,this.save();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"load",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x()().format("YYYYMMDD"),t.next=3,this.loadListsOf(e);case 3:r=t.sent,r&&(this.lists=r);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadListsOf",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.rule.name,t.next=3,st.getItem(e);case 3:if(n=t.sent,n){t.next=7;break}return console.log("#ListController# ".concat(r," ").concat(e," lists not exist!")),t.abrupt("return");case 7:if(n[r]){t.next=10;break}return console.log("#ListController# ".concat(r," ").concat(e," lists not exist!")),t.abrupt("return");case 10:return t.abrupt("return",this.recover(n[r]));case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTodayLists",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x()().format("YYYYMMDD"),t.abrupt("return",this.loadListsOf(e));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getYesterdayLists",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,st.length();case 2:return e=t.sent,r=x()().format("YYYYMMDD"),t.next=6,st.key(e-1);case 6:if(n=t.sent,n!==r){t.next=13;break}return t.next=10,st.key(e-2);case 10:n=t.sent,t.next=16;break;case 13:return t.next=15,st.key(e-1);case 15:n=t.sent;case 16:return t.abrupt("return",this.loadListsOf(n));case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"recover",value:function(t){for(var e in t)t[e]=(new rt).recover(t[e]);return t}},{key:"deprecated",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y["a"].until("150000");case 2:return t.next=5,st.length();case 5:if(e=t.sent,!(e<=200)){t.next=8;break}return t.abrupt("break",15);case 8:return t.next=10,st.key(0);case 10:return r=t.sent,t.next=13,st.removeItem(r);case 13:t.next=2;break;case 15:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x()().format("YYYYMMDD"),r=this.rule.name,t.next=4,st.getItem(e);case 4:return n=t.sent,n||(n={}),n[r]=this.lists,t.abrupt("return",st.setItem(e,n));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){var t=this.listKeys;this.lists={};var e=!0,r=!1,n=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;this.lists[s]=new rt}}catch(o){r=!0,n=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}}},{key:"captureHotBlocks",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].captureBlock();case 2:return this.blocks=t.sent,console.info("#EastMoneyBlockCrawler# Hot Concept Blocks ..."),console.table(this.blocks.concept),console.info("#EastMoneyBlockCrawler# Hot Industry Blocks ..."),console.table(this.blocks.industry),t.abrupt("return",this.blocks);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createHotBlocksList",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={concept:[A["o"].key,A["p"].key,A["q"].key],industry:[A["w"].key,A["x"].key,A["y"].key]},t.next=4,this.captureHotBlocks();case 4:for(r in e)for(i in n=e[r],n)for(u in s=n[i],o=this.lists[s],c=o.getStocks(),c)h=c[u],h.block=this.blocks[r][i]["name"];t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.warn("#ListController# ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"createHotStocksList",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l,p,f,d,v,b,y,g,m,w,k,x,O,S;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.listKeys,r=A["mb"].getBondKeys(),n={},i={},s=[],o=0,c=!0,u=!1,h=void 0,t.prev=9,l=e[Symbol.iterator]();case 11:if(c=(p=l.next()).done){t.next=22;break}if(f=p.value,!r.includes(f)){t.next=15;break}return t.abrupt("continue",19);case 15:for(b in d=this.lists[f],v=d.getStocks(),Object.assign(n,v),v)y=v[b],s[b]||(s[b]={name:y.name,count:0}),s[b].count++;case 19:c=!0,t.next=11;break;case 22:t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](9),u=!0,h=t.t0;case 28:t.prev=28,t.prev=29,c||null==l["return"]||l["return"]();case 31:if(t.prev=31,!u){t.next=34;break}throw h;case 34:return t.finish(31);case 35:return t.finish(28);case 36:for(g=Object.keys(s).sort((function(t,e){return s[e].count-s[t].count})),m=!0,w=!1,k=void 0,t.prev=40,x=g[Symbol.iterator]();!(m=(O=x.next()).done);m=!0)S=O.value,s[S].count>=3&&o<ot&&(i[S]=Object.assign({},n[S],{hot:s[S].count}),o++);t.next=48;break;case 44:t.prev=44,t.t1=t["catch"](40),w=!0,k=t.t1;case 48:t.prev=48,t.prev=49,m||null==x["return"]||x["return"]();case 51:if(t.prev=51,!w){t.next=54;break}throw k;case 54:return t.finish(51);case 55:return t.finish(48);case 56:console.log("#ListController# list ".concat(this.rule.name," capture hot stcoks ...")),console.table(s),this.lists[A["v"].key].setStocks(i);case 59:case"end":return t.stop()}}),t,this,[[9,24,28,36],[29,,31,35],[40,44,48,56],[49,,51,55]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.rule.interval?void 0:[this.rule.capture],t.prev=1,t.next=4,this.load();case 4:y["a"].interval(Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("#ListController# list ".concat(r.rule.name," capture start ...")),t.next=3,r.capture();case 3:r.rule.interval||(console.info("=================================================="),console.info("#ListController# today list capture [".concat(r.rule.name,"] at ").concat(x()().format("HH:mm:ss"),": "),r.lists),console.info("==================================================")),console.log("#ListController# list ".concat(r.rule.name," capture end ..."));case 5:case"end":return t.stop()}}),t)}))),e,this.rule.interval),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.warn("#ListController# ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureList",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p,f,v,b;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=A["mb"].getIntervalKeys(),n=A["mb"].getBondKeys(),i=[],!r.includes(e)){t.next=9;break}return t.next=6,Q.list(e,this.validator);case 6:i=t.sent,t.next=18;break;case 9:if(!n.includes(e)){t.next=15;break}return t.next=12,et.list(e);case 12:i=t.sent,t.next=18;break;case 15:return t.next=17,d["a"].captureList(e);case 17:i=t.sent;case 18:if(i&&i.length){t.next=20;break}return t.abrupt("return",new rt);case 20:s={},o=0,c=!0,u=!1,h=void 0,t.prev=24,l=i[Symbol.iterator]();case 26:if(c=(p=l.next()).done){t.next=52;break}if(f=p.value,v=f,b=v.code,v.name,v.change,r.includes(e)){t.next=38;break}if(this.validator.isFullRequiredFields(f)){t.next=34;break}return t.next=33,d["a"].captureStock(b);case 33:f=t.sent;case 34:return t.next=36,this.validator.filter(e,f);case 36:if(t.sent){t.next=38;break}return t.abrupt("continue",49);case 38:if(!s[b]){t.next=40;break}return t.abrupt("continue",49);case 40:if(!(f.price<=0)){t.next=42;break}return t.abrupt("continue",49);case 42:if(n.includes(e)){t.next=45;break}if(!(f.change>9.8)){t.next=45;break}return t.abrupt("continue",49);case 45:if(s[b]=f,o++,o!==ot){t.next=49;break}return t.abrupt("break",52);case 49:c=!0,t.next=26;break;case 52:t.next=58;break;case 54:t.prev=54,t.t0=t["catch"](24),u=!0,h=t.t0;case 58:t.prev=58,t.prev=59,c||null==l["return"]||l["return"]();case 61:if(t.prev=61,!u){t.next=64;break}throw h;case 64:return t.finish(61);case 65:return t.finish(58);case 66:return console.log("#ListController# list ".concat(this.rule.name," capture ").concat(e," "),s),t.abrupt("return",new rt(s));case 68:case"end":return t.stop()}}),t,this,[[24,54,58,66],[59,,61,65]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,s,o,c=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object.keys(this.lists),r=0,n=e;case 2:if(!(r<n.length)){t.next=23;break}if(s=n[r],t.prev=4,s!==A["v"].key){t.next=7;break}return t.abrupt("continue",20);case 7:if(this.listKeys.includes(s)){t.next=9;break}return t.abrupt("continue",20);case 9:return t.next=11,this.captureList(s);case 11:return o=t.sent,this.lists[s].merge(o),t.next=15,Object(w["a"])(500);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),console.warn("#ListController# ",t.t0);case 20:r++,t.next=2;break;case 23:if(t.prev=23,!this.rule.interval){t.next=30;break}return this.broadcast(),t.next=28,this.save();case 28:t.next=36;break;case 30:return this.createHotStocksList(),this.createHotBlocksList(),this.broadcast(),t.next=35,this.save();case 35:setTimeout(Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},t.next=3,Object(w["a"])(15e4);case 3:return t.next=5,c.t0Statement.capture(c.lists);case 5:if(e=t.sent,console.log("#ListController# [".concat(c.rule.name,"] t0Statement pre-trace "),e),!c.validator.hasCaptureRule("pre-trace")){t.next=13;break}return t.next=10,c.validator.filterOfPreTrace(c.lists,e);case 10:return c.broadcast(),t.next=13,c.save();case 13:case"end":return t.stop()}}),t)}))));case 36:t.next=41;break;case 38:t.prev=38,t.t1=t["catch"](23),console.warn("#ListController# ",t.t1);case 41:case"end":return t.stop()}}),t,this,[[4,17],[23,38]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={name:this.rule.name,lists:this.lists},window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Capture_Event",{detail:e}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),ut=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"listControllers",[]),this.clearTempCapture();var e=[].concat(v["a"].captures||[],v["a"].temps||[]),r=v["a"].validators,n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var h=o.value,l=!0,p=!1,f=void 0;try{for(var d,b=r[Symbol.iterator]();!(l=(d=b.next()).done);l=!0){var y=d.value,g=this.create(h,y);this.listControllers.push(g)}}catch(w){p=!0,f=w}finally{try{l||null==b["return"]||b["return"]()}finally{if(p)throw f}}}}catch(w){a=!0,i=w}finally{try{n||null==u["return"]||u["return"]()}finally{if(a)throw i}}var m=this.create(v["a"].intervals[0],r[0]);this.listControllers.push(m)}return Object(o["a"])(t,[{key:"create",value:function(t,e){var r="".concat(t.capture,"-").concat(e.name).toLowerCase(),n=new l(h({},t,{name:r})),a=new L(e);return new ct(n,a)}},{key:"controller",value:function(t,e){var r=!0,n=!1,a=void 0;try{for(var i,s=this.listControllers[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value,c=o.rule,u=o.validator.config;if(c.capture===t&&u.name===e)return o}}catch(h){n=!0,a=h}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw a}}}},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=x()().format("YYYYMMDD"),r=!0,n=!1,i=void 0,t.prev=5,s=this.listControllers[Symbol.iterator]();case 7:if(r=(o=s.next()).done){t.next=16;break}if(c=o.value,!c.rule.date||c.rule.date===e){t.next=12;break}return console.log("#controllers# ignore temp capture rule ",c.rule.capture,c.rule.date),t.abrupt("continue",13);case 12:c.start();case 13:r=!0,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](5),n=!0,i=t.t0;case 22:t.prev=22,t.prev=23,r||null==s["return"]||s["return"]();case 25:if(t.prev=25,!n){t.next=28;break}throw i;case 28:return t.finish(25);case 29:return t.finish(22);case 30:t.next=35;break;case 32:t.prev=32,t.t1=t["catch"](0),console.warn("#controllers# capture",t.t1);case 35:case"end":return t.stop()}}),t,this,[[0,32],[5,18,22,30],[23,,25,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=!0,r=!1,n=void 0,t.prev=4,i=this.listControllers[Symbol.iterator]();case 6:if(e=(s=i.next()).done){t.next=15;break}return o=s.value,t.next=10,o.t1Statement.start();case 10:return t.next=12,o.t0Statement.start();case 12:e=!0,t.next=6;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](4),r=!0,n=t.t0;case 21:t.prev=21,t.prev=22,e||null==i["return"]||i["return"]();case 24:if(t.prev=24,!r){t.next=27;break}throw n;case 27:return t.finish(24);case 28:return t.finish(21);case 29:t.next=34;break;case 31:t.prev=31,t.t1=t["catch"](0),console.warn("#controllers# trace ",t.t1);case 34:case"end":return t.stop()}}),t,this,[[0,31],[4,17,21,29],[22,,24,28]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearTempCapture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(v["a"].temps){t.next=2;break}return t.abrupt("return");case 2:if(v["a"].temps.length){t.next=4;break}return t.abrupt("return");case 4:for(e=[],r=x()().subtract(2,"days").format("YYYYMMDD"),1!==+x()().day()&&2!==+x()().day()||(r=x()().subtract(4,"days").format("YYYYMMDD")),n=!0,i=!1,s=void 0,t.prev=10,o=v["a"].temps[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)u=c.value,+u.date>r&&e.push(u);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),i=!0,s=t.t0;case 18:t.prev=18,t.prev=19,n||null==o["return"]||o["return"]();case 21:if(t.prev=21,!i){t.next=24;break}throw s;case 24:return t.finish(21);case 25:return t.finish(18);case 26:v["a"].temps=e;case 27:case"end":return t.stop()}}),t,null,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"setTempCapture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=x()().format("YYYYMMDD"),r=x()().add(1,"minutes").format("HH:mm"),n=new l({capture:r,trace:["14:40"],date:e}),v["a"].temps=[].concat(v["a"].temps,n);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTempCapture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i,s,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],i=!0,s=!1,o=void 0,t.prev=4,c=v["a"].temps[Symbol.iterator]();case 6:if(i=(u=c.next()).done){t.next=14;break}if(h=u.value,h.capture!==e||h.date!==r){t.next=10;break}return t.abrupt("continue",11);case 10:n.push(h);case 11:i=!0,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),s=!0,o=t.t0;case 20:t.prev=20,t.prev=21,i||null==c["return"]||c["return"]();case 23:if(t.prev=23,!s){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:v["a"].temps=n;case 29:case"end":return t.stop()}}),t,null,[[4,16,20,28],[21,,23,27]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"ignore",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n,i){var s,o,c,u,h,l,p,f,d;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=!0,o=!1,c=void 0,t.prev=3,u=this.listControllers[Symbol.iterator]();case 5:if(s=(h=u.next()).done){t.next=19;break}if(l=h.value,p=l.rule,f=l.validator.config,d=A["mb"].keyOf(n),p.capture!==e||f.name!==r){t.next=16;break}return t.next=13,l.ignore(d,i);case 13:return t.next=15,l.t0Statement.remove(d,i);case 15:window.dispatchEvent(new CustomEvent("__Walle_Stock_Ignore_Event",{detail:{time:e,vtype:r,listkey:d,code:i}}));case 16:s=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](3),o=!0,c=t.t0;case 25:t.prev=25,t.prev=26,s||null==u["return"]||u["return"]();case 28:if(t.prev=28,!o){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(25);case 33:case"end":return t.stop()}}),t,this,[[3,21,25,33],[26,,28,32]])})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()}]),t}(),ht=new ut,lt=r("b868"),pt=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"index",{sse:{price:0,change:0,volume:0,amount:0,netinflow:0,rate:0},szse:{price:0,change:0,volume:0,amount:0,netinflow:0,rate:0},north:{}}),Object(c["a"])(this,"number",{full:0,rise:0,down:0,limitup:0,limitdown:0,prelimitup:0,prelimitdown:0}),Object(c["a"])(this,"strength",{full:0,netinflow:0,rise:0,down:0}),Object(c["a"])(this,"changes",{index:[],netinflow:[],full:[],rise:[],down:[]}),Object(c["a"])(this,"rates",{index:[],netinflow:[],full:[],rise:[],down:[]})}return Object(o["a"])(t,[{key:"start",value:function(){var t=this;y["a"].interval((function(){t.process()}),null,180,"market-analyse")}},{key:"process",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.calcIndex();case 3:return t.next=5,this.calcIndexOfNorth();case 5:return t.next=7,this.calcStocks();case 7:return t.next=9,this.broadcast();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.warn("#Market-Trend# ",t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){window.dispatchEvent(new CustomEvent("__Walle_Stock_Market_Analyse_Event",{detail:{index:this.index,number:this.number,strength:this.strength,changes:this.changes,rates:this.rates}}))}},{key:"calcStocks",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in e=g["a"].stocks(),r={full:0,rise:0,down:0},n={full:0,rise:0,down:0},this.number.full=0,this.number.rise=0,this.number.down=0,this.number.limitup=0,this.number.limitdown=0,this.number.prelimitup=0,this.number.prelimitdown=0,e)s=e[i],s.change>0&&(this.number.rise++,r.rise+=s.change,n.rise+=s.rate),s.change<0&&(this.number.down++,r.down+=s.change,n.down+=s.rate),s.change>=9.8&&this.number.limitup++,s.change<=-9.8&&this.number.limitdown++,s.change>5&&s.change<9.8&&this.number.prelimitup++,s.change<-5&&s.change>-9.8&&this.number.prelimitdown++,this.number.full++;r.rise=+r.rise.toFixed(2),r.down=+r.down.toFixed(2),r.full=+(r.rise+r.down).toFixed(2),n.rise=+n.rise.toFixed(2),n.down=+n.down.toFixed(2),n.full=+(n.rise+n.down).toFixed(2),this.strength.rise=+(n.rise/this.number.rise).toFixed(2),this.strength.down=+(n.down/this.number.down).toFixed(2),this.strength.full=+(this.strength.rise+this.strength.down).toFixed(2),o=x()().format("HH:mm"),this.changes.rise.unshift(r.rise,o),this.changes.down.unshift(r.down,o),this.changes.full.unshift(r.full,o),this.changes.index.unshift(+this.index.sse.price+this.index.szse.price,o),this.rates.rise.unshift(+(n.rise/this.number.rise).toFixed(2),o),this.rates.down.unshift(+(n.down/this.number.down).toFixed(2),o),this.rates.full.unshift(+(n.rise/this.number.rise+n.down/this.number.down).toFixed(2),o),this.rates.index.unshift(+this.index.sse.rate+this.index.szse.rate,o),this.calcNetinflow(o);case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcNetinflow",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=400,n=g["a"].listOfStocks("netinflow",1,r),i=0,s=0,o=!0,c=!1,u=void 0,t.prev=7,h=n[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)p=l.value,i+=p.change,s+=p.rate;t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),c=!0,u=t.t0;case 15:t.prev=15,t.prev=16,o||null==h["return"]||h["return"]();case 18:if(t.prev=18,!c){t.next=21;break}throw u;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.strength.netinflow=+(s/r).toFixed(2),this.changes.netinflow.unshift(+i.toFixed(2),e),this.rates.netinflow.unshift(+(s/r).toFixed(2),e);case 26:case"end":return t.stop()}}),t,this,[[7,11,15,23],[16,,18,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcIndexOfNorth",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="http://push2.eastmoney.com/api/qt/kamt/get?fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54",t.next=4,lt["a"].get(e,null);case 4:r=t.sent,n=JSON.parse(r),this.index.north=n.data,t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcIndex",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].captureStocks(["1.000001","399001"]);case 2:e=t.sent,r=e["1.000001"],n=e["399001"],this.index={sse:r,szse:n};case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"isTradingDay",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.next=2;break;case 2:if(e=+x()().format("HHmmss"),r="092500",!(e<92500)){t.next=8;break}r="092510",t.next=14;break;case 8:if(!(e>113e3)){t.next=12;break}r="130010",t.next=14;break;case 12:if(!(e>15e4)){t.next=14;break}return t.abrupt("return",!1);case 14:return console.log("#Markets# will start at ".concat(r," ...")),t.next=17,y["a"].until(r);case 17:return t.next=19,d["a"].isTrading();case 19:if(n=t.sent,console.info("#Markets# stock market trading status ".concat(n?"open":"close"," ...")),n){t.next=26;break}if(!(e>=92500&&e<=113e3||e>=13e4&&e<=15e4)){t.next=26;break}return t.next=25,toastr.loading("Market Closed","Holidays");case 25:console.info("#Markets# stock market closed for holidays ...");case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),ft=new pt,dt=r("21a6"),vt=r.n(dt),bt=r("b5ee"),yt=r("32d2"),gt="walle-stocks-trace.json",mt="walle-stocks-capture.json",wt="walle-stocks-storage.json",kt="walle-stocks-flow.json",xt=function(){function t(){var e=this;Object(s["a"])(this,t),bt["a"].listen("KeyB",(function(){var t={timeOut:5e3,extendedTimeOut:5e3,closeButton:!0,positionClass:"toast-bottom-left"};yt["a"].clear(),yt["a"].confirm("click to backup trace file","BACKUP",(function(){return e.trace()}),t),yt["a"].confirm("click to backup capture file","BACKUP",(function(){return e.capture()}),t),yt["a"].confirm("click to backup flow file","BACKUP",(function(){return e.flow()}),t),yt["a"].confirm("click to backup storage file","BACKUP",(function(){return e.storage()}),t)}))}return Object(o["a"])(t,[{key:"download",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){var n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=x()().format("YYYYMMDD"),i=new Blob([JSON.stringify(r,null,"\t")],{type:"application/json;charset=utf-8"}),t.next=4,Object(w["a"])(1e3);case 4:return t.abrupt("return",vt.a.saveAs(i,"".concat(n,"-").concat(e)));case 5:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,at.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(gt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,st.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(mt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"flow",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,T.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(kt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"storage",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,S.a.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(wt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"all",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.storage();case 2:return t.next=4,this.capture();case 4:return t.next=6,this.flow();case 6:return t.next=8,this.trace();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"autoBackup",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=x()().endOf("month").format("YYYYMMDD"),r=x()().format("YYYYMMDD"),e!==r){t.next=8;break}return t.next=5,y["a"].until("233000");case 5:return t.next=7,this.all();case 7:console.info("#Backup# auto backup storage & records at ".concat(r," ..."));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Ot=function(){function t(){var e=this;Object(s["a"])(this,t),bt["a"].listen("KeyR",(function(){return e.upload()}))}return Object(o["a"])(t,[{key:"upload",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=document.createElement("input"),e.type="file",e.multiple="multiple",e.onchange=function(){r.recover(e.files)},e.click();case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"recover",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,u,h,l,p,f,d,v=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r={},Object(c["a"])(r,gt,(function(t){return v.trace(t)})),Object(c["a"])(r,mt,(function(t){return v.capture(t)})),Object(c["a"])(r,kt,(function(t){return v.flow(t)})),Object(c["a"])(r,wt,(function(t){return v.storage(t)})),n=r,i=!0,s=!1,o=void 0,t.prev=5,u=e[Symbol.iterator]();case 7:if(i=(h=u.next()).done){t.next=20;break}if(l=h.value,p=l.name.slice(9),!n[p]){t.next=17;break}return t.next=13,l.text();case 13:return f=t.sent,d=JSON.parse(f),t.next=17,n[p](d);case 17:i=!0,t.next=7;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](5),s=!0,o=t.t0;case 26:t.prev=26,t.prev=27,i||null==u["return"]||u["return"]();case 29:if(t.prev=29,!s){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:window.alert("Walle Recover Success ..."),t.next=41;break;case 37:t.prev=37,t.t1=t["catch"](0),console.info("#Recover# fail ",t.t1),window.alert("Walle Recover Fail, Try Aagin ...");case 41:case"end":return t.stop()}}),t,null,[[0,37],[5,22,26,34],[27,,29,33]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,at.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,st.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"flow",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,T.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"storage",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,S.a.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),St=new xt,jt=(new Ot,function(){function t(){Object(s["a"])(this,t)}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,St.autoBackup(),t.next=4,ft.isTradingDay();case 4:if(!t.sent){t.next=11;break}console.log("#Loop# core-loop start ..."),g["a"].start(),Q.start(),ft.start(),ht.capture(),ht.trace();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.warn("#loop# ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}()),Tt=new jt,Et=(r("a9e3"),r("a15b"),r("720d")),Dt=r.n(Et),Rt=function(){function t(e,r){Object(s["a"])(this,t),Object(c["a"])(this,"publickey","-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDHdsyxT66pDG4p73yope7jxA92\nc0AT4qIJ/xtbBcHkFPK77upnsfDTJiVEuQDH+MiMeb+XhCLNKZGp0yaUU6GlxZdp\n+nLW8b7Kmijr3iepaDhcbVTsYBWchaWUXauj9Lrhz58/6AE/NF0aMolxIGpsi+ST\n2hSHPu3GSXMdhPCkWQIDAQAB\n-----END PUBLIC KEY-----"),Object(c["a"])(this,"validatekey",""),Object(c["a"])(this,"opener",null),Object(c["a"])(this,"shareholder",{sz:"",sh:""}),Object(c["a"])(this,"user",{id:"",password:""}),Object(c["a"])(this,"tradeTypes",{B:"B",a:"0a",b:"0b",c:"0c",d:"0d",e:"0e",S:"S",f:"0f",g:"0g",h:"0h",i:"0i",j:"0j"}),Object(c["a"])(this,"status",{0:"未知",1:"未报",2:"已报",3:"部成",4:"待报",5:"已受理",6:"已成",7:"已撤"}),this.user.id=e,this.user.password=r}return Object(o["a"])(t,[{key:"market",value:function(t){var e=t.slice(0,2);return["00","30","12"].includes(e)?"sz":["60","68","11"].includes(e)?"sh":void 0}},{key:"login",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.opener){t.next=3;break}return t.abrupt("return");case 3:return this.opener=window.open("https://jy.xzsec.com/Login"),t.next=6,new Promise((function(t,r){toastr.confirm("click to continue after login ...","MARKET ACCOUNT LOGIN",Object(i["a"])(a.a.mark((function r(){return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.opener=null,r.prev=1,r.next=4,e.key();case 4:r.next=8;break;case 6:r.prev=6,r.t0=r["catch"](1);case 8:t();case 9:case"end":return r.stop()}}),r,null,[[1,6]])}))),{timeOut:0,extendedTimeOut:0})}));case 6:console.log("#EastMoneyStockTrader# login ..."),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# login fail",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"ocr",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captcha",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=Math.random(),r="https://jy.xzsec.com/Login/YZM?randNum=".concat(e),console.log("#EastMoneyStockTrader# captcha ...",r),t.abrupt("return",{url:r,random:e});case 7:throw t.prev=7,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# captcha fail",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"auth",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n,i){var s,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s="https://jy.xzsec.com/Login/Authentication?validatekey=",o=new Dt.a,o.setPublicKey(this.publickey),c=o.encrypt(r),u={userId:e,password:c,identifyCode:n,randNumber:i,duration:"1800",authCode:"",type:"Z"},t.next=8,lt["a"].post(s,u,{dataType:"json"});case 8:if(h=t.sent,0!==h.Status){t.next=13;break}console.log("#EastMoneyStockTrader# auth ..."),t.next=14;break;case 13:throw h;case 14:t.next=20;break;case 16:throw t.prev=16,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# auth fail",t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"key",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="https://jy.xzsec.com/Trade/Buy",t.next=4,lt["a"].get(e,null);case 4:if(r=t.sent,!r){t.next=16;break}if(n=document.createElement("div"),n.innerHTML=r,i=n.querySelector("#em_validatekey"),!i||!i.value){t.next=13;break}this.validatekey=i.value,t.next=14;break;case 13:throw{status:-1,message:"密钥获取异常，请重新登录!"};case 14:return console.log("#EastMoneyStockTrader# load key ...",this.validatekey),t.abrupt("return",this.validatekey);case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# load key fail",t.t0),t.t0;case 22:case"end":return t.stop()}}),t,this,[[0,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"check",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.validatekey){t.next=4;break}return t.next=3,this.login();case 3:throw{status:-2,message:"会话已超时，请重新登录!"};case 4:return t.abrupt("return",!!this.validatekey);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"hook",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-2!==e.Status){t.next=3;break}throw this.validatekey="",{status:-2,message:"会话已超时，请重新登录!"};case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trade",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n,i,s){var o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return o="https://jy.xzsec.com/Trade/SubmitTrade?validatekey=".concat(this.validatekey),this.market(r),c={stockCode:r,amount:i,tradeType:e,zqmc:n},s&&(c.price=s),t.next=9,lt["a"].post(o,c,{dataType:"json"});case 9:if(u=t.sent,this.hook(u),0!==u.Status){t.next=16;break}return console.log("#EastMoneyStockTrader# trade-[".concat(e,"]: ").concat(r," ").concat(n," ").concat(s," ").concat(i," ")),t.abrupt("return",u.Data[0].Wtbh);case 16:throw u;case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# trade-[".concat(e,"]: ").concat(r," ").concat(n," ").concat(s," ").concat(i," fail"),t.t0),t.t0;case 23:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,r,n,a,i){return t.apply(this,arguments)}return e}()},{key:"limitorder",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n,i){var s,o,c,u,h=arguments;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:5,t.next=3,this.position(r);case 3:return o=t.sent,c=e===this.tradeTypes.B?o.sell.price[s-1]:o.buy.price[s-1],t.next=7,this.trade(e,r,n,i,c);case 7:return u=t.sent,t.next=10,Object(w["a"])(300);case 10:return t.next=12,this.revoke([u]);case 12:case"end":return t.stop()}}),t,this)})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"buy",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n){var i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.slice(0,2),!["13","12"].includes(i)){t.next=3;break}return t.abrupt("return",this.limitorder(this.tradeTypes.B,e,r,n));case 3:return t.abrupt("return",this.trade(this.tradeTypes.d,e,r,n));case 4:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n){var i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.slice(0,2),!["13","12"].includes(i)){t.next=3;break}return t.abrupt("return",this.limitorder(this.tradeTypes.S,e,r,n));case 3:return t.abrupt("return",this.trade(this.tradeTypes.i,e,r,n));case 4:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"query",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Search/GetOrdersData?validatekey=".concat(this.validatekey),n={qqhs:10,dwc:""},t.next=7,lt["a"].post(r,n,{dataType:"json"});case 7:if(i=t.sent,this.hook(i),0!==i.Status){t.next=37;break}s=!0,o=!1,c=void 0,t.prev=13,u=i.Data[Symbol.iterator]();case 15:if(s=(h=u.next()).done){t.next=23;break}if(l=h.value,l.Wtbh!==e){t.next=20;break}return console.log("#EastMoneyStockTrader# query ".concat(e,": code ").concat(l.Zqdm," ").concat(l.Zqmc," status ").concat(l.Mmsm,"-").concat(l.Wtzt," deal ").concat(l.Cjsl,"/").concat(l.Wtsl)),t.abrupt("return",l.Wtzt);case 20:s=!0,t.next=15;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](13),o=!0,c=t.t0;case 29:t.prev=29,t.prev=30,s||null==u["return"]||u["return"]();case 32:if(t.prev=32,!o){t.next=35;break}throw c;case 35:return t.finish(32);case 36:return t.finish(29);case 37:throw console.log("#EastMoneyStockTrader# query ".concat(e," status 未知 ")),"未知";case 41:throw t.prev=41,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# query ".concat(e," fail"),t.t1),t.t1;case 45:case"end":return t.stop()}}),t,this,[[0,41],[13,25,29,37],[30,,32,36]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"revoke",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p,f;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:for(r="https://jy.xzsec.com/Trade/RevokeOrders?validatekey=".concat(this.validatekey),n=x()().format("YYYYMMDD"),i=[],s=!0,o=!1,c=void 0,t.prev=9,u=e[Symbol.iterator]();!(s=(h=u.next()).done);s=!0)l=h.value,i.push("".concat(n,"_").concat(l));t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](9),o=!0,c=t.t0;case 17:t.prev=17,t.prev=18,s||null==u["return"]||u["return"]();case 20:if(t.prev=20,!o){t.next=23;break}throw c;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return p={revokes:i.join(",")},t.next=28,lt["a"].post(r,p);case 28:f=t.sent,console.log("#EastMoneyStockTrader# revoke ",f),t.next=36;break;case 32:throw t.prev=32,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# revoke: ".concat(e.join(",")," fail"),t.t1),t.t1;case 36:case"end":return t.stop()}}),t,this,[[0,32],[9,13,17,25],[18,,20,24]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"revokelist",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Trade/GetRevokeList?validatekey=".concat(this.validatekey),t.next=6,lt["a"].post(r,null,{dataType:"json"});case 6:if(n=t.sent,this.hook(n),0!==n.Status){t.next=34;break}for(i=null,s=[],o=!0,c=!1,u=void 0,t.prev=14,h=n.Data[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)p=l.value,s.push(p.Wtbh),p.Wtbh===e&&(i=p.Wtbh);t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](14),c=!0,u=t.t0;case 22:t.prev=22,t.prev=23,o||null==h["return"]||h["return"]();case 25:if(t.prev=25,!c){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return console.log("#EastMoneyStockTrader# revokelist ",i||s),t.abrupt("return",e?i:s);case 34:throw n;case 35:t.next=41;break;case 37:throw t.prev=37,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# revokelist ".concat(e||""," fail"),t.t1),t.t1;case 41:case"end":return t.stop()}}),t,this,[[0,37],[14,18,22,30],[23,,25,29]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stocklist",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h,l,p,f,d,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Search/GetStockList?validatekey=".concat(this.validatekey),t.next=6,lt["a"].get(r,null,{dataType:"json"});case 6:if(n=t.sent,this.hook(n),0!==n.Status){t.next=34;break}for(i=null,s=[],o=!0,c=!1,u=void 0,t.prev=14,h=n.Data[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)p=l.value,f=p.Zqdm,d=p.Zqmc,v={total:+p.Zqsl,available:+p.Kysl,unavailable:+p.Djsl},e===f&&(i={code:f,name:d,amount:v}),s.push({code:f,name:d,amount:v});t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](14),c=!0,u=t.t0;case 22:t.prev=22,t.prev=23,o||null==h["return"]||h["return"]();case 25:if(t.prev=25,!c){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return console.log("#EastMoneyStockTrader# stocklist : ",i||s),t.abrupt("return",e?i:s);case 34:throw n;case 35:t.next=41;break;case 37:throw t.prev=37,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# stocklist ".concat(e||""," fail"),t.t1),t.t1;case 41:case"end":return t.stop()}}),t,this,[[0,37],[14,18,22,30],[23,,25,29]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"position",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=this.market(e).toUpperCase(),n="https://hsmarket.eastmoney.com/api/SHSZQuoteSnapshot?id=".concat(e,"&market=").concat(r,"&callback"),t.next=5,lt["a"].get(n,null);case 5:for(i=t.sent,i=i.slice(1,-2),s=JSON.parse(i),o={buy:{price:[],amount:[]},sell:{price:[],amount:[]}},c=0,u=[1,2,3,4,5];c<u.length;c++)h=u[c],o.buy.price.push(+s.fivequote["buy".concat(h)]),o.buy.amount.push(+s.fivequote["buy".concat(h,"_count")]),o.sell.price.push(+s.fivequote["sale".concat(h)]),o.sell.amount.push(+s.fivequote["sale".concat(h,"_count")]);return console.log("#EastMoneyStockTrader# position ".concat(e,": "),o),t.abrupt("return",o);case 14:throw t.prev=14,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# position ".concat(e," fail"),t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"account",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return e="https://jy.xzsec.com/Com/queryAssetAndPositionV1?validatekey=".concat(this.validatekey),r={moneyType:"RMB"},t.next=7,lt["a"].post(e,r,{dataType:"json"});case 7:return n=t.sent,this.hook(n),i={money:{available:0,unavailable:0},profit:{today:0,all:0},capital:{stock:0,money:0}},0===n.Status&&(s=n.Data[0],i.money.available=+s.Kyzj,i.money.unavailable=+s.Djzj,i.profit.today=+(s.Dryk||0),i.profit.all=+s.Ljyk,i.capital.stock=+s.Zxsz,i.capital.money=+s.Zzc,console.log("#EastMoneyStockTrader# account ",i)),t.abrupt("return",i);case 14:throw t.prev=14,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# account fail",t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Ct=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"trader",new Rt),Object(c["a"])(this,"isForceDisable",!0),this.isForceDisable="off"===v["a"].trader.status}return Object(o["a"])(t,[{key:"login",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.trader.key();case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](3),t.next=12,this.trader.check();case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](0),console.warn("#Trader# login ",t.t1);case 17:case"end":return t.stop()}}),t,this,[[0,14],[3,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"amount",value:function(t,e){try{if(t.startsWith("11")||t.startsWith("12")){var r=v["a"].trader.bond.amount/e;return+Number(Math.floor(r/v["a"].trader.bond.unit)*v["a"].trader.bond.unit).toFixed(0)}var n=v["a"].trader.stock.amount/e;return+Number(Math.floor(n/v["a"].trader.stock.unit)*v["a"].trader.stock.unit).toFixed(0)}catch(a){return t.startsWith("11")||t.startsWith("12")?10:100}}},{key:"buy",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n){var i,s,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:if(n){t.next=9;break}return t.next=6,this.trader.position(e);case 6:return i=t.sent,n=this.amount(e,i.sell.price[0]),t.abrupt("return",this.trader.buy(e,r,n));case 9:return t.next=11,this.trader.stocklist(e);case 11:s=t.sent,s||(s={code:e,name:r,amount:{total:0,available:0,unavailable:0}}),o=n;case 14:return t.next=17,this.trader.buy(e,r,o);case 17:return t.next=19,this.trader.stocklist(e);case 19:if(c=t.sent,u=c.amount.total-s.amount.total,u!==n){t.next=23;break}return t.abrupt("return");case 23:o=n-u,t.next=14;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](0),console.warn("#Trader# buy ",t.t0);case 31:case"end":return t.stop()}}),t,this,[[0,28]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n){var i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.trader.stocklist(e);case 5:if(i=t.sent,i){t.next=8;break}return t.abrupt("return");case 8:if(i.amount.available){t.next=10;break}return t.abrupt("return");case 10:n||(n=i.amount.available),n>i.amount.available&&(n=i.amount.available),s=n;case 13:return t.next=16,this.trader.sell(e,r,s);case 16:return t.next=18,this.trader.stocklist(e);case 18:if(o=t.sent,o){t.next=21;break}return t.abrupt("return");case 21:if(o.amount.available){t.next=23;break}return t.abrupt("return");case 23:if(c=i.amount.available-o.amount.available,c!==n){t.next=26;break}return t.abrupt("return");case 26:s=n-c,t.next=13;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](0),console.warn("#Trader# sell ",t.t0);case 34:case"end":return t.stop()}}),t,this,[[0,31]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"liquidation",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.trader.stocklist();case 5:e=t.sent,r=!0,n=!1,i=void 0,t.prev=9,s=e[Symbol.iterator]();case 11:if(r=(o=s.next()).done){t.next=18;break}return c=o.value,t.next=15,this.sell(c.code,c.name,c.amount.available);case 15:r=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](9),n=!0,i=t.t0;case 24:t.prev=24,t.prev=25,r||null==s["return"]||s["return"]();case 27:if(t.prev=27,!n){t.next=30;break}throw i;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=37;break;case 34:t.prev=34,t.t1=t["catch"](0),console.warn("#Trader# liquidation ",t.t1);case 37:case"end":return t.stop()}}),t,this,[[0,34],[9,20,24,32],[25,,27,31]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Bt=new Ct,Mt=r("5ca6"),It=r.n(Mt),Ft=S.a.createInstance({name:"storage",driver:S.a.INDEXEDDB}),_t=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(s["a"])(this,t),Object(c["a"])(this,"record",{key:"",code:"",name:"",trend:{time:[],ma:[],price:[],change:[]},monitor:{time:"",price:"",change:""},buy:{time:"",price:"",change:""},sell:{time:"",price:"",change:""}}),this.record.key=e,this.record.name=n,this.record.code=r}return Object(o["a"])(t,[{key:"key",value:function(){return this.record.key}},{key:"code",value:function(t){return t&&(this.record.code=t),this.record.code}},{key:"name",value:function(t){return t&&(this.record.code=t),this.record.name}},{key:"trend",value:function(t){return t&&(this.record.trend.time=t.time.slice(0,300),this.record.trend.ma=t.ma.slice(0,300),this.record.trend.price=t.price.slice(0,300),this.record.trend.change=t.change.slice(0,300)),this.record.trend}},{key:"concatTrend",value:function(t,e,r,n){this.record.trend.time=this.record.trend.time.concat(n),this.record.trend.ma=this.record.trend.ma.concat(t),this.record.trend.price=this.record.trend.price.concat(e),this.record.trend.change=this.record.trend.change.concat(r)}},{key:"appendTrend",value:function(t,e,r,n){n||(n=x()().format("HHmmss")),this.record.trend.time.push(n),this.record.trend.ma.push(t),this.record.trend.price.push(e),this.record.trend.change.push(r)}},{key:"monitor",value:function(t){if(t){var e=x()().format("HHmmss");this.record.monitor={time:e,price:t.price,change:t.change},this.record.name=t.name,this.record.code=t.code}return this.record.monitor}},{key:"buy",value:function(t){if(t){var e=x()().format("HHmmss");this.record.buy={time:e,price:t.price,change:t.change},this.record.name=t.name,this.record.code=t.code}return this.record.buy}},{key:"sell",value:function(t){if(t){var e=x()().format("HHmmss");this.record.sell={time:e,price:t.price,change:t.change},this.record.name=t.name,this.record.code=t.code}return this.record.sell}}]),t}(),At=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"records",{})}return Object(o["a"])(t,[{key:"record",value:function(){return new _t}},{key:"append",value:function(t){var e=t.record,r=x()().format("HHmmss");return this.records[r]=e,this.save()}},{key:"all",value:function(){return this.records}},{key:"get",value:function(t){return this.records[t]||{}}},{key:"set",value:function(t,e){var r=e.record;return this.records[t]=r,this.save()}},{key:"load",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x()().format("YYYY-MM-DD"),r=x()().day(),t.next=4,Ft.getItem("t0-"+r);case 4:return n=t.sent,n&&n.date===e&&(this.records=n),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x()().format("YYYY-MM-DD"),r=x()().day(),this.records.date=e,t.abrupt("return",Ft.setItem("t0-"+r,this.records));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Pt=function(){function t(){Object(s["a"])(this,t)}return Object(o["a"])(t,[{key:"_broadcast",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:e})),r=(window.parent||window).opener,r&&r.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:e}));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r,n,i){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._broadcast({name:"".concat(e," - L").concat(r),vtype:"v0",stock:n,trend:i,state:r});case 1:case"end":return t.stop()}}),t,this)})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"buy",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._broadcast({name:e,vtype:"v0",stock:r,tradetype:"buy"});try{Bt.buy(r.code,r.name)}catch(n){}case 2:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(i["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._broadcast({name:e,vtype:"v0",stock:r,tradetype:"sell"});try{Bt.sell(r.code,r.name)}catch(n){}case 2:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),Lt=new Pt,Vt={L1:"L1",L2:"L2",L3:"L3",L4:"L4",L5:"L5",L6:"L6"};function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=0,a=0,i=0;return t.forEach((function(t,s){i>=r||(1===e?(n+=+t,i++):(a+=+t,s%e===0&&(n+=+a/r,i++)))})),i<r&&(r=i),+(n/r).toFixed(2)}var Ht=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"sse",void 0),Object(c["a"])(this,"codes",[]),Object(c["a"])(this,"_stocks",{}),Object(c["a"])(this,"_trend",{})}return Object(o["a"])(t,[{key:"init",value:function(t){this.codes=t;var e=!0,r=!1,n=void 0;try{for(var a,i=this.codes[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;this._trend[s]={time:[],ma:[],price:[],change:[]}}}catch(o){r=!0,n=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}}},{key:"restart",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.sse=d["a"].sseStart(this.codes,{interval:1});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.init(e),this.restart(),y["a"].interval(Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",r.update());case 1:case"end":return t.stop()}}),t)}))),null,3),t.next=6,Object(w["a"])(3e4);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.warn("T0SSE start ",t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){this.sse&&this.sse.stop()}},{key:"stocks",value:function(){return this._stocks}},{key:"stock",value:function(t){return this._stocks[t]}},{key:"trends",value:function(){return this._trend}},{key:"trend",value:function(t){return this._trend[t]}},{key:"update",value:function(){console.log("@"),2===+this.sse.state()&&(console.warn("#T0# sse restart ...",this.sse.state()),this.restart()),this._stocks=this.sse.getStocks(this.codes);var t=x()().format("HHmmss");for(var e in this._stocks){var r=this._stocks[e];this._trend[e].time.unshift(t),this._trend[e].price.unshift(+r.price),this._trend[e].change.unshift(+r.change),this._trend[e].ma.unshift(this.ma(e)),this._trend[e].time=this._trend[e].time.slice(0,100),this._trend[e].price=this._trend[e].price.slice(0,100),this._trend[e].change=this._trend[e].change.slice(0,100),this._trend[e].ma=this._trend[e].ma.slice(0,100)}}},{key:"ma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Nt(this._trend[t].price,e,r)}}]),t}(),qt=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"key",""),Object(c["a"])(this,"sse",new Ht),Object(c["a"])(this,"hooks",Lt),Object(c["a"])(this,"current",void 0),Object(c["a"])(this,"isRunning",!1),Object(c["a"])(this,"isForceStop",!1),this.key=e}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.capture();case 3:return r=t.sent,t.next=6,this.sse.start(Object.keys(r));case 6:this.isRunning=!0;case 7:return console.log("#"),t.next=11,Object(w["a"])(1e3);case 11:if(!this.isForceStop){t.next=14;break}return console.log("T0Processor loop force stop ..."),t.abrupt("break",58);case 14:return t.prev=14,this.current=null,n=new _t(this.key),this.hooks.broadcast(this.key,Vt.L1),t.next=20,this.monitor();case 20:if(this.current=t.sent,this.current){t.next=23;break}return t.abrupt("continue",7);case 23:return n.monitor(this.current),console.log("T0Processor loop state L1 ... ",this.current),this.hooks.broadcast(this.key,Vt.L2,this.current,this.sse.trend(this.current.code)),t.next=28,this.analyseOfBuy(this.current);case 28:if(this.current=t.sent,this.current){t.next=31;break}return t.abrupt("continue",7);case 31:return n.buy(this.current),console.log("T0Processor loop state L2 ... ",this.current),this.hooks.broadcast(this.key,Vt.L3,this.current,this.sse.trend(this.current.code)),this.hooks.buy(this.current),console.log("T0Processor loop state L3 ... ",this.current),this.hooks.broadcast(this.key,Vt.L4,this.current,this.sse.trend(this.current.code)),t.next=39,this.analyseOfSell(this.current);case 39:return this.current=t.sent,n.sell(this.current),console.log("T0Processor loop state L4 ... ",this.current),this.hooks.broadcast(this.key,Vt.L5,this.current,this.sse.trend(this.current.code)),this.hooks.sell(this.current),console.log("T0Processor loop state L5 ... ",this.current),t.next=47,Object(w["a"])(5e3);case 47:this.hooks.broadcast(this.key,Vt.L6,this.current),i=this.sse.trend(this.current.code),n.trend(i),e.append(n),t.next=56;break;case 53:t.prev=53,t.t0=t["catch"](14),console.warn("T0Processor loop ",t.t0);case 56:t.next=7;break;case 58:this.isRunning=!1,t.next=64;break;case 61:t.prev=61,t.t1=t["catch"](0),console.warn("T0Processor loop ",t.t1);case 64:case"end":return t.stop()}}),t,this,[[0,61],[14,53]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isForceStop=!0,this.sse.stop(),t.abrupt("return",new Promise((function(t){setInterval((function(){e.isRunning||t()}),1e3)})));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"monitor",value:function(){var t=Object(i["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),Yt=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"code",void 0),Object(c["a"])(this,"details",[]),this.code=e}return Object(o["a"])(t,[{key:"market",value:function(t){var e=t.slice(0,2);return["00","30","12"].includes(e)?"0":["60","68","11"].includes(e)?"1":void 0}},{key:"url",value:function(t){var e=this.market(t),r="".concat(e,".").concat(t),n="http://push2.eastmoney.com/api/qt/stock/details/get?fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54,f55&pos=-10&secid=".concat(r);return n}},{key:"volume",value:function(){return this.details[0][2]}},{key:"ma",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var a,i=this.details[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;t.push(s[2])}}catch(o){r=!0,n=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}return Nt(t,1,5)}},{key:"isFire",value:function(){var t=0,e=0,r=!0,n=!1,a=void 0;try{for(var i,s=this.details[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value,c=o[4];if(2===+c?t++:t=0,e>5)break;e++}}catch(u){n=!0,a=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw a}}return t>=3}},{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.url(this.code),t.next=3,lt["a"].get(e,null,{dataType:"json"});case 3:for(r=t.sent,n=r.data.details,i=!0,s=!1,o=void 0,t.prev=8,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)h=u.value,l=h.split(","),this.details.unshift(l);t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](8),s=!0,o=t.t0;case 16:t.prev=16,t.prev=17,i||null==c["return"]||c["return"]();case 19:if(t.prev=19,!s){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:case"end":return t.stop()}}),t,this,[[8,12,16,24],[17,,19,23]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Kt=function(t){function e(){return Object(s["a"])(this,e),Object(V["a"])(this,Object(N["a"])(e).call(this,A["bb"].key))}return Object(H["a"])(e,t),Object(o["a"])(e,[{key:"capture",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u,h,l,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.prev=1,t.next=4,d["a"].captureList(A["cb"].key);case 4:r=t.sent,r&&(e=e.concat(r)),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:return t.prev=10,t.next=13,d["a"].captureList(A["e"].key);case 13:n=t.sent,n&&(e=e.concat(n)),t.next=19;break;case 17:t.prev=17,t.t1=t["catch"](10);case 19:i={},s=!0,o=!1,c=void 0,t.prev=23,u=e[Symbol.iterator]();case 25:if(s=(h=u.next()).done){t.next=38;break}return l=h.value,p=b["a"].stockOfBond(l.code),t.next=30,L.isValidStock(p,"");case 30:if(t.sent){t.next=32;break}return t.abrupt("continue",35);case 32:if(!(l.price<=0)){t.next=34;break}return t.abrupt("continue",35);case 34:i[l.code]=l;case 35:s=!0,t.next=25;break;case 38:t.next=44;break;case 40:t.prev=40,t.t2=t["catch"](23),o=!0,c=t.t2;case 44:t.prev=44,t.prev=45,s||null==u["return"]||u["return"]();case 47:if(t.prev=47,!o){t.next=50;break}throw c;case 50:return t.finish(47);case 51:return t.finish(44);case 52:return t.abrupt("return",i);case 53:case"end":return t.stop()}}),t,null,[[1,8],[10,17],[23,40,44,52],[45,,47,51]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"monitor",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.sse.trends(),r={};case 3:for(n in e)r[n]=0;t.t0=a.a.keys(e);case 6:if((t.t1=t.t0()).done){t.next=23;break}i=t.t1.value,s=this.sse.trend(i),o=0,c=[0,1,2,3,4];case 10:if(!(o<c.length)){t.next=21;break}if(u=c[o],+s.price[u]>+s.price[u+1]?r[i]++:r[i]=0,!(r[i]>=3)){t.next=18;break}if(console.log("T0ImpulseProcessor monitor step-1",i,"tick = "+r[i],"price = "+s.price[0],"ma = "+s.ma[0],"change = "+s.change[0]),!(+s.change[0]-+s.change[u]>.3)){t.next=18;break}return console.log("T0ImpulseProcessor monitor step-2",i,"change = "+(+s.change[0]-+s.change[u])),t.abrupt("return",this.sse.stock(i));case 18:o++,t.next=10;break;case 21:t.next=6;break;case 23:return t.next=25,Object(w["a"])(2e3);case 25:t.next=3;break;case 27:t.next=32;break;case 29:t.prev=29,t.t2=t["catch"](0),console.warn("T0ImpulseProcessor monitor ",t.t2);case 32:case"end":return t.stop()}}),t,this,[[0,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.code,t.prev=1,n=new Yt(r),t.next=5,n.capture();case 5:if(i=n.volume(),s=n.ma(),o=this.sse.stock(r),!(i>=s)){t.next=11;break}return console.log("T0ImpulseProcessor analyseOfBuy continue volmue",r,"volume = "+i,"ma = "+s),t.abrupt("return",o);case 11:if(!n.isFire()){t.next=14;break}return console.log("T0ImpulseProcessor analyseOfBuy fire volume",r,"volume = "+i),t.abrupt("return",o);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.warn("T0ImpulseProcessor analyseOfBuy ",t.t0);case 19:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(i["a"])(a.a.mark((function t(e){var r,n,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,t.prev=1;case 2:if(n=this.sse.stock(r),i=this.sse.ma(r),!(i>+n.price)){t.next=8;break}return console.log("T0ImpulseProcessor analyseOfSell ",r,"price < ma"),t.abrupt("return",n);case 8:return t.next=10,Object(w["a"])(1e3);case 10:t.next=2;break;case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t["catch"](1),console.warn("T0ImpulseProcessor analyseOfSell ",t.t0),t.abrupt("return",this.sse.stock(r));case 18:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(qt),Ut=function(){function t(){Object(s["a"])(this,t),Object(c["a"])(this,"records",new At),Object(c["a"])(this,"processors",[new Kt]),Object(c["a"])(this,"_isRunning",!1),Object(c["a"])(this,"opener",null)}return Object(o["a"])(t,[{key:"isRunning",value:function(){return this._isRunning}},{key:"start",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ft.isTradingDay();case 3:if(!t.sent){t.next=37;break}return t.next=6,this.records.load();case 6:return t.next=8,Bt.login();case 8:return t.next=10,Bt.liquidation();case 10:for(e=!0,r=!1,n=void 0,t.prev=13,i=this.processors[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){o=s.value;try{o.start(this.records)}catch(a){console.warn("T0Controller start ",a)}}t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](13),r=!0,n=t.t0;case 21:t.prev=21,t.prev=22,e||null==i["return"]||i["return"]();case 24:if(t.prev=24,!r){t.next=27;break}throw n;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return this._isRunning=!0,t.next=33,y["a"].until("144000");case 33:return t.next=35,this.stop();case 35:return t.next=37,Bt.liquidation();case 37:t.next=43;break;case 39:t.prev=39,t.t1=t["catch"](0),this._isRunning=!1,console.warn("T0Controller start ",t.t1);case 43:case"end":return t.stop()}}),t,this,[[0,39],[13,17,21,29],[22,,24,28]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){var t=Object(i["a"])(a.a.mark((function t(){var e,r,n,i,s,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=!0,r=!1,n=void 0,t.prev=3,i=this.processors[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){o=s.value;try{o.stop()}catch(a){console.warn("T0Controller stop ",a)}}t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](3),r=!0,n=t.t0;case 11:t.prev=11,t.prev=12,e||null==i["return"]||i["return"]();case 14:if(t.prev=14,!r){t.next=17;break}throw n;case 17:return t.finish(14);case 18:return t.finish(11);case 19:case"end":return t.stop()}}),t,this,[[3,7,11,19],[12,,14,18]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Wt=new Ut;window.__Walle_Stock_Loop=Tt,window.__Walle_Stock_Controller=ht,window.__Walle_Stock_Pool=g["a"],window.__Walle_Stock_Bond=et,window.__Walle_Stock_Flow=D,window.__Walle_Stock_Gene=M,window.__Walle_Stock_Crawler=d["a"],window.__Walle_Stock_Trader=Bt,window.__Walle_Stock_Strategy=It.a,window.__Walle_Stock_Define=A["mb"],window.__Walle_Stock_Market=ft,window.__Walle_Stock_Markets=b["a"],window.__Walle_Stock_Cron=y["a"],window.__Walle_Stock_Validator=L,window.__Walle_Stock_T0=Wt},"1ba9":function(t,e,r){function n(){}function a(t,e,r,n){n>=0?(t.day.up++,t.profit.max+=n,t.profit.max=+t.profit.max.toFixed(2)):t.day.down++,t.day.normal++,t.profit.normal+=n,t.profit.normal=+t.profit.normal.toFixed(2),t.profitrate.normal=+(t.profit.normal/t.day.normal).toFixed(2),t.winrate.normal=+(t.day.up/t.day.normal*100).toFixed(2),t["daily-open-ptcchange"].push(e,r),t["daily-close-ptcchange"].push(e,n);var a=t["daily-open-profit"].length,i=t["daily-close-profit"].length,s=t["daily-open-profit"][a-1]||0,o=t["daily-close-profit"][i-1]||0;s+=r,o+=n,s=+s.toFixed(2),o=+o.toFixed(2),t["daily-open-profit"].push(e,s),t["daily-close-profit"].push(e,o)}r("b680"),t.exports={init:n,process:a}},"21a6":function(t,e,r){(function(r){var n,a,i;(function(r,s){a=[],n=s,i="function"===typeof n?n.apply(e,a):n,void 0===i||(t.exports=i)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){o(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,r){var o=s.URL||s.webkitURL,c=document.createElement("a");e=e||t.name||"download",c.download=e,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):a(c.href)?n(t,e,r):i(c,c.target="_blank")):(c.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,s){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),r);else if(a(t))n(t,r,s);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){i(o)}))}}:function(t,e,r,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,r);var i="application/octet-stream"===t.type,o=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&o)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},u.readAsDataURL(t)}else{var h=s.URL||s.webkitURL,l=h.createObjectURL(t);a?a.location=l:location.href=l,a=null,setTimeout((function(){h.revokeObjectURL(l)}),4e4)}});s.saveAs=o.saveAs=o,t.exports=o}))}).call(this,r("c8ba"))},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),s=r("ad6d"),o="toString",c=RegExp.prototype,u=c[o],h=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=o;(h||l)&&n(RegExp.prototype,o,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?s.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},"29b1":function(t,e,r){r("b680");var n=r("870f"),a=20,i=0,s=0,o={};function c(){i=0,0,s=0,o={}}function u(t,e,r,i){var c=0;c=o.date?n.getPTCChange(o.open,o.close):n.getPTCChange(r,i),c>=a?s++:s=0,o={date:e,open:r,close:i}}function h(t,e,r,i){var o=n.getPTCChange(r,i);o>=a?s++:s=0}function l(t,e,r,a){var o=n.getPTCChange(r,a);s>=2&&(t.day.hot++,t.profit["hot"]=+(t.profit["hot"]+o).toFixed(2),t.profitrate["hot"]=+(t.profit["hot"]/t.day["hot"]).toFixed(2),o>0?i++:0,t.winrate["hot"]=+(i/t.day["hot"]*100).toFixed(2)),window?u(t,e,r,a):h(t,e,r,a)}t.exports={process:l,init:c}},"2c5c":function(t,e){var r={};function n(t,e,n){for(var a in r={},t){var i=t[a],s=+a+1+"";t[s]?n[a]>0&&n[s]>0?r[i]="+":n[a]<0&&n[s]<0?r[i]="-":r[i]="~":r[i]="~"}}function a(t,e,n){for(var a in r={},t){var i=t[a],s=+a+1+"",o=+a+2+"";t[s]&&t[o]?n[s]>0&&n[o]>0?r[i]="+":n[s]<0&&n[o]<0?r[i]="-":r[i]="~":r[i]="~"}}function i(t,e,r){window?n(t,e,r):a(t,e,r)}function s(t){return r[t]||"~"}t.exports={process:i,trend:s}},"32a9":function(t,e,r){r("b680");var n=r("870f"),a=r("2c5c"),i=0;function s(){i=0,0}function o(t,e,r,s){var o=n.getPTCChange(r,s),c=a.trend(e);"+"===c&&(t.day["up-trade"]++,t.profit["up-trade"]=+(t.profit["up-trade"]+o).toFixed(2),t.profitrate["up-trade"]=+(t.profit["up-trade"]/t.day["up-trade"]).toFixed(2),o>0?i++:0,t.winrate["up-trade"]=+(i/t.day["up-trade"]*100).toFixed(2))}t.exports={process:o,init:s}},"3f62":function(t,e,r){r("b680");var n=r("870f"),a=1,i=0;function s(){i=0,0,a=1}function o(t,e,r,s){var o=n.getPTCChange(r,s);a*=1+o/100*.1,t.profit["compound"]=1e3*(a-1),t.profit["compound"]=+t.profit["compound"].toFixed(2),t.day["compound"]++,t.profitrate["compound"]=+(t.profit["compound"]/t.day["compound"]).toFixed(2),o>0?i++:0,t.winrate["compound"]=+(i/t.day["compound"]*100).toFixed(2)}t.exports={process:o,init:s}},"466d":function(t,e,r){"use strict";var n=r("d784"),a=r("825a"),i=r("50c4"),s=r("1d80"),o=r("8aa5"),c=r("14c3");n("match",1,(function(t,e,r){return[function(e){var r=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var s=a(t),u=String(this);if(!s.global)return c(s,u);var h=s.unicode;s.lastIndex=0;var l,p=[],f=0;while(null!==(l=c(s,u))){var d=String(l[0]);p[f]=d,""===d&&(s.lastIndex=o(u,i(s.lastIndex),h)),f++}return 0===f?null:p}]}))},"4de4":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").filter,i=r("1dde"),s=r("ae40"),o=i("filter"),c=s("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"5ca6":function(t,e,r){r("a4d3"),r("e01a"),r("d28b"),r("caad"),r("d3b7"),r("2532"),r("3ca3"),r("ddb0");var n=r("a34a");r("96cf");var a=r("c973"),i=r("ce69"),s=i.generate,o=r("2c5c"),c=[r("1ba9"),r("870f"),r("71cc"),r("3f62"),r("29b1"),r("32a9"),r("c116")];function u(t,e){return h.apply(this,arguments)}function h(){return h=a(n.mark((function t(e,r){var a,i,u,h,l,p,f,d,v,b,y,g,m,w,k,x,O,S,j,T,E;return n.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=s(e),t.prev=1,r){t.next=4;break}return t.abrupt("return",a);case 4:for(i=r.date,u=r.open,h=r.close,e.includes("上证指数")&&o.process(i,u,h),l=!0,p=!1,f=void 0,t.prev=11,d=c[Symbol.iterator]();!(l=(v=d.next()).done);l=!0)b=v.value,b.init();t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](11),p=!0,f=t.t0;case 19:t.prev=19,t.prev=20,l||null==d["return"]||d["return"]();case 22:if(t.prev=22,!p){t.next=25;break}throw f;case 25:return t.finish(22);case 26:return t.finish(19);case 27:y=i.length,g=0;case 29:if(!(g<y)){t.next=55;break}for(m=i[g],w=u[g],k=h[g],x=!0,O=!1,S=void 0,t.prev=36,j=c[Symbol.iterator]();!(x=(T=j.next()).done);x=!0)E=T.value,E.process(a,m,w,k);t.next=44;break;case 40:t.prev=40,t.t1=t["catch"](36),O=!0,S=t.t1;case 44:t.prev=44,t.prev=45,x||null==j["return"]||j["return"]();case 47:if(t.prev=47,!O){t.next=50;break}throw S;case 50:return t.finish(47);case 51:return t.finish(44);case 52:g++,t.next=29;break;case 55:t.next=60;break;case 57:t.prev=57,t.t2=t["catch"](1),console.log("#strategy# analyse fail: ",t.t2);case 60:return t.abrupt("return",a);case 61:case"end":return t.stop()}}),t,null,[[1,57],[11,15,19,27],[20,,22,26],[36,40,44,52],[45,,47,51]])}))),h.apply(this,arguments)}t.exports={analyse:u}},"71cc":function(t,e,r){r("b680");var n=r("870f"),a=2,i=0,s=0,o=!1,c={};function u(){i=0,0,0,s=0,o=!1,c={}}function h(t){return o}function l(t,e,r,a){var i=0;i=c.date?n.getPTCChange(c.open,c.close):n.getPTCChange(r,a),i>=0?(s=0):(0,s++),c={date:e,open:r,close:a}}function p(t,e,r,a){var i=n.getPTCChange(r,a);i>=0?(s=0):(0,s++)}function f(t,e,r,c){var u=n.getPTCChange(r,c);s<a?(o=!1,t.day.trade++,t.profit.strategy+=u,t.profit.strategy=+t.profit.strategy.toFixed(2),t.profitrate["strategy"]=+(t.profit["strategy"]/t.day["trade"]).toFixed(2),u>0?i++:0,t.winrate["strategy"]=+(i/t.day["trade"]*100).toFixed(2)):(o=!0,t.day.rest++),window?l(t,e,r,c):p(t,e,r,c)}t.exports={isPeriodRest:h,process:f,init:u}},"720d":function(t,e,r){(function(t,r){r(e)})(0,(function(t){"use strict";var e="0123456789abcdefghijklmnopqrstuvwxyz";function r(t){return e.charAt(t)}function n(t,e){return t&e}function a(t,e){return t|e}function i(t,e){return t^e}function s(t,e){return t&~e}function o(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function c(t){var e=0;while(0!=t)t&=t-1,++e;return e}var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="=";function l(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=u.charAt(r>>6)+u.charAt(63&r);e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=u.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=u.charAt(r>>2)+u.charAt((3&r)<<4));while((3&n.length)>0)n+=h;return n}function p(t){var e,n="",a=0,i=0;for(e=0;e<t.length;++e){if(t.charAt(e)==h)break;var s=u.indexOf(t.charAt(e));s<0||(0==a?(n+=r(s>>2),i=3&s,a=1):1==a?(n+=r(i<<2|s>>4),i=15&s,a=2):2==a?(n+=r(i),n+=r(s>>2),i=3&s,a=3):(n+=r(i<<2|s>>4),n+=r(15&s),a=0))}return 1==a&&(n+=r(i<<2)),n}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var f,d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},d(t,e)};function v(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var b,y={decode:function(t){var e;if(void 0===f){var r="0123456789ABCDEF",n=" \f\n\r\t \u2028\u2029";for(f={},e=0;e<16;++e)f[r.charAt(e)]=e;for(r=r.toLowerCase(),e=10;e<16;++e)f[r.charAt(e)]=e;for(e=0;e<n.length;++e)f[n.charAt(e)]=-1}var a=[],i=0,s=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(o=f[o],-1!=o){if(void 0===o)throw new Error("Illegal character at offset "+e);i|=o,++s>=2?(a[a.length]=i,i=0,s=0):i<<=4}}if(s)throw new Error("Hex encoding incomplete: 4 bits missing");return a}},g={decode:function(t){var e;if(void 0===b){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="= \f\n\r\t \u2028\u2029";for(b=Object.create(null),e=0;e<64;++e)b[r.charAt(e)]=e;for(e=0;e<n.length;++e)b[n.charAt(e)]=-1}var a=[],i=0,s=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(o=b[o],-1!=o){if(void 0===o)throw new Error("Illegal character at offset "+e);i|=o,++s>=4?(a[a.length]=i>>16,a[a.length]=i>>8&255,a[a.length]=255&i,i=0,s=0):i<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:a[a.length]=i>>10;break;case 3:a[a.length]=i>>16,a[a.length]=i>>8&255;break}return a},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=g.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return g.decode(t)}},m=1e13,w=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var r,n,a=this.buf,i=a.length;for(r=0;r<i;++r)n=a[r]*t+e,n<m?e=0:(e=0|n/m,n-=e*m),a[r]=n;e>0&&(a[r]=e)},t.prototype.sub=function(t){var e,r,n=this.buf,a=n.length;for(e=0;e<a;++e)r=n[e]-t,r<0?(r+=m,t=1):t=0,n[e]=r;while(0===n[n.length-1])n.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,r=e[e.length-1].toString(),n=e.length-2;n>=0;--n)r+=(m+e[n]).toString().substring(1);return r},t.prototype.valueOf=function(){for(var t=this.buf,e=0,r=t.length-1;r>=0;--r)e=e*m+t[r];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),k="…",x=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,O=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function S(t,e){return t.length>e&&(t=t.substring(0,e)+k),t}var j,T=function(){function t(e,r){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=r)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"===typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,r){for(var n="",a=t;a<e;++a)if(n+=this.hexByte(this.get(a)),!0!==r)switch(15&a){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},t.prototype.isASCII=function(t,e){for(var r=t;r<e;++r){var n=this.get(r);if(n<32||n>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var r="",n=t;n<e;++n)r+=String.fromCharCode(this.get(n));return r},t.prototype.parseStringUTF=function(t,e){for(var r="",n=t;n<e;){var a=this.get(n++);r+=a<128?String.fromCharCode(a):a>191&&a<224?String.fromCharCode((31&a)<<6|63&this.get(n++)):String.fromCharCode((15&a)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},t.prototype.parseStringBMP=function(t,e){for(var r,n,a="",i=t;i<e;)r=this.get(i++),n=this.get(i++),a+=String.fromCharCode(r<<8|n);return a},t.prototype.parseTime=function(t,e,r){var n=this.parseStringISO(t,e),a=(r?x:O).exec(n);return a?(r&&(a[1]=+a[1],a[1]+=+a[1]<70?2e3:1900),n=a[1]+"-"+a[2]+"-"+a[3]+" "+a[4],a[5]&&(n+=":"+a[5],a[6]&&(n+=":"+a[6],a[7]&&(n+="."+a[7]))),a[8]&&(n+=" UTC","Z"!=a[8]&&(n+=a[8],a[9]&&(n+=":"+a[9]))),n):"Unrecognized time: "+n},t.prototype.parseInteger=function(t,e){var r,n=this.get(t),a=n>127,i=a?255:0,s="";while(n==i&&++t<e)n=this.get(t);if(r=e-t,0===r)return a?-1:0;if(r>4){s=n,r<<=3;while(0==(128&(+s^i)))s=+s<<1,--r;s="("+r+" bit)\n"}a&&(n-=256);for(var o=new w(n),c=t+1;c<e;++c)o.mulAdd(256,this.get(c));return s+o.toString()},t.prototype.parseBitString=function(t,e,r){for(var n=this.get(t),a=(e-t-1<<3)-n,i="("+a+" bit)\n",s="",o=t+1;o<e;++o){for(var c=this.get(o),u=o==e-1?n:0,h=7;h>=u;--h)s+=c>>h&1?"1":"0";if(s.length>r)return i+S(s,r)}return i+s},t.prototype.parseOctetString=function(t,e,r){if(this.isASCII(t,e))return S(this.parseStringISO(t,e),r);var n=e-t,a="("+n+" byte)\n";r/=2,n>r&&(e=t+r);for(var i=t;i<e;++i)a+=this.hexByte(this.get(i));return n>r&&(a+=k),a},t.prototype.parseOID=function(t,e,r){for(var n="",a=new w,i=0,s=t;s<e;++s){var o=this.get(s);if(a.mulAdd(128,127&o),i+=7,!(128&o)){if(""===n)if(a=a.simplify(),a instanceof w)a.sub(80),n="2."+a.toString();else{var c=a<80?a<40?0:1:2;n=c+"."+(a-40*c)}else n+="."+a.toString();if(n.length>r)return S(n,r);a=new w,i=0}}return i>0&&(n+=".incomplete"),n},t}(),E=function(){function t(t,e,r,n,a){if(!(n instanceof D))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=r,this.tag=n,this.sub=a}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+r,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);case 6:return this.stream.parseOID(e,e+r,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return S(this.stream.parseStringUTF(e,e+r),t);case 18:case 19:case 20:case 21:case 22:case 26:return S(this.stream.parseStringISO(e,e+r),t);case 30:return S(this.stream.parseStringBMP(e,e+r),t);case 23:case 24:return this.stream.parseTime(e,e+r,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var r=0,n=this.sub.length;r<n;++r)e+=this.sub[r].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),r=127&e;if(r==e)return r;if(r>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===r)return null;e=0;for(var n=0;n<r;++n)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,r=2*this.length;return t.substr(e,r)},t.decode=function(e){var r;r=e instanceof T?e:new T(e,0);var n=new T(r),a=new D(r),i=t.decodeLength(r),s=r.pos,o=s-n.pos,c=null,u=function(){var e=[];if(null!==i){var n=s+i;while(r.pos<n)e[e.length]=t.decode(r);if(r.pos!=n)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var a=t.decode(r);if(a.tag.isEOC())break;e[e.length]=a}i=s-r.pos}catch(o){throw new Error("Exception while decoding undefined length content: "+o)}return e};if(a.tagConstructed)c=u();else if(a.isUniversal()&&(3==a.tagNumber||4==a.tagNumber))try{if(3==a.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");c=u();for(var h=0;h<c.length;++h)if(c[h].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(l){c=null}if(null===c){if(null===i)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);r.pos=s+Math.abs(i)}return new t(n,o,i,a,c)},t}(),D=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!==(32&e),this.tagNumber=31&e,31==this.tagNumber){var r=new w;do{e=t.get(),r.mulAdd(128,127&e)}while(128&e);this.tagNumber=r.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),R=0xdeadbeefcafe,C=15715070==(16777215&R),B=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],M=(1<<26)/B[B.length-1],I=function(){function t(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,a=(1<<e)-1,i=!1,s="",o=this.t,c=this.DB-o*this.DB%e;if(o-- >0){c<this.DB&&(n=this[o]>>c)>0&&(i=!0,s=r(n));while(o>=0)c<e?(n=(this[o]&(1<<c)-1)<<e-c,n|=this[--o]>>(c+=this.DB-e)):(n=this[o]>>(c-=e)&a,c<=0&&(c+=this.DB,--o)),n>0&&(i=!0),i&&(s+=r(n))}return i?s:"0"},t.prototype.negate=function(){var e=L();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;while(--r>=0)if(0!=(e=this[r]-t[r]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Z(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var r=L();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r},t.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new _(e):new A(e),this.exp(t,r)},t.prototype.clone=function(){var t=L();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var r,n=this.DB-t*this.DB%8,a=0;if(t-- >0){n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[a++]=r|this.s<<this.DB-n);while(t>=0)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(e[a++]=r)}return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=L();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=L();return this.bitwiseTo(t,a,e),e},t.prototype.xor=function(t){var e=L();return this.bitwiseTo(t,i,e),e},t.prototype.andNot=function(t){var e=L();return this.bitwiseTo(t,s,e),e},t.prototype.not=function(){for(var t=L(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=L();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=L();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+o(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=c(this[r]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,a)},t.prototype.clearBit=function(t){return this.changeBit(t,s)},t.prototype.flipBit=function(t){return this.changeBit(t,i)},t.prototype.add=function(t){var e=L();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=L();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=L();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=L();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=L();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=L(),r=L();return this.divRemTo(t,e,r),[e,r]},t.prototype.modPow=function(t,e){var r,n,a=t.bitLength(),i=G(1);if(a<=0)return i;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new _(e):e.isEven()?new P(e):new A(e);var s=[],o=3,c=r-1,u=(1<<r)-1;if(s[1]=n.convert(this),r>1){var h=L();n.sqrTo(s[1],h);while(o<=u)s[o]=L(),n.mulTo(h,s[o-2],s[o]),o+=2}var l,p,f=t.t-1,d=!0,v=L();a=Z(t[f])-1;while(f>=0){a>=c?l=t[f]>>a-c&u:(l=(t[f]&(1<<a+1)-1)<<c-a,f>0&&(l|=t[f-1]>>this.DB+a-c)),o=r;while(0==(1&l))l>>=1,--o;if((a-=o)<0&&(a+=this.DB,--f),d)s[l].copyTo(i),d=!1;else{while(o>1)n.sqrTo(i,v),n.sqrTo(v,i),o-=2;o>0?n.sqrTo(i,v):(p=i,i=v,v=p),n.mulTo(v,s[l],i)}while(f>=0&&0==(t[f]&1<<a))n.sqrTo(i,v),p=i,i=v,v=p,--a<0&&(a=this.DB-1,--f)}return n.revert(i)},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;var n=e.clone(),a=this.clone(),i=G(1),s=G(0),o=G(0),c=G(1);while(0!=n.signum()){while(n.isEven())n.rShiftTo(1,n),r?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);while(a.isEven())a.rShiftTo(1,a),r?(o.isEven()&&c.isEven()||(o.addTo(this,o),c.subTo(e,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(a)>=0?(n.subTo(a,n),r&&i.subTo(o,i),s.subTo(c,s)):(a.subTo(n,a),r&&o.subTo(i,o),c.subTo(s,c))}return 0!=a.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},t.prototype.pow=function(t){return this.exp(t,new F)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var a=e.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return e;a<i&&(i=a),i>0&&(e.rShiftTo(i,e),r.rShiftTo(i,r));while(e.signum()>0)(a=e.getLowestSetBit())>0&&e.rShiftTo(a,e),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},t.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=B[B.length-1]){for(e=0;e<B.length;++e)if(r[0]==B[e])return!0;return!1}if(r.isEven())return!1;e=1;while(e<B.length){var n=B[e],a=e+1;while(a<B.length&&n<M)n*=B[a++];n=r.modInt(n);while(e<a)if(n%B[e++]==0)return!1}return r.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2}this.t=0,this.s=0;var a=e.length,i=!1,s=0;while(--a>=0){var o=8==n?255&+e[a]:z(e,a);o<0?"-"==e.charAt(a)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&+e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t},t.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var r=t%this.DB,n=this.DB-r,a=(1<<n)-1,i=Math.floor(t/this.DB),s=this.s<<r&this.DM,o=this.t-1;o>=0;--o)e[o+i+1]=this[o]>>n|s,s=(this[o]&a)<<r;for(o=i-1;o>=0;--o)e[o]=0;e[i]=s,e.t=this.t+i+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,a=this.DB-n,i=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&i)<<a,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&i)<<a),e.t=this.t-r,e.clamp()}},t.prototype.subTo=function(t,e){var r=0,n=0,a=Math.min(t.t,this.t);while(r<a)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n-=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},t.prototype.multiplyTo=function(e,r){var n=this.abs(),a=e.abs(),i=n.t;r.t=i+a.t;while(--i>=0)r[i]=0;for(i=0;i<a.t;++i)r[i+n.t]=n.am(0,a[i],r,i,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)},t.prototype.squareTo=function(t){var e=this.abs(),r=t.t=2*e.t;while(--r>=0)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,r,n){var a=e.abs();if(!(a.t<=0)){var i=this.abs();if(i.t<a.t)return null!=r&&r.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=L());var s=L(),o=this.s,c=e.s,u=this.DB-Z(a[a.t-1]);u>0?(a.lShiftTo(u,s),i.lShiftTo(u,n)):(a.copyTo(s),i.copyTo(n));var h=s.t,l=s[h-1];if(0!=l){var p=l*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),f=this.FV/p,d=(1<<this.F1)/p,v=1<<this.F2,b=n.t,y=b-h,g=null==r?L():r;s.dlShiftTo(y,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),t.ONE.dlShiftTo(h,g),g.subTo(s,s);while(s.t<h)s[s.t++]=0;while(--y>=0){var m=n[--b]==l?this.DM:Math.floor(n[b]*f+(n[b-1]+v)*d);if((n[b]+=s.am(0,m,n,y,0,h))<m){s.dlShiftTo(y,g),n.subTo(g,n);while(n[b]<--m)n.subTo(g,n)}}null!=r&&(n.drShiftTo(h,r),o!=c&&t.ZERO.subTo(r,r)),n.t=h,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&t.ZERO.subTo(n,n)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,r){if(e>4294967295||e<1)return t.ONE;var n=L(),a=L(),i=r.convert(this),s=Z(e)-1;i.copyTo(n);while(--s>=0)if(r.sqrTo(n,a),(e&1<<s)>0)r.mulTo(a,i,n);else{var o=n;n=a,a=o}return r.revert(n)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=G(r),a=L(),i=L(),s="";this.divRemTo(n,a,i);while(a.signum()>0)s=(r+i.intValue()).toString(t).substr(1)+s,a.divRemTo(n,a,i);return i.intValue().toString(t)+s},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),a=Math.pow(r,n),i=!1,s=0,o=0,c=0;c<e.length;++c){var u=z(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(o=r*o+u,++s>=n&&(this.dMultiply(a),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(r,s)),this.dAddOffset(o,0)),i&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,r,n){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(r))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this)}else{var i=[],s=7&e;i.length=1+(e>>3),r.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},t.prototype.bitwiseTo=function(t,e,r){var n,a,i=Math.min(t.t,this.t);for(n=0;n<i;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(a=t.s&this.DM,n=i;n<this.t;++n)r[n]=e(this[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<t.t;++n)r[n]=e(a,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},t.prototype.changeBit=function(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n},t.prototype.addTo=function(t,e){var r=0,n=0,a=Math.min(t.t,this.t);while(r<a)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n+=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,r){var n=Math.min(this.t+t.t,e);r.s=0,r.t=n;while(n>0)r[--n]=0;for(var a=r.t-this.t;n<a;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(a=Math.min(t.t,e);n<a;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()},t.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;r.s=0;while(--n>=0)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},t.prototype.millerRabin=function(e){var r=this.subtract(t.ONE),n=r.getLowestSetBit();if(n<=0)return!1;var a=r.shiftRight(n);e=e+1>>1,e>B.length&&(e=B.length);for(var i=L(),s=0;s<e;++s){i.fromInt(B[Math.floor(Math.random()*B.length)]);var o=i.modPow(a,this);if(0!=o.compareTo(t.ONE)&&0!=o.compareTo(r)){var c=1;while(c++<n&&0!=o.compareTo(r))if(o=o.modPowInt(2,this),0==o.compareTo(t.ONE))return!1;if(0!=o.compareTo(r))return!1}}return!0},t.prototype.square=function(){var t=L();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var r=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(r.compareTo(n)<0){var a=r;r=n,n=a}var i=r.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)e(r);else{i<s&&(s=i),s>0&&(r.rShiftTo(s,r),n.rShiftTo(s,n));var o=function(){(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),r.compareTo(n)>=0?(r.subTo(n,r),r.rShiftTo(1,r)):(n.subTo(r,n),n.rShiftTo(1,n)),r.signum()>0?setTimeout(o,0):(s>0&&n.lShiftTo(s,n),setTimeout((function(){e(n)}),0))};setTimeout(o,10)}},t.prototype.fromNumberAsync=function(e,r,n,i){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);var s=this,o=function(){s.dAddOffset(2,0),s.bitLength()>e&&s.subTo(t.ONE.shiftLeft(e-1),s),s.isProbablePrime(r)?setTimeout((function(){i()}),0):setTimeout(o,0)};setTimeout(o,0)}else{var c=[],u=7&e;c.length=1+(e>>3),r.nextBytes(c),u>0?c[0]&=(1<<u)-1:c[0]=0,this.fromString(c,256)}},t}(),F=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),_=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),A=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=L();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(I.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=L();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);while(t[r]>=t.DV)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),P=function(){function t(t){this.m=t,this.r2=L(),this.q3=L(),I.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=L();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function L(){return new I(null)}function V(t,e){return new I(t,e)}function N(t,e,r,n,a,i){while(--i>=0){var s=e*this[t++]+r[n]+a;a=Math.floor(s/67108864),r[n++]=67108863&s}return a}function H(t,e,r,n,a,i){var s=32767&e,o=e>>15;while(--i>=0){var c=32767&this[t],u=this[t++]>>15,h=o*c+u*s;c=s*c+((32767&h)<<15)+r[n]+(1073741823&a),a=(c>>>30)+(h>>>15)+o*u+(a>>>30),r[n++]=1073741823&c}return a}function q(t,e,r,n,a,i){var s=16383&e,o=e>>14;while(--i>=0){var c=16383&this[t],u=this[t++]>>14,h=o*c+u*s;c=s*c+((16383&h)<<14)+r[n]+a,a=(c>>28)+(h>>14)+o*u,r[n++]=268435455&c}return a}C&&"Microsoft Internet Explorer"==navigator.appName?(I.prototype.am=H,j=30):C&&"Netscape"!=navigator.appName?(I.prototype.am=N,j=26):(I.prototype.am=q,j=28),I.prototype.DB=j,I.prototype.DM=(1<<j)-1,I.prototype.DV=1<<j;var Y=52;I.prototype.FV=Math.pow(2,Y),I.prototype.F1=Y-j,I.prototype.F2=2*j-Y;var K,U,W=[];for(K="0".charCodeAt(0),U=0;U<=9;++U)W[K++]=U;for(K="a".charCodeAt(0),U=10;U<36;++U)W[K++]=U;for(K="A".charCodeAt(0),U=10;U<36;++U)W[K++]=U;function z(t,e){var r=W[t.charCodeAt(e)];return null==r?-1:r}function G(t){var e=L();return e.fromInt(t),e}function Z(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}I.ZERO=G(0),I.ONE=G(1);var $=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}();function X(){return new $}var J,Q,tt=256,et=null;if(null==et){et=[],Q=0;var rt=void 0;if(window.crypto&&window.crypto.getRandomValues){var nt=new Uint32Array(256);for(window.crypto.getRandomValues(nt),rt=0;rt<nt.length;++rt)et[Q++]=255&nt[rt]}var at=function(t){if(this.count=this.count||0,this.count>=256||Q>=tt)window.removeEventListener?window.removeEventListener("mousemove",at,!1):window.detachEvent&&window.detachEvent("onmousemove",at);else try{var e=t.x+t.y;et[Q++]=255&e,this.count+=1}catch(r){}};window.addEventListener?window.addEventListener("mousemove",at,!1):window.attachEvent&&window.attachEvent("onmousemove",at)}function it(){if(null==J){J=X();while(Q<tt){var t=Math.floor(65536*Math.random());et[Q++]=255&t}for(J.init(et),Q=0;Q<et.length;++Q)et[Q]=0;Q=0}return J.next()}var st=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=it()},t}();function ot(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var r=e-t.length-6,n="",a=0;a<r;a+=2)n+="ff";var i="0001"+n+"00"+t;return V(i,16)}function ct(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;var r=[],n=t.length-1;while(n>=0&&e>0){var a=t.charCodeAt(n--);a<128?r[--e]=a:a>127&&a<2048?(r[--e]=63&a|128,r[--e]=a>>6|192):(r[--e]=63&a|128,r[--e]=a>>6&63|128,r[--e]=a>>12|224)}r[--e]=0;var i=new st,s=[];while(e>2){s[0]=0;while(0==s[0])i.nextBytes(s);r[--e]=s[0]}return r[--e]=2,r[--e]=0,new I(r)}var ut=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);while(e.compareTo(r)<0)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=ct(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},t.prototype.setPrivate=function(t,e,r){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16),this.d=V(r,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,r,n,a,i,s,o){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16),this.d=V(r,16),this.p=V(n,16),this.q=V(a,16),this.dmp1=V(i,16),this.dmq1=V(s,16),this.coeff=V(o,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var r=new st,n=t>>1;this.e=parseInt(e,16);for(var a=new I(e,16);;){for(;;)if(this.p=new I(t-n,1,r),0==this.p.subtract(I.ONE).gcd(a).compareTo(I.ONE)&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new I(n,1,r),0==this.q.subtract(I.ONE).gcd(a).compareTo(I.ONE)&&this.q.isProbablePrime(10))break;if(this.p.compareTo(this.q)<=0){var i=this.p;this.p=this.q,this.q=i}var s=this.p.subtract(I.ONE),o=this.q.subtract(I.ONE),c=s.multiply(o);if(0==c.gcd(a).compareTo(I.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(c),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=V(t,16),r=this.doPrivate(e);return null==r?null:ht(r,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,r){var n=new st,a=t>>1;this.e=parseInt(e,16);var i=new I(e,16),s=this,o=function(){var e=function(){if(s.p.compareTo(s.q)<=0){var t=s.p;s.p=s.q,s.q=t}var e=s.p.subtract(I.ONE),n=s.q.subtract(I.ONE),a=e.multiply(n);0==a.gcd(i).compareTo(I.ONE)?(s.n=s.p.multiply(s.q),s.d=i.modInverse(a),s.dmp1=s.d.mod(e),s.dmq1=s.d.mod(n),s.coeff=s.q.modInverse(s.p),setTimeout((function(){r()}),0)):setTimeout(o,0)},c=function(){s.q=L(),s.q.fromNumberAsync(a,1,n,(function(){s.q.subtract(I.ONE).gcda(i,(function(t){0==t.compareTo(I.ONE)&&s.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(c,0)}))}))},u=function(){s.p=L(),s.p.fromNumberAsync(t-a,1,n,(function(){s.p.subtract(I.ONE).gcda(i,(function(t){0==t.compareTo(I.ONE)&&s.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(u,0)}))}))};setTimeout(u,0)};setTimeout(o,0)},t.prototype.sign=function(t,e,r){var n=pt(r),a=n+e(t).toString(),i=ot(a,this.n.bitLength()/4);if(null==i)return null;var s=this.doPrivate(i);if(null==s)return null;var o=s.toString(16);return 0==(1&o.length)?o:"0"+o},t.prototype.verify=function(t,e,r){var n=V(e,16),a=this.doPublic(n);if(null==a)return null;var i=a.toString(16).replace(/^1f+00/,""),s=ft(i);return s==r(t).toString()},t}();function ht(t,e){var r=t.toByteArray(),n=0;while(n<r.length&&0==r[n])++n;if(r.length-n!=e-1||2!=r[n])return null;++n;while(0!=r[n])if(++n>=r.length)return null;var a="";while(++n<r.length){var i=255&r[n];i<128?a+=String.fromCharCode(i):i>191&&i<224?(a+=String.fromCharCode((31&i)<<6|63&r[n+1]),++n):(a+=String.fromCharCode((15&i)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return a}var lt={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function pt(t){return lt[t]||""}function ft(t){for(var e in lt)if(lt.hasOwnProperty(e)){var r=lt[e],n=r.length;if(t.substr(0,n)==r)return t.substr(n)}return t}
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var dt={};dt.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var a;for(a in r)t.prototype[a]=r[a];var i=function(){},s=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(i=function(t,e){for(a=0;a<s.length;a+=1){var r=s[a],n=e[r];"function"===typeof n&&n!=Object.prototype[r]&&(t[r]=n)}})}catch(o){}i(t.prototype,r)}}};
/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */
var vt={};"undefined"!=typeof vt.asn1&&vt.asn1||(vt.asn1={}),vt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1),n=r.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var a="",i=0;i<n;i++)a+="f";var s=new I(a,16),o=s.xor(t).add(I.ONE);e=o.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=vt,r=e.asn1,n=r.DERBoolean,a=r.DERInteger,i=r.DERBitString,s=r.DEROctetString,o=r.DERNull,c=r.DERObjectIdentifier,u=r.DEREnumerated,h=r.DERUTF8String,l=r.DERNumericString,p=r.DERPrintableString,f=r.DERTeletexString,d=r.DERIA5String,v=r.DERUTCTime,b=r.DERGeneralizedTime,y=r.DERSequence,g=r.DERSet,m=r.DERTaggedObject,w=r.ASN1Util.newObject,k=Object.keys(t);if(1!=k.length)throw"key of param shall be only one.";var x=k[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+x+":"))throw"undefined key: "+x;if("bool"==x)return new n(t[x]);if("int"==x)return new a(t[x]);if("bitstr"==x)return new i(t[x]);if("octstr"==x)return new s(t[x]);if("null"==x)return new o(t[x]);if("oid"==x)return new c(t[x]);if("enum"==x)return new u(t[x]);if("utf8str"==x)return new h(t[x]);if("numstr"==x)return new l(t[x]);if("prnstr"==x)return new p(t[x]);if("telstr"==x)return new f(t[x]);if("ia5str"==x)return new d(t[x]);if("utctime"==x)return new v(t[x]);if("gentime"==x)return new b(t[x]);if("seq"==x){for(var O=t[x],S=[],j=0;j<O.length;j++){var T=w(O[j]);S.push(T)}return new y({array:S})}if("set"==x){for(O=t[x],S=[],j=0;j<O.length;j++){T=w(O[j]);S.push(T)}return new g({array:S})}if("tag"==x){var E=t[x];if("[object Array]"===Object.prototype.toString.call(E)&&3==E.length){var D=w(E[2]);return new m({tag:E[0],explicit:E[1],obj:D})}var R={};if(void 0!==E.explicit&&(R.explicit=E.explicit),void 0!==E.tag&&(R.tag=E.tag),void 0===E.obj)throw"obj shall be specified for 'tag'.";return R.obj=w(E.obj),new m(R)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.getEncodedHex()}},vt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=Math.floor(r/40),a=r%40,i=(e=n+"."+a,""),s=2;s<t.length;s+=2){var o=parseInt(t.substr(s,2),16),c=("00000000"+o.toString(2)).slice(-8);if(i+=c.substr(1,7),"0"==c.substr(0,1)){var u=new I(i,2);e=e+"."+u.toString(10),i=""}}return e},vt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new I(t,10),a=n.toString(2),i=7-a.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";a=s+a;for(o=0;o<a.length-1;o+=7){var c=a.substr(o,7);o!=a.length-7&&(c="1"+c),r+=e(parseInt(c,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",a=t.split("."),i=40*parseInt(a[0])+parseInt(a[1]);n+=e(i),a.splice(0,2);for(var s=0;s<a.length;s++)n+=r(a[s]);return n},vt.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,r=e.toString(16);if(r.length%2==1&&(r="0"+r),e<128)return r;var n=r.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var a=128+n;return a.toString(16)+r},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},vt.asn1.DERAbstractString=function(t){vt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t?this.setString(t):"undefined"!=typeof t["str"]?this.setString(t["str"]):"undefined"!=typeof t["hex"]&&this.setStringHex(t["hex"]))},dt.lang.extend(vt.asn1.DERAbstractString,vt.asn1.ASN1Object),vt.asn1.DERAbstractTime=function(t){vt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e,r){var n=this.zeroPadding,a=this.localDateToUTC(t),i=String(a.getFullYear());"utc"==e&&(i=i.substr(2,2));var s=n(String(a.getMonth()+1),2),o=n(String(a.getDate()),2),c=n(String(a.getHours()),2),u=n(String(a.getMinutes()),2),h=n(String(a.getSeconds()),2),l=i+s+o+c+u+h;if(!0===r){var p=a.getMilliseconds();if(0!=p){var f=n(String(p),3);f=f.replace(/[0]+$/,""),l=l+"."+f}}return l+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,r,n,a,i){var s=new Date(Date.UTC(t,e-1,r,n,a,i,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},dt.lang.extend(vt.asn1.DERAbstractTime,vt.asn1.ASN1Object),vt.asn1.DERAbstractStructured=function(t){vt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t["array"]&&(this.asn1Array=t["array"])},dt.lang.extend(vt.asn1.DERAbstractStructured,vt.asn1.ASN1Object),vt.asn1.DERBoolean=function(){vt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},dt.lang.extend(vt.asn1.DERBoolean,vt.asn1.ASN1Object),vt.asn1.DERInteger=function(t){vt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=vt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new I(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["bigint"]?this.setByBigInteger(t["bigint"]):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t["hex"]&&this.setValueHex(t["hex"]))},dt.lang.extend(vt.asn1.DERInteger,vt.asn1.ASN1Object),vt.asn1.DERBitString=function(t){if(void 0!==t&&"undefined"!==typeof t.obj){var e=vt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}vt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var a=t.substr(r,8),i=parseInt(a,2).toString(16);1==i.length&&(i="0"+i),n+=i}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):"undefined"!=typeof t["hex"]?this.setHexValueIncludingUnusedBits(t["hex"]):"undefined"!=typeof t["bin"]?this.setByBinaryString(t["bin"]):"undefined"!=typeof t["array"]&&this.setByBooleanArray(t["array"]))},dt.lang.extend(vt.asn1.DERBitString,vt.asn1.ASN1Object),vt.asn1.DEROctetString=function(t){if(void 0!==t&&"undefined"!==typeof t.obj){var e=vt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}vt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},dt.lang.extend(vt.asn1.DEROctetString,vt.asn1.DERAbstractString),vt.asn1.DERNull=function(){vt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},dt.lang.extend(vt.asn1.DERNull,vt.asn1.ASN1Object),vt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new I(t,10),a=n.toString(2),i=7-a.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";a=s+a;for(o=0;o<a.length-1;o+=7){var c=a.substr(o,7);o!=a.length-7&&(c="1"+c),r+=e(parseInt(c,2))}return r};vt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",a=t.split("."),i=40*parseInt(a[0])+parseInt(a[1]);n+=e(i),a.splice(0,2);for(var s=0;s<a.length;s++)n+=r(a[s]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(t){var e=vt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"===typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},dt.lang.extend(vt.asn1.DERObjectIdentifier,vt.asn1.ASN1Object),vt.asn1.DEREnumerated=function(t){vt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=vt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new I(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t["hex"]&&this.setValueHex(t["hex"]))},dt.lang.extend(vt.asn1.DEREnumerated,vt.asn1.ASN1Object),vt.asn1.DERUTF8String=function(t){vt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},dt.lang.extend(vt.asn1.DERUTF8String,vt.asn1.DERAbstractString),vt.asn1.DERNumericString=function(t){vt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},dt.lang.extend(vt.asn1.DERNumericString,vt.asn1.DERAbstractString),vt.asn1.DERPrintableString=function(t){vt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},dt.lang.extend(vt.asn1.DERPrintableString,vt.asn1.DERAbstractString),vt.asn1.DERTeletexString=function(t){vt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},dt.lang.extend(vt.asn1.DERTeletexString,vt.asn1.DERAbstractString),vt.asn1.DERIA5String=function(t){vt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},dt.lang.extend(vt.asn1.DERIA5String,vt.asn1.DERAbstractString),vt.asn1.DERUTCTime=function(t){vt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return"undefined"==typeof this.date&&"undefined"==typeof this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},dt.lang.extend(vt.asn1.DERUTCTime,vt.asn1.DERAbstractTime),vt.asn1.DERGeneralizedTime=function(t){vt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},dt.lang.extend(vt.asn1.DERGeneralizedTime,vt.asn1.DERAbstractTime),vt.asn1.DERSequence=function(t){vt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t+=r.getEncodedHex()}return this.hV=t,this.hV}},dt.lang.extend(vt.asn1.DERSequence,vt.asn1.DERAbstractStructured),vt.asn1.DERSet=function(t){vt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},dt.lang.extend(vt.asn1.DERSet,vt.asn1.DERAbstractStructured),vt.asn1.DERTaggedObject=function(t){vt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["tag"]&&(this.hT=t["tag"]),"undefined"!=typeof t["explicit"]&&(this.isExplicit=t["explicit"]),"undefined"!=typeof t["obj"]&&(this.asn1Object=t["obj"],this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},dt.lang.extend(vt.asn1.DERTaggedObject,vt.asn1.ASN1Object);var bt=function(t){function e(r){var n=t.call(this)||this;return r&&("string"===typeof r?n.parseKey(r):(e.hasPrivateKeyProperty(r)||e.hasPublicKeyProperty(r))&&n.parsePropertiesFrom(r)),n}return v(e,t),e.prototype.parseKey=function(t){try{var e=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,a=n.test(t)?y.decode(t):g.unarmor(t),i=E.decode(a);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=V(e,16),r=i.sub[2].getHexStringValue(),this.e=parseInt(r,16);var s=i.sub[3].getHexStringValue();this.d=V(s,16);var o=i.sub[4].getHexStringValue();this.p=V(o,16);var c=i.sub[5].getHexStringValue();this.q=V(c,16);var u=i.sub[6].getHexStringValue();this.dmp1=V(u,16);var h=i.sub[7].getHexStringValue();this.dmq1=V(h,16);var l=i.sub[8].getHexStringValue();this.coeff=V(l,16)}else{if(2!==i.sub.length)return!1;var p=i.sub[1],f=p.sub[0];e=f.sub[0].getHexStringValue(),this.n=V(e,16),r=f.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(d){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new vt.asn1.DERInteger({int:0}),new vt.asn1.DERInteger({bigint:this.n}),new vt.asn1.DERInteger({int:this.e}),new vt.asn1.DERInteger({bigint:this.d}),new vt.asn1.DERInteger({bigint:this.p}),new vt.asn1.DERInteger({bigint:this.q}),new vt.asn1.DERInteger({bigint:this.dmp1}),new vt.asn1.DERInteger({bigint:this.dmq1}),new vt.asn1.DERInteger({bigint:this.coeff})]},e=new vt.asn1.DERSequence(t);return e.getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new vt.asn1.DERSequence({array:[new vt.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new vt.asn1.DERNull]}),e=new vt.asn1.DERSequence({array:[new vt.asn1.DERInteger({bigint:this.n}),new vt.asn1.DERInteger({int:this.e})]}),r=new vt.asn1.DERBitString({hex:"00"+e.getEncodedHex()}),n=new vt.asn1.DERSequence({array:[t,r]});return n.getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(e=e||64,!t)return t;var r="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(r,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----",t},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----",t},e.hasPublicKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(ut),yt=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new bt(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(p(t))}catch(e){return!1}},t.prototype.encrypt=function(t){try{return l(this.getKey().encrypt(t))}catch(e){return!1}},t.prototype.sign=function(t,e,r){try{return l(this.getKey().sign(t,e,r))}catch(n){return!1}},t.prototype.verify=function(t,e,r){try{return this.getKey().verify(t,p(e),r)}catch(n){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new bt,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version="3.0.0-rc.1",t}();window.JSEncrypt=yt,t.JSEncrypt=yt,t.default=yt,Object.defineProperty(t,"__esModule",{value:!0})}))},"870f":function(t,e,r){r("b680");var n=-10;function a(){}function i(t,e){return t<n?t:e<n?n:e}function s(t,e,r,a){var i=0;return r<n?(i=r,t.day["open-crash"]++,t.profit["open-crash"]+=i,t.profit["open-crash"]=+t.profit["open-crash"].toFixed(2),a>0&&(t.day["reverse-crash"]++,t.profit["reverse-crash"]+=a+-n,t.profit["reverse-crash"]=+t.profit["reverse-crash"].toFixed(2))):a<n?(i=n,t.day["stop-crash"]++,t.profit["stop-crash"]+=a+-n,t.profit["stop-crash"]=+t.profit["stop-crash"].toFixed(2)):i=a,i}t.exports={init:a,process:s,getPTCChange:i}},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),i=r("94ca"),s=r("6eeb"),o=r("5135"),c=r("c6b6"),u=r("7156"),h=r("c04e"),l=r("d039"),p=r("7c73"),f=r("241c").f,d=r("06cf").f,v=r("9bf2").f,b=r("58a8").trim,y="Number",g=a[y],m=g.prototype,w=c(p(m))==y,k=function(t){var e,r,n,a,i,s,o,c,u=h(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+u}for(i=u.slice(2),s=i.length,o=0;o<s;o++)if(c=i.charCodeAt(o),c<48||c>a)return NaN;return parseInt(i,n)}return+u};if(i(y,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,O=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof O&&(w?l((function(){m.valueOf.call(r)})):c(r)!=y)?u(new g(k(e)),r,O):k(e)},S=n?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;S.length>j;j++)o(g,x=S[j])&&!o(O,x)&&v(O,x,d(g,x));O.prototype=m,m.constructor=O,s(a,y,O)}},c116:function(t,e,r){r("b680");var n=r("870f"),a=r("2c5c"),i=0;function s(){i=0,0}function o(t,e,r,s){var o=n.getPTCChange(r,s),c=a.trend(e);"-"===c&&(t.day["down-trade"]++,t.profit["down-trade"]=+(t.profit["down-trade"]+o).toFixed(2),t.profitrate["down-trade"]=+(t.profit["down-trade"]/t.day["down-trade"]).toFixed(2),o>0?i++:0,t.winrate["down-trade"]=+(i/t.day["down-trade"]*100).toFixed(2))}t.exports={process:o,init:s}},c973:function(t,e){function r(t,e,r,n,a,i,s){try{var o=t[i](s),c=o.value}catch(u){return void r(u)}o.done?e(c):Promise.resolve(c).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function o(t){r(s,a,i,o,c,"next",t)}function c(t){r(s,a,i,o,c,"throw",t)}o(void 0)}))}}t.exports=n},ce69:function(t,e){function r(t){return{name:t,profit:{max:0,"open-crash":-0,"stop-crash":0,"reverse-crash":0,normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},day:{normal:0,up:0,down:0,"open-crash":0,"stop-crash":0,"reverse-crash":0,trade:0,rest:0,compound:0,hot:0,"up-trade":0,"down-trade":0},profitrate:{normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},winrate:{normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},"daily-open-profit":[],"daily-close-profit":[],"daily-open-ptcchange":[],"daily-close-ptcchange":[]}}t.exports={generate:r}}}]);