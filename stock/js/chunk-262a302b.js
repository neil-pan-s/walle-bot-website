(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-262a302b"],{"032a":function(t,e,n){n("caad"),n("ac1f"),n("2532"),n("5319"),console.log("Walle Stock Bot[".concat(20200525131254,"] Works ...")),function(){if(window.__Walle_Bot)throw console.log("Walle-stock-bot already works, don't start another one ..."),toastr.error("Walle-stock-bot already works, don't start another one ...","Walle"),new Error("exit walle-bot script");window.__Walle_Devtools||window.location.replace("about:blank");var t=parent.location.hash.includes("8888")||location.hash.includes("8888");t||(window.console.log=function(){},window.parent&&(window.parent.console.log=function(){}))}(),window.__Walle_Bot=!0,window.__Walle_Devtools=window.__Walle_Devtools||window.parent.__Walle_Devtools},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"0cae":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("b0c0");var a=n("d4ec"),r=n("ade3"),i=function t(e){var n=e.code,i=e.name,c=e.price,o=e.change,s=e.rate,u=e.turnover,f=e.qrr,l=e.inflow,p=e.outflow,d=e.netinflow,h=e.volume,v=e.amount,k=e.open,m=e.prevclose,b=e.roe,y=e.eps,w=e.bvps,g=e.hot,O=e.block;Object(a["a"])(this,t),Object(r["a"])(this,"code","000000"),Object(r["a"])(this,"name",void 0),Object(r["a"])(this,"price",void 0),Object(r["a"])(this,"change",void 0),Object(r["a"])(this,"rate",void 0),Object(r["a"])(this,"open",void 0),Object(r["a"])(this,"prevclose",void 0),Object(r["a"])(this,"turnover",void 0),Object(r["a"])(this,"qrr",void 0),Object(r["a"])(this,"volume",void 0),Object(r["a"])(this,"amount",void 0),Object(r["a"])(this,"inflow",void 0),Object(r["a"])(this,"outflow",void 0),Object(r["a"])(this,"netinflow",void 0),Object(r["a"])(this,"roe",void 0),Object(r["a"])(this,"eps",void 0),Object(r["a"])(this,"bvps",void 0),Object(r["a"])(this,"hot",void 0),Object(r["a"])(this,"block",void 0),this.code=n,this.name=i,this.price=+c,this.change=+o,this.rate=+s,this.open=+k,this.prevclose=+m,this.turnover=+u,this.qrr=+f,this.inflow=+l,this.outflow=+p,this.netinflow=+d,this.volume=+h,this.amount=+v,this.roe=+b,this.eps=+y,this.bvps=+w,this.hot=g,this.block=O}},"0d03":function(t,e,n){var a=n("6eeb"),r=Date.prototype,i="Invalid Date",c="toString",o=r[c],s=r.getTime;new Date(NaN)+""!=i&&a(r,c,(function(){var t=s.call(this);return t===t?o.call(this):i}))},"127d":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7"),n("4795");var a=function(t){return new Promise((function(e){setTimeout(e,t)}))}},1797:function(t,e,n){"use strict";n("caad"),n("2532");var a=n("a34a"),r=n.n(a),i=(n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),s=n("ade3"),u=n("a002"),f=n.n(u),l=f.a.createInstance({driver:f.a.LOCALSTORAGE}),p=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c["a"])(this,t),Object(s["a"])(this,"key",void 0),Object(s["a"])(this,"data",{}),Object(s["a"])(this,"initValue",void 0),Object(s["a"])(this,"forceOverride",!1),this.key=e,this.initValue=n,this.forceOverride=a}return Object(o["a"])(t,[{key:"proxy",value:function(){var t=this,e=function(){return t.load()},n=function(){return t.update()},a=!0,r={set:function(e,n,a){return t.data[n]=a,t.save(),!0},get:function(r,i){return"load"===i&&a?(a=!1,e):"update"===i?n:t.data[i]}};return new Proxy({},r)}},{key:"load",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.forceOverride){t.next=3;break}return t.next=3,l.setItem(this.key,this.initValue);case 3:return t.next=5,l.getItem(this.key);case 5:return e=t.sent,this.data=e||this.initValue,t.abrupt("return",this.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){return this.save()}},{key:"save",value:function(){return l.setItem(this.key,this.data)}}]),t}(),d={captures:[{capture:"09:40",trace:["14:40"]},{capture:"14:30",trace:["14:40"]}],intervals:[{capture:"interval",trace:["14:40"],interval:180}],temps:[],validators:[{name:"v0",capture:["base"],interval:["base"],rule:{base:{},fundamental:{eps:">=0.2",bvps:">=2.5",roe:">5.0"},"pre-trace":{change:">-0.3",rate:">-0.3"},gene:{}}},{name:"v1",capture:["base"],interval:["base"],rule:{base:{change:">=3.0",rate:">0"},fundamental:{eps:">=0.2",bvps:">=2.5",roe:">5.0"},gene:{}}},{name:"v2",capture:["base"],interval:["base"],rule:{base:{change:">=3.0",rate:">=5.0"},fundamental:{eps:">=0.2",bvps:">=2.5",roe:">5.0"},gene:{}}},{name:"v3",capture:["base"],interval:["base"],rule:{base:{change:">=3.0",rate:">=10.0"},fundamental:{eps:">=0.2",bvps:">=2.5",roe:">5.0"},gene:{}}},{name:"v4",capture:["base"],interval:["base"],rule:{base:{change:">=3.0",rate:">=15.0"},fundamental:{eps:">=0.2",bvps:">=2.5",roe:">5.0"},gene:{}}}],trader:{status:"off",stock:{amount:2e4,unit:100},bond:{amount:1e4,unit:10}}},h=parent.location.hash||location.hash,v=h.includes("9527");e["a"]=new p("__Walle_Stock_Bot_Config",d,v).proxy()},"1d50":function(t,e,n){"use strict";n.r(e);n("d3b7");var a=n("a34a"),r=n.n(a),i=(n("96cf"),n("1da1")),c=n("1157"),o=n.n(c);window.$=o.a,window.jQuery=o.a;o.a,n("dd2e"),n("32d2"),n("032a");var s=n("a002"),u=n.n(s),f=n("1797"),l=n("1e4d");function p(){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].load();case 2:return t.next=4,l["a"].load();case 4:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function h(){window.dispatchEvent(new CustomEvent("__Walle_Bootstrap_Ready_Event"))}u.a.config({driver:u.a.LOCALSTORAGE}),Object(i["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.next=4,n.e("chunk-38947f90").then(n.bind(null,"0ae6"));case 4:t.next=7;break;case 7:return t.next=9,h();case 9:case"end":return t.stop()}}),t)})))()},"1e4d":function(t,e,n){"use strict";n("99af"),n("a630"),n("caad"),n("b64b"),n("d3b7"),n("6062"),n("2532"),n("3ca3"),n("ddb0");var a=n("a34a"),r=n.n(a),i=(n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),s=n("ade3"),u=n("a002"),f=n.n(u),l=n("90d5"),p="__Walle_Stock_Bot_Whitelist",d=function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"markets",{}),Object(s["a"])(this,"_stocks",[]),Object(s["a"])(this,"_bonds",[]),Object(s["a"])(this,"_bondOfStockMap",{}),Object(s["a"])(this,"_stockOfBondMap",{}),Object(s["a"])(this,"_futures",[]),Object(s["a"])(this,"_whitelist",[])}return Object(o["a"])(t,[{key:"load",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=parent.location.hash||location.hash,n=e.includes("9528"),!n){t.next=10;break}return t.next=6,l["a"].captureWhitelist();case 6:return this.markets=t.sent,t.next=9,this.save();case 9:return t.abrupt("return");case 10:return t.next=12,this.read();case 12:if(a=t.sent,!a){t.next=16;break}return t.next=16,this.update();case 16:this.createStocks(),this.createBonds(),this.createFutures(),this.createWhitelist(),console.info("#Whitelist# load markets-stocks ".concat(this._stocks.length," bonds-stocks ").concat(this._bonds.length," whitelist-stocks ").concat(this._whitelist.length," ... ")),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),console.warn("#Whitelist# load fail ",t.t0);case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].captureWhitelist(["all","bond"]);case 2:e=t.sent,e["all"]&&e["all"].length&&(this.markets["all"]=e["all"]),e["bond"]&&Object.keys(e["bond"]).length&&(this.markets["bond"]=e["bond"]),this.save();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"read",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.a.getItem(p);case 2:if(e=t.sent,e){t.next=6;break}return console.log("#Whitelist# markets not exist!"),t.abrupt("return");case 6:return this.markets=e,t.abrupt("return",this.markets);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.a.setItem(p,this.markets));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createWhitelist",value:function(){var t=[];for(var e in this.markets)"all"!==e&&"bond"!==e&&"future"!==e&&(t=t.concat(this.markets[e]));this._whitelist=Array.from(new Set(t))}},{key:"createBonds",value:function(){for(var t in this._bonds=Object.keys(this.markets["bond"]),this.markets["bond"]){var e=this.markets["bond"][t];this._stockOfBondMap[t]=e,this._bondOfStockMap[e]=t}}},{key:"createStocks",value:function(){this._stocks=this.markets["all"]}},{key:"createFutures",value:function(){this._futures=this.markets["futures"]}},{key:"whitelist",value:function(){return this._whitelist}},{key:"bonds",value:function(){return this._bonds}},{key:"futures",value:function(){return this._futures}},{key:"stocks",value:function(){return this._stocks}},{key:"stocksOfBonds",value:function(){return Object.keys(this._bondOfStockMap)}},{key:"bondOfStock",value:function(t){return this._bondOfStockMap[t]}},{key:"stockOfBond",value:function(t){return this._stockOfBondMap[t]}}]),t}();e["a"]=new d},"257e":function(t,e,n){"use strict";function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return a}))},"262e":function(t,e,n){"use strict";function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}n.d(e,"a",(function(){return r}))},2894:function(t,e,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("a630"),n("caad"),n("fb6a"),n("4e82"),n("b64b"),n("d3b7"),n("6062"),n("2532"),n("3ca3"),n("ddb0");var a=n("a34a"),r=n.n(a),i=n("2909"),c=(n("96cf"),n("1da1")),o=n("d4ec"),s=n("bee2"),u=n("ade3"),f=n("9313"),l=n("1e4d"),p=n("90d5"),d=n("c1df"),h=n.n(d),v=500,k="1.000001",m=function(){function t(){Object(o["a"])(this,t),Object(u["a"])(this,"crawlers",[]),Object(u["a"])(this,"codes",[]),Object(u["a"])(this,"isRunning",!1)}return Object(s["a"])(t,[{key:"start",value:function(t){var e=this;return Object(c["a"])(r.a.mark((function n(){var a,c,o,s,u;return r.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,f["a"].isWeekend()){n.next=10;break}if(a=+h()().format("HHmmss"),!(a>=15e4)){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,f["a"].until("093000");case 8:n.next=11;break;case 10:return n.abrupt("return");case 11:if(e.crawlers.length){n.next=20;break}if(e.codes=t?Array.from(new Set(t)):[].concat(Object(i["a"])(l["a"].stocks()),Object(i["a"])(l["a"].bonds())),e.codes.length){n.next=15;break}return n.abrupt("return");case 15:for(e.codes.unshift(k,"399001"),c=Math.ceil(e.codes.length/v),o=0;o<c;o++)s=e.codes.slice(o*v,(o+1)*v),u=p["a"].sseStart(s),e.crawlers.push(u);e.keepAlive(),e.isRunning=!0;case 20:return n.next=23,f["a"].until("150000");case 23:console.log("#Pool# auto stop ..."),e.stop();case 25:n.next=30;break;case 27:n.prev=27,n.t0=n["catch"](0),console.warn("#Pool# start exception: ",n.t0);case 30:case"end":return n.stop()}}),n,null,[[0,27]])})))(),this}},{key:"stop",value:function(){var t=!0,e=!1,n=void 0;try{for(var a,r=this.crawlers[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;i.stop()}}catch(c){e=!0,n=c}finally{try{t||null==r["return"]||r["return"]()}finally{if(e)throw n}}}},{key:"keepAlive",value:function(){var t=this;f["a"].interval((function(){for(var e in t.crawlers){var n=t.crawlers[e];n.isAlive()||(console.warn("#Pool# crawler[".concat(e,"] restart ...")),n.start())}}),null,60)}},{key:"has",value:function(t){if(!this.isRunning)return!1;var e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var c=r.value;if(!this.codes.includes(c))return!1}}catch(o){n=!0,a=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw a}}return!0}},{key:"market",value:function(){return this.isRunning?this.crawlers[0].getStock(k):{}}},{key:"check",value:function(t,e){var n=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;if(!e[o])return console.warn("#Pool# check miss ".concat(o," ...")),!1}}catch(s){a=!0,r=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw r}}return!0}},{key:"bonds",value:function(t){return t=t||l["a"].bonds(),this.stocks(t)}},{key:"stocks",value:function(t){if(!this.isRunning)return{};t=t||l["a"].stocks();var e={},n=!0,a=!1,r=void 0;try{for(var i,c=this.crawlers[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,s=o.getStocks(t);Object.assign(e,s)}}catch(u){a=!0,r=u}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw r}}return this.check(t,e),e}},{key:"all",value:function(){return this.stocks(this.codes)}},{key:"list",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:400;t=t||this.stocks();var r=Object.keys(t).sort((function(n,a){return+t[a][e]-+t[n][e]})),i=r.slice((n-1)*a,n*a),c=[],o=!0,s=!1,u=void 0;try{for(var f,l=i[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var p=f.value;c.push(t[p])}}catch(d){s=!0,u=d}finally{try{o||null==l["return"]||l["return"]()}finally{if(s)throw u}}return console.log("#Pool# sortBy [".concat(e,"] page=").concat(n," limit=").concat(a," ... ")),c}},{key:"listOfStocks",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,a=this.stocks();return this.list(a,t,e,n)}},{key:"listOfBonds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,a=this.bonds();return this.list(a,t,e,n)}},{key:"show",value:function(t){console.table(this.stocks([t]))}}]),t}();e["a"]=new m},2909:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return a(t)||r(t)||i()}n.d(e,"a",(function(){return c}))},"304f":function(t,e,n){},"32d2":function(t,e,n){"use strict";n("d3b7"),n("4795"),n("304f");var a=n("9801"),r=n.n(a);window.toastr=r.a;var i={timeOut:0,extendedTimeOut:0,closeButton:!0,newestOnTop:!1,positionClass:"toast-bottom-right"};r.a.confirm=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a=Object.assign({},i,a),new Promise((function(i){a.onclick=function(){i(),n&&n()},a.onCloseClick=function(){r.a.clear()};var c=a.type||"info";r.a[c](t,e,a)}))},r.a.loading=function(t,e){var n=Object.assign({},i,{positionClass:"toast-bottom-center"}),a=r.a.info(t||"",e||"loading ...",n);return new Promise((function(t){return setTimeout(t(a),100)}))},r.a.clearAll=function(t){t?r.a.getContainer().children(".toast-".concat(t)).remove():r.a.getContainer().remove()},e["a"]=r.a},"498a":function(t,e,n){"use strict";var a=n("23e7"),r=n("58a8").trim,i=n("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"4df4":function(t,e,n){"use strict";var a=n("0366"),r=n("7b0b"),i=n("9bdd"),c=n("e95a"),o=n("50c4"),s=n("8418"),u=n("35a1");t.exports=function(t){var e,n,f,l,p,d,h=r(t),v="function"==typeof this?this:Array,k=arguments.length,m=k>1?arguments[1]:void 0,b=void 0!==m,y=u(h),w=0;if(b&&(m=a(m,k>2?arguments[2]:void 0,2)),void 0==y||v==Array&&c(y))for(e=o(h.length),n=new v(e);e>w;w++)d=b?m(h[w],w):h[w],s(n,w,d);else for(l=y.call(h),p=l.next,n=new v;!(f=p.call(l)).done;w++)d=b?i(l,m,[f.value,w],!0):f.value,s(n,w,d);return n.length=w,n}},6062:function(t,e,n){"use strict";var a=n("6d61"),r=n("6566");t.exports=a("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},6566:function(t,e,n){"use strict";var a=n("9bf2").f,r=n("7c73"),i=n("e2cc"),c=n("0366"),o=n("19aa"),s=n("2266"),u=n("7dd0"),f=n("2626"),l=n("83ab"),p=n("f183").fastKey,d=n("69f3"),h=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,u){var f=t((function(t,a){o(t,f,e),h(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=a&&s(a,t[u],t,n)})),d=v(e),k=function(t,e,n){var a,r,i=d(t),c=m(t,e);return c?c.value=n:(i.last=c={index:r=p(e,!0),key:e,value:n,previous:a=i.last,next:void 0,removed:!1},i.first||(i.first=c),a&&(a.next=c),l?i.size++:t.size++,"F"!==r&&(i.index[r]=c)),t},m=function(t,e){var n,a=d(t),r=p(e);if("F"!==r)return a.index[r];for(n=a.first;n;n=n.next)if(n.key==e)return n};return i(f.prototype,{clear:function(){var t=this,e=d(t),n=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),a=m(e,t);if(a){var r=a.next,i=a.previous;delete n.index[a.index],a.removed=!0,i&&(i.next=r),r&&(r.previous=i),n.first==a&&(n.first=r),n.last==a&&(n.last=i),l?n.size--:e.size--}return!!a},forEach:function(t){var e,n=d(this),a=c(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),i(f.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return k(this,0===t?0:t,e)}}:{add:function(t){return k(this,t=0===t?0:t,t)}}),l&&a(f.prototype,"size",{get:function(){return d(this).size}}),f},setStrong:function(t,e,n){var a=e+" Iterator",r=v(e),i=v(a);u(t,e,(function(t,e){h(this,{type:a,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),f(e)}}},"6d61":function(t,e,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("f183"),s=n("2266"),u=n("19aa"),f=n("861d"),l=n("d039"),p=n("1c7e"),d=n("d44e"),h=n("7156");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),k=-1!==t.indexOf("Weak"),m=v?"set":"add",b=r[t],y=b&&b.prototype,w=b,g={},O=function(t){var e=y[t];c(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(k&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return k&&!f(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(k&&!f(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(i(t,"function"!=typeof b||!(k||y.forEach&&!l((function(){(new b).entries().next()})))))w=n.getConstructor(e,t,v,m),o.REQUIRED=!0;else if(i(t,!0)){var j=new w,x=j[m](k?{}:-0,1)!=j,S=l((function(){j.has(1)})),_=p((function(t){new b(t)})),C=!k&&l((function(){var t=new b,e=5;while(e--)t[m](e,e);return!t.has(-0)}));_||(w=e((function(e,n){u(e,w,t);var a=h(new b,e,w);return void 0!=n&&s(n,a[m],a,v),a})),w.prototype=y,y.constructor=w),(S||C)&&(O("delete"),O("has"),v&&O("get")),(C||x)&&O(m),k&&y.clear&&delete y.clear}return g[t]=w,a({global:!0,forced:w!=b},g),d(w,t),k||n.setStrong(w,t,v),w}},"776f":function(t,e,n){"use strict";n.d(e,"m",(function(){return c})),n.d(e,"l",(function(){return o})),n.d(e,"jb",(function(){return s})),n.d(e,"ib",(function(){return u})),n.d(e,"V",(function(){return f})),n.d(e,"a",(function(){return l})),n.d(e,"z",(function(){return p})),n.d(e,"T",(function(){return d})),n.d(e,"D",(function(){return h})),n.d(e,"s",(function(){return v})),n.d(e,"kb",(function(){return k})),n.d(e,"C",(function(){return m})),n.d(e,"S",(function(){return b})),n.d(e,"ab",(function(){return y})),n.d(e,"c",(function(){return w})),n.d(e,"J",(function(){return g})),n.d(e,"Z",(function(){return O})),n.d(e,"b",(function(){return j})),n.d(e,"I",(function(){return x})),n.d(e,"R",(function(){return S})),n.d(e,"P",(function(){return _})),n.d(e,"Q",(function(){return C})),n.d(e,"O",(function(){return q})),n.d(e,"u",(function(){return M})),n.d(e,"X",(function(){return D})),n.d(e,"o",(function(){return E})),n.d(e,"p",(function(){return T})),n.d(e,"q",(function(){return B})),n.d(e,"w",(function(){return W})),n.d(e,"x",(function(){return F})),n.d(e,"y",(function(){return z})),n.d(e,"g",(function(){return I})),n.d(e,"k",(function(){return Y})),n.d(e,"j",(function(){return A})),n.d(e,"f",(function(){return H})),n.d(e,"h",(function(){return U})),n.d(e,"i",(function(){return J})),n.d(e,"F",(function(){return P})),n.d(e,"G",(function(){return L})),n.d(e,"U",(function(){return R})),n.d(e,"B",(function(){return N})),n.d(e,"Y",(function(){return K})),n.d(e,"H",(function(){return V})),n.d(e,"E",(function(){return Q})),n.d(e,"A",(function(){return G})),n.d(e,"W",(function(){return X})),n.d(e,"d",(function(){return Z})),n.d(e,"n",(function(){return $})),n.d(e,"t",(function(){return tt})),n.d(e,"v",(function(){return et})),n.d(e,"hb",(function(){return nt})),n.d(e,"fb",(function(){return at})),n.d(e,"bb",(function(){return rt})),n.d(e,"r",(function(){return it})),n.d(e,"e",(function(){return ct})),n.d(e,"gb",(function(){return ot})),n.d(e,"cb",(function(){return st})),n.d(e,"db",(function(){return ut})),n.d(e,"eb",(function(){return ft})),n.d(e,"K",(function(){return lt})),n.d(e,"M",(function(){return pt})),n.d(e,"N",(function(){return dt})),n.d(e,"L",(function(){return ht}));n("d81d"),n("b0c0");var a=n("d4ec"),r=n("bee2"),i=n("ade3"),c={key:"change-top10",name:"涨幅"},o={key:"change-last10",name:"跌幅"},s={key:"volume-top10",name:"成交量"},u={key:"turnover-top10",name:"换手率"},f={key:"qrr-top10",name:"量比"},l={key:"amount-top10",name:"资金净流入"},p={key:"inflow-top10",name:"资金流入"},d={key:"outflow-top10",name:"资金流出"},h={key:"lxsz-top10",name:"连续上涨"},v={key:"cxfl-top10",name:"持续放量"},k={key:"xstp-top10",name:"向上突破"},m={key:"ljqs-top10",name:"量价齐升"},b={key:"netinflow-top10",name:"主力净流入"},y={key:"supinflow-top10",name:"超大单净流入"},w={key:"biginflow-top10",name:"大单净流入"},g={key:"midinflow-top10",name:"中单净流入"},O={key:"supinflowrate-top10",name:"超大单净流入占比"},j={key:"biginflowrate-top10",name:"大单净流入占比"},x={key:"midinflowrate-top10",name:"中单净流入占比"},S={key:"netinflowrate-top10",name:"主力资金净流入率"},_={key:"netinflowrate-3days-top10",name:"3日主力资金净流入率"},C={key:"netinflowrate-5days-top10",name:"5日主力资金净流入率"},q={key:"netinflowrate-10days-top10",name:"10日主力资金净流入率"},M={key:"hgt-top10",name:"沪股通"},D={key:"sgt-top10",name:"深股通"},E={key:"concept-blocka-top10",name:"概念板块A"},T={key:"concept-blockb-top10",name:"概念板块B"},B={key:"concept-blockc-top10",name:"概念板块C"},W={key:"industry-blocka-top10",name:"行业板块A"},F={key:"industry-blockb-top10",name:"行业板块B"},z={key:"industry-blockc-top10",name:"行业板块C"},I={key:"bonds-change-top10",name:"可转债涨幅"},Y={key:"bonds-netinflow-top10",name:"可转债净流入"},A={key:"bonds-netinflowrate-top10",name:"可转债净占比"},H={key:"bonds-change2-top10",name:"可转债涨幅(正股)"},U={key:"bonds-netinflow2-top10",name:"可转债净流入(正股)"},J={key:"bonds-netinflowrate2-top10",name:"可转债净占比(正股)"},P={key:"market-index",name:"上证指数"},L={key:"market-top10",name:"权重"},R={key:"price-top10",name:"价格"},N={key:"leader-top10",name:"行业龙头"},K={key:"subnew-top10",name:"次新股"},V={key:"ma-top10",name:"均线金叉"},Q={key:"macd-top10",name:"MACD金叉"},G={key:"kdj-top10",name:"KDJ金叉"},X={key:"rsi-top10",name:"RSI金叉"},Z={key:"boll-top10",name:"BOLL突破中轨"},$={key:"compond-top10",name:"指标共振"},tt={key:"dragon-tiger-top10",name:"前日龙虎"},et={key:"hot-top10",name:"热度"},nt={key:"trend-pattern-top10",name:"趋势形态"},at={key:"trend-netinflow-top10",name:"趋势资金"},rt={key:"trend-bonds-top10",name:"趋势可转债"},it={key:"continue-limitup-top10",name:"打板"},ct={key:"bonds-amplitude-top10",name:"可转债振幅"},ot={key:"trend-pattern-digger",name:"趋势-平台突破"},st={key:"trend-indicator-digger",name:"趋势-指标共振"},ut={key:"trend-ma-digger",name:"趋势-均线突破"},ft={key:"trend-netinflow-digger",name:"趋势-连续资金"},lt={key:"monitor-limitup-digger",name:"准涨停"},pt={key:"monitor-ma5-digger",name:"5日均线下穿"},dt={key:"monitor-ma7-digger",name:"7日均线下穿"},ht={key:"monitor-ma10-digger",name:"10日均线下穿"},vt=function(){function t(){var e,n;Object(a["a"])(this,t),Object(i["a"])(this,"normalMap",(e={},Object(i["a"])(e,P.key,P),Object(i["a"])(e,L.key,L),Object(i["a"])(e,R.key,R),Object(i["a"])(e,c.key,c),Object(i["a"])(e,s.key,s),Object(i["a"])(e,u.key,u),Object(i["a"])(e,f.key,f),Object(i["a"])(e,l.key,l),Object(i["a"])(e,b.key,b),Object(i["a"])(e,S.key,S),Object(i["a"])(e,V.key,V),Object(i["a"])(e,Q.key,Q),Object(i["a"])(e,G.key,G),Object(i["a"])(e,X.key,X),Object(i["a"])(e,Z.key,Z),Object(i["a"])(e,$.key,$),Object(i["a"])(e,nt.key,nt),Object(i["a"])(e,at.key,at),Object(i["a"])(e,rt.key,rt),Object(i["a"])(e,M.key,M),Object(i["a"])(e,D.key,D),Object(i["a"])(e,E.key,E),Object(i["a"])(e,T.key,T),Object(i["a"])(e,B.key,B),Object(i["a"])(e,W.key,W),Object(i["a"])(e,F.key,F),Object(i["a"])(e,z.key,z),Object(i["a"])(e,tt.key,tt),Object(i["a"])(e,et.key,et),e)),Object(i["a"])(this,"intervalMap",(n={},Object(i["a"])(n,ot.key,ot),Object(i["a"])(n,st.key,st),Object(i["a"])(n,ut.key,ut),Object(i["a"])(n,ft.key,ft),n)),Object(i["a"])(this,"map",Object.assign({},this.normalMap,this.intervalMap))}return Object(r["a"])(t,[{key:"getBondKeys",value:function(){return[I.key,Y.key,A.key,H.key,U.key,J.key]}},{key:"getNormalKeys",value:function(){var t=[];for(var e in this.normalMap)t.push(this.key(e));return t}},{key:"getIntervalKeys",value:function(){var t=[];for(var e in this.intervalMap)t.push(this.key(e));return t}},{key:"getNormalNames",value:function(){var t=[];for(var e in this.normalMap)t.push(this.name(e));return t}},{key:"getIntervalNames",value:function(){var t=[];for(var e in this.intervalMap)t.push(this.name(e));return t}},{key:"all",value:function(){return this.map}},{key:"get",value:function(t){return this.map[t]}},{key:"keys",value:function(){var t=[];for(var e in this.map)t.push(this.key(e));return t}},{key:"names",value:function(){var t={};for(var e in this.map)t.push(this.name(e));return t}},{key:"key",value:function(t){return this.map[t].key}},{key:"name",value:function(t){return this.map[t].name}},{key:"keyOf",value:function(t){for(var e in this.map){var n=this.name(e);if(n===t)return e}}}]),t}();e["lb"]=new vt},"7e12":function(t,e,n){var a=n("da84"),r=n("58a8").trim,i=n("5899"),c=a.parseFloat,o=1/c(i+"-0")!==-1/0;t.exports=o?function(t){var e=r(String(t)),n=c(e);return 0===n&&"-"==e.charAt(0)?-0:n}:c},"7e84":function(t,e,n){"use strict";function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}n.d(e,"a",(function(){return a}))},"90d5":function(t,e,n){"use strict";n("caad"),n("0d03"),n("2532");var a=n("a34a"),r=n.n(a),i=(n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),s=n("ade3"),u=n("776f"),f=n("2894"),l=(n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("b0c0"),n("d3b7"),n("ac1f"),n("3ca3"),n("1276"),n("498a"),n("ddb0"),n("b868")),p=n("c1df"),d=n.n(p),h=function(){function t(e){var n,a;Object(c["a"])(this,t),Object(s["a"])(this,"name",void 0),Object(s["a"])(this,"urls",(n={},Object(s["a"])(n,u["m"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/zdf/order/desc/free/1/"),Object(s["a"])(n,u["l"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/zdf/order/asc/free/1/"),Object(s["a"])(n,u["jb"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/money/order/DESC/free/1/"),Object(s["a"])(n,u["ib"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/hsl/order/DESC/free/1/"),Object(s["a"])(n,u["V"].key,"http://q.10jqka.com.cn/index/index/board/all/field/lb/order/desc/free/1/"),Object(s["a"])(n,u["a"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/zjjlr/order/DESC/free/1/"),Object(s["a"])(n,u["z"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/flowin/order/DESC/free/1/"),Object(s["a"])(n,u["T"].key,"http://data.10jqka.com.cn/funds/ggzjl/field/flowout/order/DESC/free/1/"),Object(s["a"])(n,u["D"].key,"http://data.10jqka.com.cn/rank/lxsz/field/lxts/order/desc/free/1/"),Object(s["a"])(n,u["s"].key,"http://data.10jqka.com.cn/rank/cxfl/field/count/order/desc/free/1/"),Object(s["a"])(n,u["kb"].key,"http://data.10jqka.com.cn/rank/xstp/board/5/field/ZDF/order/desc/free/1/"),Object(s["a"])(n,u["C"].key,"http://data.10jqka.com.cn/rank/ljqs/field/count/order/desc/free/1/"),n)),Object(s["a"])(this,"urlsOfWencai",(a={},Object(s["a"])(a,u["Y"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=次新股，主力资金排序&secondary_intent&condition_id&perpage=200"),Object(s["a"])(a,u["B"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=一级行业龙头，主力资金排序&secondary_intent&condition_id&perpage=200"),Object(s["a"])(a,u["H"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近3交易日5日均线金叉10日均线,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["E"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近3交易日MACD零轴以上金叉,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["A"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近2交易日KDJ金叉,KDJ>55或KDJ<45,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["W"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近2交易日RSI金叉,RSI>55或RSI<45,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["d"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近2交易日BOLL突破中轨,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["n"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近2交易日rsi买入信号>0,近2交易日kdj买入信号>0,近2交易日boll突破中轨>0,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["hb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=5日均线上方,连续上涨2日以上,3日涨幅大于10,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["fb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=5日均线上方,连续主力资金流入,3日区间涨幅>5,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["bb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=可转债,前一日涨幅>0,区间涨幅>5,区间涨幅排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["gb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近三日出现的平台突破,连续上涨天数>2,3日涨幅>5,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["cb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近2交易日rsi买入信号>0,近2交易日kdj买入信号>0,近2交易日boll突破中轨>0,连续上涨天数>2,3日涨幅>10,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["db"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=近三日价格站上5日均线,连续上涨天数>2,3日涨幅>10,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["eb"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=连续主力资金流入,3日区间涨幅>10,主力资金排序&secondary_intent&condition_id&perpage=400"),Object(s["a"])(a,u["e"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=可转债,昨日成交量>3&secondary_intent&condition_id&perpage=200"),Object(s["a"])(a,u["r"].key,"http://www.iwencai.com/unifiedwap/unified-wap/result/get-stock-pick?question=前一交易日连续涨停次数&secondary_intent&condition_id&perpage=200"),a)),this.name=e}return Object(o["a"])(t,[{key:"getUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;return"".concat(this.urls[this.name],"page/").concat(t,"/size/").concat(e)}},{key:"getUrlOfWencai",value:function(){return this.urlsOfWencai[this.name]}},{key:"createStocksOfWencai",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,f,l,p,h,v,k,m,b,y,w,g,O,j,x;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(e),a=n.data.data,a){t.next=4;break}return t.abrupt("return",[]);case 4:for(i=[],c=!0,o=!1,s=void 0,t.prev=8,f=a[Symbol.iterator]();!(c=(l=f.next()).done);c=!0)p=l.value,h=(p["股票代码"]||p["可转债@可转债代码"]).split(".")[0],v=p["股票简称"]||p["可转债@可转债简称"],this.name===u["r"].key?(k="连续涨停天数[".concat(d()().format("YYYYMMDD"),"]"),m="连续涨停天数[".concat(d()().subtract(1,"day").format("YYYYMMDD"),"]"),b="连续涨停天数[".concat(d()().subtract(2,"day").format("YYYYMMDD"),"]"),y="连续涨停天数[".concat(d()().subtract(3,"day").format("YYYYMMDD"),"]"),w="连续涨停天数[".concat(d()().subtract(4,"day").format("YYYYMMDD"),"]"),g="连续涨停天数[".concat(d()().subtract(5,"day").format("YYYYMMDD"),"]"),O="连续涨停天数[".concat(d()().subtract(6,"day").format("YYYYMMDD"),"]"),j="连续涨停天数[".concat(d()().subtract(7,"day").format("YYYYMMDD"),"]"),x=p[k]||p[m]||p[b]||p[y]||p[w]||p[g]||p[O]||p[j],i.push({code:h,name:v,times:x})):i.push({code:h,name:v});t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](8),o=!0,s=t.t0;case 16:t.prev=16,t.prev=17,c||null==f["return"]||f["return"]();case 19:if(t.prev=19,!o){t.next=22;break}throw s;case 22:return t.finish(19);case 23:return t.finish(16);case 24:return t.abrupt("return",i);case 25:case"end":return t.stop()}}),t,this,[[8,12,16,24],[17,,19,23]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createStocks",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,l,p,d,h,v;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=document.createElement("div"),n.innerHTML=e,a=n.querySelector("#J-ajax-main .m-table"),i=a.querySelectorAll("tbody tr"),c=[],o=!0,s=!1,u=void 0,t.prev=8,f=i[Symbol.iterator]();!(o=(l=f.next()).done);o=!0)p=l.value,d=p.querySelectorAll("td"),h=d[1].querySelector("a").innerText.trim(),v=d[2].querySelector("a").innerText.trim(),c.push({code:h,name:v});t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](8),s=!0,u=t.t0;case 16:t.prev=16,t.prev=17,o||null==f["return"]||f["return"]();case 19:if(t.prev=19,!s){t.next=22;break}throw u;case 22:return t.finish(19);case 23:return t.finish(16);case 24:return t.abrupt("return",c);case 25:case"end":return t.stop()}}),t,null,[[8,12,16,24],[17,,19,23]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=[],![u["B"].key,u["Y"].key,u["H"].key,u["E"].key,u["A"].key,u["W"].key,u["d"].key,u["n"].key,u["hb"].key,u["fb"].key,u["bb"].key,u["gb"].key,u["cb"].key,u["db"].key,u["eb"].key,u["e"].key,u["r"].key].includes(this.name)){t.next=11;break}return t.next=5,l["a"].get(this.getUrlOfWencai(),null);case 5:return n=t.sent,t.next=8,this.createStocksOfWencai(n);case 8:e=t.sent,t.next=17;break;case 11:return t.next=13,l["a"].get(this.getUrl(),null);case 13:return a=t.sent,t.next=16,this.createStocks(a);case 16:e=t.sent;case 17:return console.log("#THSListCrawler# capture ".concat(this.name," ...")),t.abrupt("return",e);case 21:return t.prev=21,t.t0=t["catch"](0),console.warn("#THSListCrawler# capture ".concat(this.name," fail"),t.t0),t.abrupt("return",[]);case 25:case"end":return t.stop()}}),t,this,[[0,21]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),v=(n("4795"),n("0cae")),k=function(){function t(e){Object(c["a"])(this,t),Object(s["a"])(this,"code","000001"),this.code=e}return Object(o["a"])(t,[{key:"waitCallback",value:function(){var t=this;return new Promise((function(e,n){var a=t.getJsonpCallback();window[a]=function(t){return e(t)},setTimeout(n,3e4)}))}},{key:"getJsonpCallback",value:function(){return"quotebridge_v2_time_hs_".concat(this.code,"_last")}},{key:"getUrl",value:function(){return"http://d.10jqka.com.cn/v2/time/hs_".concat(this.code,"/last.js")}},{key:"createStock",value:function(t){var e="hs_".concat(this.code),n=t[e],a=n.data.split(";").pop(),r=a.split(",");return new v["a"]({code:this.code,name:n.name,price:r[1]})}},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].get(this.getUrl(),null,{dataType:"jsonp",jsonp:this.getJsonpCallback()});case 3:return t.next=5,this.waitCallback();case 5:return e=t.sent,console.log("#THSStockCrawler# capture ".concat(this.code," "),e),t.abrupt("return",this.createStock(e));case 10:t.prev=10,t.t0=t["catch"](0),console.warn("#THSStockCrawler# capture ".concat(this.code," fail"),t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),m=function t(){Object(c["a"])(this,t),Object(s["a"])(this,"sse-50",[]),Object(s["a"])(this,"sse-180",[]),Object(s["a"])(this,"sse-380",[]),Object(s["a"])(this,"szse-100",[]),Object(s["a"])(this,"szse-300",[]),Object(s["a"])(this,"hs-300",[]),Object(s["a"])(this,"zz-500",[]),Object(s["a"])(this,"sub-new",[]),Object(s["a"])(this,"bond",{}),Object(s["a"])(this,"future",[]),Object(s["a"])(this,"all",[])},b=function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"markets",new m),Object(s["a"])(this,"urls",{"sse-50":"http://q.10jqka.com.cn/zs/detail/code/1B0016/","sse-180":"http://q.10jqka.com.cn/zs/detail/code/1B0007/","sse-380":"http://q.10jqka.com.cn/zs/detail/code/1B0009/","szse-100":"http://q.10jqka.com.cn/zs/detail/code/399330/","szse-300":"http://q.10jqka.com.cn/zs/detail/code/399007/","hs-300":"http://q.10jqka.com.cn/zs/detail/code/1B0300/","zz-500":"http://q.10jqka.com.cn/zs/detail/code/1B0905/","sub-new":"http://q.10jqka.com.cn/gn/detail/code/300870/"})}return Object(o["a"])(t,[{key:"getUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return"".concat(this.urls[t],"page/").concat(e,"/size/").concat(n)}},{key:"createMarkets",value:function(){var t=Object(i["a"])(r.a.mark((function t(e,n){var a,i,c,o,s,u,f,l,p,d,h;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=document.createElement("div"),a.innerHTML=n,i=a.querySelector(".m-table"),c=i.querySelectorAll("tbody tr"),this.markets[e]||(this.markets[e]=[]),o=!0,s=!1,u=void 0,t.prev=8,f=c[Symbol.iterator]();!(o=(l=f.next()).done);o=!0)p=l.value,d=p.querySelectorAll("td"),h=d[1].querySelector("a").innerText.trim(),this.markets[e].push(h);t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](8),s=!0,u=t.t0;case 16:t.prev=16,t.prev=17,o||null==f["return"]||f["return"]();case 19:if(t.prev=19,!s){t.next=22;break}throw u;case 22:return t.finish(19);case 23:return t.finish(16);case 24:case"end":return t.stop()}}),t,this,[[8,12,16,24],[17,,19,23]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=r.a.keys(this.urls);case 2:if((t.t1=t.t0()).done){t.next=12;break}return e=t.t1.value,t.next=6,l["a"].get(this.getUrl(e),null);case 6:return n=t.sent,t.next=9,this.createMarkets(e,n);case 9:console.log("#THSWhitelistCrawler# capture ".concat(e," ... "),this.markets[e]),t.next=2;break;case 12:return t.abrupt("return",this.markets);case 15:t.prev=15,t.t2=t["catch"](0),console.warn("#THSWhitelistCrawler# capture fail",t.t2);case 18:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),y=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"captureList",value:function(t){return new h(t).capture()}},{key:"captureStock",value:function(t){return new k(t).capture()}},{key:"captureWhitelist",value:function(){return(new b).capture()}}]),t}(),w=new y,g=n("3835"),O=function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"blocks",{concept:[],industry:[]}),Object(s["a"])(this,"timestamp",void 0)}return Object(o["a"])(t,[{key:"getConceptUrl",value:function(){return"http://push2.eastmoney.com/api/qt/clist/get?pn=1&pz=20&po=1&np=1&fltt=2&invt=2&fid=f3&fs=m:90+t:3&fields=f12,f14,f104,f105"}},{key:"getIndustryUrl",value:function(){return"http://push2.eastmoney.com/api/qt/clist/get?pn=1&pz=20&po=1&np=1&fields=f12,f13,f14,f62&fid=f62&fs=m:90+t:2"}},{key:"createConceptBlocks",value:function(t){var e=JSON.parse(t);if(e.data&&e.data.diff){var n=!0,a=!1,r=void 0;try{for(var i,c=e.data.diff[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,s=["昨日涨停","昨日连板"];s.includes(o.f14)||this.blocks.concept.push({code:o.f12,name:o.f14,up:o.f104,down:o.f105})}}catch(u){a=!0,r=u}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw r}}}}},{key:"createIndustryBlocks",value:function(t){var e=JSON.parse(t);if(e.data&&e.data.diff){var n=!0,a=!1,r=void 0;try{for(var i,c=e.data.diff[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;this.blocks.industry.push({code:o.f12,name:o.f14})}}catch(s){a=!0,r=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw r}}}}},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a,i,c;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=(new Date).getTime(),!(this.timestamp&&e-this.timestamp<3e5)){t.next=4;break}return t.abrupt("return",this.blocks);case 4:return this.timestamp=e,t.next=7,Promise.all([l["a"].get(this.getConceptUrl(),null),l["a"].get(this.getIndustryUrl(),null)]);case 7:return n=t.sent,a=Object(g["a"])(n,2),i=a[0],c=a[1],this.createConceptBlocks(i),this.createIndustryBlocks(c),console.log("#EastMoneyBlockCrawler# capture ..."),t.abrupt("return",this.blocks);case 17:t.prev=17,t.t0=t["catch"](0),console.warn("#EastMoneyBlockCrawler# capture fail",t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),j=new O,x=function(){function t(e){Object(c["a"])(this,t),Object(s["a"])(this,"name",void 0),Object(s["a"])(this,"blocks",{concept:[],industry:[]}),Object(s["a"])(this,"count",0),Object(s["a"])(this,"stocks",[]),this.name=e}return Object(o["a"])(t,[{key:"getUrl",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="f8,f10,f12,f14,f3,f2,f37,f62,f112,f113,f184",a=(t={},Object(s["a"])(t,u["G"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f20&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["U"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f2&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["m"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["l"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=0&np=1&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["jb"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f5&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["ib"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f8&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["V"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f10&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23"),Object(s["a"])(t,u["ab"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f66&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["c"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f72&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["J"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f78&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["Z"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f69&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["b"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f75&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["I"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f81&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["S"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f62&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["R"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f184&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"),Object(s["a"])(t,u["P"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f268&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=3"),Object(s["a"])(t,u["Q"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f165&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=5"),Object(s["a"])(t,u["O"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f175&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=10"),Object(s["a"])(t,u["u"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0707"),Object(s["a"])(t,u["X"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0804"),Object(s["a"])(t,u["o"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.concept[0])),Object(s["a"])(t,u["p"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.concept[1])),Object(s["a"])(t,u["q"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.concept[2])),Object(s["a"])(t,u["w"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.industry[0])),Object(s["a"])(t,u["x"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.industry[1])),Object(s["a"])(t,u["y"].key,"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f62&fs=b:".concat(this.blocks.industry[2])),t);return"".concat(a[this.name],"&pn=").concat(e,"&pz=",400,"&fields=").concat(n)}},{key:"createStocks",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,l,p,d,h,v,k,m,b,y,w;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(e),n.data&&n.data.diff){t.next=3;break}return t.abrupt("return");case 3:for(a=!0,i=!1,c=void 0,t.prev=6,o=n.data.diff[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)u=s.value,f=u["f12"],l=u["f14"],p=+u["f2"],d=+u["f3"],h=+u["f62"],v=+u["f184"],k=+u["f112"],m=+u["f113"],b=+u["f37"],y=+u["f8"],w=+u["f10"],this.stocks.push({code:f,name:l,price:p,change:d,netinflow:h,rate:v,eps:k,bvps:m,roe:b,turnover:y,qrr:w});t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](6),i=!0,c=t.t0;case 14:t.prev=14,t.prev=15,a||null==o["return"]||o["return"]();case 17:if(t.prev=17,!i){t.next=20;break}throw c;case 20:return t.finish(17);case 21:return t.finish(14);case 22:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"captureBlocks",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a,i,c,o,s,u,f,l,p,d,h;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j.capture();case 2:for(e=t.sent,n=!0,a=!1,i=void 0,t.prev=6,c=e.concept[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)s=o.value,this.blocks.concept.push(s.code);t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](6),a=!0,i=t.t0;case 14:t.prev=14,t.prev=15,n||null==c["return"]||c["return"]();case 17:if(t.prev=17,!a){t.next=20;break}throw i;case 20:return t.finish(17);case 21:return t.finish(14);case 22:for(u=!0,f=!1,l=void 0,t.prev=25,p=e.industry[Symbol.iterator]();!(u=(d=p.next()).done);u=!0)h=d.value,this.blocks.industry.push(h.code);t.next=33;break;case 29:t.prev=29,t.t1=t["catch"](25),f=!0,l=t.t1;case 33:t.prev=33,t.prev=34,u||null==p["return"]||p["return"]();case 36:if(t.prev=36,!f){t.next=39;break}throw l;case 39:return t.finish(36);case 40:return t.finish(33);case 41:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21],[25,29,33,41],[34,,36,40]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,![u["o"].key,u["p"].key,u["q"].key,u["w"].key,u["x"].key,u["y"].key].includes(this.name)){t.next=4;break}return t.next=4,this.captureBlocks();case 4:return t.next=6,l["a"].get(this.getUrl(),null);case 6:return e=t.sent,t.next=9,this.createStocks(e);case 9:return console.log("#EastMoneyListCrawler# capture ".concat(this.name," ...")),t.abrupt("return",this.stocks);case 13:t.prev=13,t.t0=t["catch"](0),console.warn("#EastMoneyListCrawler# capture ".concat(this.name," fail"),t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),S=(n("fb6a"),n("b680"),n("a15b"),n("d81d"),n("99de")),_=n("7e84"),C=n("257e"),q=n("262e"),M=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"isAlive",value:function(){}},{key:"url",value:function(){}},{key:"state",value:function(){}},{key:"getAllStocks",value:function(){return{}}},{key:"getStocks",value:function(t){return{}}},{key:"getStock",value:function(t){return{}}},{key:"has",value:function(t){return!1}}]),t}(),D=n("7366"),E=n.n(D),T=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isCapture:!1,interval:void 0};return Object(c["a"])(this,e),t=Object(S["a"])(this,Object(_["a"])(e).call(this)),Object(s["a"])(Object(C["a"])(t),"codes",[]),Object(s["a"])(Object(C["a"])(t),"stocks",{}),Object(s["a"])(Object(C["a"])(t),"decimal",{}),Object(s["a"])(Object(C["a"])(t),"map",{}),Object(s["a"])(Object(C["a"])(t),"exStocks",{}),Object(s["a"])(Object(C["a"])(t),"sse",void 0),Object(s["a"])(Object(C["a"])(t),"isCapture",void 0),Object(s["a"])(Object(C["a"])(t),"interval",30),Object(s["a"])(Object(C["a"])(t),"timestamp",(new Date).getTime()),t.isCapture=a.isCapture,a.interval&&(t.interval=a.interval),t.codes=n,t}return Object(q["a"])(e,t),Object(o["a"])(e,[{key:"getSecids",value:function(){var t=[],e=!0,n=!1,a=void 0;try{for(var r,i=this.codes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var c=r.value;if("1.000001"!==c&&"0000011"!==c){var o=F.marketCode(c),s="".concat(o,".").concat(c);t.push(s)}else t.push("1.000001")}}catch(u){n=!0,a=u}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw a}}return t}},{key:"getUrl",value:function(){var t="f1,f2,f3,f4,f5,f6,f8,f9,f10,f12,f13,f14,f17,f18,f19,f37,f45,f62,f64,f65,f69,f70,f71,f75,f112,f113,f184",e=this.getSecids(),n=1e3*this.interval,a=Math.floor(98*Math.random())+1;return"https://".concat(a,".push2.eastmoney.com/api/qt/ulist/sse?invt=3&po=1&pi=0&pz=").concat(e.length,"&mpi=").concat(n,"&secids=").concat(e.join(","),"&fields=").concat(t)}},{key:"listen",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.timestamp=(new Date).getTime();try{var a=e.getUrl();e.sse=new EventSource(a),e.sse.onmessage=function(n){n.event;var a=n.data;n.id,n.retry;if(e.isCapture||(e.timestamp=(new Date).getTime()),a&&(a=JSON.parse(a),a.data)){var r=a.data.diff;for(var i in r){var c=r[i],o=c["f12"],s=c["f14"],u=c["f1"];o&&s&&("上证指数"===s?(e.map[i]="1.000001",e.decimal["1.000001"]=+u):(e.map[i]=o,e.decimal[o]=+u)),e.mergeStock(e.map[i],c)}console.log("#EastMoneySSECrawler# sse message: ",a),e.isCapture&&e.stop(),e.isCapture&&t(e.stocks)}},e.sse.onerror=function(t){e.isCapture&&n()}}catch(r){console.warn("#EastMoneySSECrawler# sse error ...",r)}})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=this;try{this.stop(),Object(i["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.codes.length){e.next=4;break}return e.next=4,t.listen();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))(),console.log("#EastMoneySSECrawler# sse start ...",this.url())}catch(e){console.warn("#EastMoneySSECrawler# sse fail",e)}return this}},{key:"isAlive",value:function(){var t=(new Date).getTime();return t-this.timestamp<3*this.interval*1e3}},{key:"url",value:function(){return this.sse.url}},{key:"state",value:function(){return this.sse.readyState}},{key:"stop",value:function(){this.sse&&this.sse.close()}},{key:"mergeStock",value:function(t,e){var n=this.stocks[t];if(!n)return this.updateExStcok(t,null,e),void(this.stocks[t]=this.createStock(t,e));this.updateExStcok(t,n,e),void 0!==e["f2"]&&(n.price=+(+e["f2"]/Math.pow(10,this.decimal[t])).toFixed(2)),void 0!==e["f3"]&&(n.change=+(+e["f3"]/100).toFixed(2)),void 0!==e["f17"]&&(n.open=+(+e["f17"]/Math.pow(10,this.decimal[t])).toFixed(2)),void 0!==e["f8"]&&(n.turnover=+(+e["f8"]/100).toFixed(2)),void 0!==e["f10"]&&(n.qrr=+(+e["f10"]/100).toFixed(2)),void 0!==e["f62"]&&(n.netinflow=+e["f62"]),void 0!==e["f184"]&&(n.rate=+(+e["f184"]/100).toFixed(2)),void 0!==e["f5"]&&(n.volume=+e["f5"]),void 0!==e["f6"]&&(n.amount=+e["f6"])}},{key:"updateExStcok",value:function(t,e,n){var a=this.exStocks[t]||{},r=n["f64"],i=n["f65"],c=n["f69"],o=n["f70"],s=n["f71"],u=n["f75"];void 0!==r&&(a.supinflow=+(+r).toFixed(2)),void 0!==i&&(a.supoutflow=+(+i).toFixed(2)),void 0!==c&&(a.supinflowrate=+(+c/100).toFixed(2)),void 0!==o&&(a.biginflow=+(+o).toFixed(2)),void 0!==s&&(a.bigoutflow=+(+s).toFixed(2)),void 0!==u&&(a.biginflowrate=+(+u/100).toFixed(2)),this.exStocks[t]=a,e&&(e.inflow=+(a.supinflow+a.biginflow).toFixed(2),e.outflow=+(a.supoutflow+a.bigoutflow).toFixed(2))}},{key:"createStock",value:function(t,e){var n={code:e["f12"],name:e["f14"],price:+(+e["f2"]/Math.pow(10,this.decimal[t])).toFixed(2),change:+(+e["f3"]/100).toFixed(2),rate:+(+e["f184"]/100).toFixed(2),roe:+(+e["f37"]).toFixed(2),eps:+(+e["f112"]).toFixed(2),bvps:+(+e["f113"]).toFixed(2),open:+(+e["f17"]/Math.pow(10,this.decimal[t])).toFixed(2),prevclose:+(+e["f18"]/Math.pow(10,this.decimal[t])).toFixed(2),turnover:+(+e["f8"]/100).toFixed(2),qrr:+(+e["f10"]/100).toFixed(2),inflow:+(+e["f64"]+ +e["f70"]).toFixed(2),outflow:+(+e["f65"]+ +e["f71"]).toFixed(2),netinflow:+e["f62"],volume:+e["f5"],amount:+e["f6"]};return new v["a"](n)}},{key:"has",value:function(t){var e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var c=r.value;if(!this.stocks[c])return!1}}catch(o){n=!0,a=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw a}}return!0}},{key:"getAllExStocks",value:function(){return this.exStocks}},{key:"getAllStocks",value:function(){return this.stocks}},{key:"getStock",value:function(t){var e=E()(this.stocks[t]);return e.code=t,e}},{key:"getStocks",value:function(t){var e={},n=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;this.stocks[o]&&(e[o]=this.getStock(o))}}catch(s){a=!0,r=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw r}}return e}}]),e}(M),B=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.length){t.next=3;break}return t.abrupt("return",[]);case 3:return n=new T(e,{isCapture:!0}),t.next=6,n.listen();case 6:return a=t.sent,console.log("#EastMoneyStocksCrawler# EastMoneyStocksCrawler capture: ",a),t.abrupt("return",a);case 11:t.prev=11,t.t0=t["catch"](0),console.warn("#EastMoneyStocksCrawler# EastMoneyStocksCrawler capture fail",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),W=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"index",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new B).capture(["1.000001"]);case 2:return e=t.sent,n=e["1.000001"],n.code="1.000001",t.abrupt("return",[n]);case 6:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"marketCode",value:function(t){if("1.000001"===t)return"1";if("399001"===t)return"0";var e=t.slice(0,2).toLowerCase();if(["00","30","12","20"].includes(e))return"0";if(["60","68","11","90"].includes(e))return"1";var n=["ag","sn","pb","au","bu","zn","wr","al","ru","fu","sp","cu","rb","hc","ss","ni"],a=["nr","sc"],r=["pg","am","jm","mm","bm","jm","vm","jd","cm","cs","lm","ym","bb","im","rr","pp","fb","eg","pm","eb"],i=["zc","rm","ap","sm","fg","rs","pm","jr","lr","sr","ur","oi","cy","ta","sf","cf","sa","ri","cj","wh","ma"],c=["tm","ts","tf","tf","tf","ts","tf","ts","ts","ts","ts","ts","ic","ic","ic","ic","ic","if","if","if","ih","if","if","ih","ih","ih","ih"];return n.includes(e)?"113":a.includes(e)?"142":r.includes(e)?"114":i.includes(e)?"115":c.includes(e)?"220":void 0}},{key:"isTrading",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="http://push2.eastmoney.com/api/qt/ulist.np/get?secids=1.000001&fields=f1,f2,f3,f4,f12,f13,f14,f107,f152",t.next=4,l["a"].get(e,null);case 4:if(n=t.sent,a=JSON.parse(n),i=a.data.diff[0].f107,![1,2,4].includes(i)){t.next=12;break}return console.log("#EastMoneyMarketIndexListCrawler# market open ..."),t.abrupt("return",!0);case 12:return console.log("#EastMoneyMarketIndexListCrawler# market close ..."),t.abrupt("return",!1);case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t["catch"](0),console.warn("#EastMoneyMarketIndexListCrawler# isTrading : ",t.t0),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),F=new W,z=function(){function t(e){Object(c["a"])(this,t),Object(s["a"])(this,"originCode","000001"),Object(s["a"])(this,"code","000001"),Object(s["a"])(this,"type",void 0),this.originCode=e,this.code=e,this.type=F.marketCode(this.code),"1.000001"===e&&(this.code="000001",this.type="1")}return Object(o["a"])(t,[{key:"getCodeWithArea",value:function(){var t=F.marketCode(this.code);return"1.000001"===this.originCode&&(t="1"),"".concat(this.code).concat(t)}},{key:"getExUrl",value:function(){return"http://push2.eastmoney.com/api/qt/ulist.np/get?secids=".concat(this.type,".").concat(this.code,"&fields=f14,f37,f112,f113,f184")}},{key:"getFlowUrl",value:function(){return"http://push2.eastmoney.com/api/qt/stock/get?secid=".concat(this.type,".").concat(this.code,"&fields=f58,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148")}},{key:"getUrl",value:function(){var t=this.getCodeWithArea();return"http://nuff.eastmoney.com/EM_Finance2015TradeInterface/JS.ashx?id=".concat(t)}},{key:"createStock",value:function(t,e,n){t=t.slice("callback(".length,-1);var a=JSON.parse(t)["Value"],r=JSON.parse(e).data||{},i=JSON.parse(n).data||{},c=i.diff?i.diff[0]:{},o={code:this.originCode,name:a[2]||"",price:a[25]||0,change:a[29]||0,rate:+(+c["f184"]/100).toFixed(2)||0,roe:+(+c["f37"]).toFixed(2)||0,eps:+(+c["f112"]).toFixed(2)||0,bvps:+(+c["f113"]).toFixed(2)||0,open:a[28]||0,turnover:a[37]||0,qrr:a[36]||0,inflow:r["f135"]||0,outflow:r["f136"]||0,netinflow:r["f137"]||0,volume:a[31]||0};return new v["a"](o)}},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a,i,c;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([l["a"].get(this.getUrl(),null),l["a"].get(this.getFlowUrl(),null),l["a"].get(this.getExUrl(),null)]);case 3:return e=t.sent,n=Object(g["a"])(e,3),a=n[0],i=n[1],c=n[2],console.log("#EastMoneyStockCrawler# capture ".concat(this.code," ")),t.abrupt("return",this.createStock(a,i,c));case 12:t.prev=12,t.t0=t["catch"](0),console.warn("#EastMoneyStockCrawler# capture ".concat(this.code," fail"),t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),I=(n("b64b"),function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"markets",new m),Object(s["a"])(this,"urls",{"sse-50":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0611","sse-180":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0612","sse-380":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0705","szse-100":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0743","hs-300":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0500","zz-500":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0701","sub-new":"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:BK0501",bond:"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid=f3&fs=b:MK0354",future:"",all:"http://push2.eastmoney.com/api/qt/clist/get?po=1&np=1&fltt=2&invt=2&fid0=f4001&fid=f62&fs=m:0+t:6+f:!2,m:0+t:13+f:!2,m:0+t:80+f:!2,m:1+t:2+f:!2,m:1+t:23+f:!2&stat=1"})}return Object(o["a"])(t,[{key:"getUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a="f12,f14,f232,f234",r=this.urls[t];return"".concat(r,"&pn=").concat(e,"&pz=").concat(n,"&fields=").concat(a)}},{key:"createMarkets",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,p;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].get(this.getUrl(e),null);case 2:if(n=t.sent,a=JSON.parse(n),a.data){t.next=6;break}return t.abrupt("return");case 6:for(this.markets[e]||(this.markets[e]=[]),i=!0,c=!1,o=void 0,t.prev=10,s=a.data.diff[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)f=u.value,p=f["f12"],this.markets[e].push(p);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),c=!0,o=t.t0;case 18:t.prev=18,t.prev=19,i||null==s["return"]||s["return"]();case 21:if(t.prev=21,!c){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createBondsOfMarkets",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,p;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].get(this.getUrl(e),null);case 2:if(n=t.sent,a=JSON.parse(n),a.data){t.next=6;break}return t.abrupt("return");case 6:for(this.markets[e]||(this.markets[e]={}),i=!0,c=!1,o=void 0,t.prev=10,s=a.data.diff[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)f=u.value,p=f["f12"],this.markets[e][p]=f["f232"];t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),c=!0,o=t.t0;case 18:t.prev=18,t.prev=19,i||null==s["return"]||s["return"]();case 21:if(t.prev=21,!c){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createFutureOfMarkets",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,p,d,h,v,k,m;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.markets[e]||(this.markets[e]=[]),n=["113","142","114","115","220"],a=0,i=n;case 3:if(!(a<i.length)){t.next=34;break}return c=i[a],o="http://futsse.eastmoney.com/list/main/".concat(c,"?orderBy=zdf&sort=desc&pageSize=1000&pageIndex=0"),t.next=8,l["a"].get(o,null);case 8:if(s=t.sent,u=JSON.parse(s),u.list){t.next=12;break}return t.abrupt("continue",31);case 12:for(f=!0,p=!1,d=void 0,t.prev=15,h=u.list[Symbol.iterator]();!(f=(v=h.next()).done);f=!0)k=v.value,m=k.dm.slice(0,2),this.markets[e].push(m);t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](15),p=!0,d=t.t0;case 23:t.prev=23,t.prev=24,f||null==h["return"]||h["return"]();case 26:if(t.prev=26,!p){t.next=29;break}throw d;case 29:return t.finish(26);case 30:return t.finish(23);case 31:a++,t.next=3;break;case 34:case"end":return t.stop()}}),t,this,[[15,19,23,31],[24,,26,30]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=e||Object.keys(this.urls),n=!0,a=!1,i=void 0,t.prev=5,c=e[Symbol.iterator]();case 7:if(n=(o=c.next()).done){t.next=25;break}if(s=o.value,"bond"!==s){t.next=14;break}return t.next=12,this.createBondsOfMarkets(s);case 12:t.next=21;break;case 14:if("future"!==s){t.next=19;break}return t.next=17,this.createFutureOfMarkets(s);case 17:t.next=21;break;case 19:return t.next=21,this.createMarkets(s);case 21:console.log("#EastMoneyWhitelistCrawler# capture ".concat(s," ... "),this.markets[s]);case 22:n=!0,t.next=7;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](5),a=!0,i=t.t0;case 31:t.prev=31,t.prev=32,n||null==c["return"]||c["return"]();case 34:if(t.prev=34,!a){t.next=37;break}throw i;case 37:return t.finish(34);case 38:return t.finish(31);case 39:return t.abrupt("return",this.markets);case 42:t.prev=42,t.t1=t["catch"](0),console.warn("#EastMoneyWhitelistCrawler# capture fail",t.t1);case 45:case"end":return t.stop()}}),t,this,[[0,42],[5,27,31,39],[32,,34,38]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()),Y=(n("26e9"),n("a37f")),A=function(){function t(e){Object(c["a"])(this,t),Object(s["a"])(this,"code",void 0),Object(s["a"])(this,"flows",[]),this.code=e}return Object(o["a"])(t,[{key:"getUrl",value:function(){var t=F.marketCode(this.code),e="".concat(t,".").concat(this.code);"1.000001"===this.code&&(e="1.000001");var n=Math.floor(98*Math.random())+1;return"http://".concat(n,".push2his.eastmoney.com/api/qt/stock/fflow/daykline/get?secid=").concat(e,"&fields1=f1,f2,f3,f7&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61,f62,f63,f64,f65")}},{key:"createFlows",value:function(t){var e=JSON.parse(t);if(e.data){var n=e.data.klines.reverse(),a=e.data.name,r=e.data.code,i=!0,c=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var f=s.value,l=f.split(","),p=d()(l[0]).format("YYYYMMDD"),h=l[11],v=l[12],k=l[1],m=l[6],b=l[5],y=l[10],w=l[4],g=l[9],O=new Y["a"]({code:r,name:a,date:p,price:h,change:v,netinflow:k,netinflowrate:m,supinflow:b,supinflowrate:y,biginflow:w,biginflowrate:g});this.flows.push(O)}}catch(j){c=!0,o=j}finally{try{i||null==u["return"]||u["return"]()}finally{if(c)throw o}}}}},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].get(this.getUrl(),null);case 3:return e=t.sent,this.createFlows(e),console.log("#EastMoneyStockFlowsCrawler# capture flows ".concat(this.code," ...")),t.abrupt("return",this.flows);case 9:t.prev=9,t.t0=t["catch"](0),console.warn("#EastMoneyStockFlowsCrawler# capture ".concat(this.code," fail"),t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u["t"].key;Object(c["a"])(this,t),Object(s["a"])(this,"name",void 0),this.name=e}return Object(o["a"])(t,[{key:"getUrl",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=d()().subtract(1,"day").format("YYYY-MM-DD"),1===+d()().day()&&(e=d()().subtract(3,"days").format("YYYY-MM-DD")),n="http://data.eastmoney.com/DataCenter_V3/stock2016/TradeDetail/pagesize=200,page=1,sortRule=-1,sortType=JmMoney,startDate=".concat(e,",endDate=").concat(e,",gpfw=0,js=.html"),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createStocks",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a,i,c,o,s,u,f,l,p,d;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=JSON.parse(e),a=[],i=!0,c=!1,o=void 0,t.prev=5,s=n.data[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)f=u.value,l=f["SCode"],p=f["SName"],d=+f["Chgradio"],a.push({code:l,name:p,change:d});t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](5),c=!0,o=t.t0;case 13:t.prev=13,t.prev=14,i||null==s["return"]||s["return"]();case 16:if(t.prev=16,!c){t.next=19;break}throw o;case 19:return t.finish(16);case 20:return t.finish(13);case 21:return t.abrupt("return",a);case 22:case"end":return t.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e,n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getUrl();case 3:return e=t.sent,t.next=6,l["a"].get(e,null);case 6:return n=t.sent,t.next=9,this.createStocks(n);case 9:return a=t.sent,console.log("#EastMoneyDragonTigerListCrawler# capture ".concat(this.name," ...")),t.abrupt("return",a);case 14:t.prev=14,t.t0=t["catch"](0),console.warn("#EastMoneyDragonTigerListCrawler# capture ".concat(this.name," fail"),t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),U=new H,J=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"marketCode",value:function(t){return F.marketCode(t)}},{key:"isTrading",value:function(){return F.isTrading()}},{key:"captureBlock",value:function(){return j.capture()}},{key:"captureList",value:function(t){return t===u["t"].key?U.capture():t===u["F"].key?F.index():new x(t).capture()}},{key:"captureStocks",value:function(t){return(new B).capture(t)}},{key:"captureStock",value:function(t){return new z(t).capture()}},{key:"captureWhitelist",value:function(t){return(new I).capture(t)}},{key:"captureFlows",value:function(t){return new A(t).capture()}},{key:"sseStart",value:function(t,e){return new T(t,e).start()}}]),t}(),P=new J,L=function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"ths",w),Object(s["a"])(this,"eastmoney",P),Object(s["a"])(this,"cache",{list:{}})}return Object(o["a"])(t,[{key:"isExpired",value:function(t){if(!t)return!0;var e=(new Date).getTime();return e-t.timestamp>18e4}},{key:"isTrading",value:function(){var t=Object(i["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",P.isTrading());case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureBlock",value:function(){var t=Object(i["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",P.captureBlock());case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureList",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[u["a"].key,u["z"].key,u["T"].key,u["D"].key,u["s"].key,u["kb"].key,u["C"].key,u["B"].key,u["Y"].key,u["H"].key,u["E"].key,u["A"].key,u["W"].key,u["d"].key,u["n"].key,u["hb"].key,u["fb"].key,u["bb"].key,u["gb"].key,u["cb"].key,u["db"].key,u["eb"].key,u["e"].key,u["r"].key],this.isExpired(this.cache.list[e])){t.next=3;break}return t.abrupt("return",this.cache.list[e].data);case 3:if(!n.includes(e)){t.next=9;break}return t.next=6,w.captureList(e);case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,P.captureList(e);case 11:a=t.sent;case 12:return this.cache.list[e]={data:a,timestamp:(new Date).getTime()},t.abrupt("return",a);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"captureStocks",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!f["a"].has(e)){t.next=2;break}return t.abrupt("return",f["a"].stocks(e));case 2:return t.abrupt("return",P.captureStocks(e));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"captureStock",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){var n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!f["a"].has([e])){t.next=2;break}return t.abrupt("return",f["a"].stocks([e])[e]);case 2:return t.next=4,P.captureStocks([e]);case 4:return n=t.sent,t.abrupt("return",n[e]);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"captureFlows",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",P.captureFlows(e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"captureWhitelist",value:function(){var t=Object(i["a"])(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",P.captureWhitelist(e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"sseStart",value:function(t,e){return P.sseStart(t,e)}}]),t}();e["a"]=new L},9313:function(t,e,n){"use strict";n("caad"),n("d3b7"),n("2532"),n("4795");var a=n("a34a"),r=n.n(a),i=(n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),s=n("ade3"),u=n("127d"),f=n("c1df"),l=n.n(f),p=function(){function t(){Object(c["a"])(this,t),Object(s["a"])(this,"randomIntervalTime",[5,30]),Object(s["a"])(this,"queue",[]),this.startCallbackInQueue()}return Object(o["a"])(t,[{key:"isWeekend",value:function(){var t=l()().weekday();return![1,2,3,4,5].includes(t)}},{key:"isTradingTime",value:function(){var t=+l()().format("HHmmss"),e=[92500,113e3],n=[13e4,15e4];return e[0]<=t&&t<=e[1]||n[0]<=t&&t<=n[1]}},{key:"isWeekdayTradingTime",value:function(){return!this.isWeekend()&&this.isTradingTime()}},{key:"startCallbackInQueue",value:function(){var t=Object(i["a"])(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,Object(u["a"])(100);case 3:if(this.queue.length){t.next=5;break}return t.abrupt("continue",0);case 5:return e=this.queue.shift(),t.next=8,e();case 8:t.next=0;break;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"interval",value:function(){var t=Object(i["a"])(r.a.mark((function t(e,n){var a,c,o=this,s=arguments;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:60,s.length>3?s[3]:void 0,c=setInterval(Object(i["a"])(r.a.mark((function t(){var a,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("."),a=!1,!a&&!o.isWeekdayTradingTime()){t.next=7;break}if(i=l()().format("HH:mm"),!n||n.includes(i)){t.next=6;break}return t.abrupt("return");case 6:o.queue.push(e);case 7:case"end":return t.stop()}}),t)}))),1e3*a),t.abrupt("return",c);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"wait",value:function(t){return Object(u["a"])(t)}},{key:"until",value:function(t,e){return new Promise((function(n){var a=setInterval((function(){var r=l()().format("HHmmss");+r>=+t&&(clearInterval(a),e&&e(),n())}),1e3)}))}},{key:"random",value:function(){var t=this.randomIntervalTime[0],e=this.randomIntervalTime[1],n=Math.floor(Math.random()*(e-t+1)+t);return Object(u["a"])(60*n*1e3)}}]),t}();e["a"]=new p},9801:function(t,e,n){var a,r;n("0d03"),n("acd8"),n("ac1f"),n("5319"),n("4795"),function(i){a=[n("1157")],r=function(t){return function(){var e,n,a,r=0,i={error:"error",info:"info",success:"success",warning:"warning"},c={clear:d,remove:h,error:o,getContainer:s,info:u,options:{},subscribe:f,success:l,version:"2.1.4",warning:p};return c;function o(t,e,n){return w({type:i.error,iconClass:g().iconClasses.error,message:t,optionsOverride:n,title:e})}function s(n,a){return n||(n=g()),e=t("#"+n.containerId),e.length||a&&(e=m(n)),e}function u(t,e,n){return w({type:i.info,iconClass:g().iconClasses.info,message:t,optionsOverride:n,title:e})}function f(t){n=t}function l(t,e,n){return w({type:i.success,iconClass:g().iconClasses.success,message:t,optionsOverride:n,title:e})}function p(t,e,n){return w({type:i.warning,iconClass:g().iconClasses.warning,message:t,optionsOverride:n,title:e})}function d(t,n){var a=g();e||s(a),k(t,a,n)||v(a)}function h(n){var a=g();e||s(a),n&&0===t(":focus",n).length?O(n):e.children().length&&e.remove()}function v(n){for(var a=e.children(),r=a.length-1;r>=0;r--)k(t(a[r]),n)}function k(e,n,a){var r=!(!a||!a.force)&&a.force;return!(!e||!r&&0!==t(":focus",e).length)&&(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){O(e)}}),!0)}function m(n){return e=t("<div/>").attr("id",n.containerId).addClass(n.positionClass),e.appendTo(t(n.target)),e}function b(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function y(t){n&&n(t)}function w(n){var i=g(),c=n.iconClass||i.iconClass;if("undefined"!==typeof n.optionsOverride&&(i=t.extend(i,n.optionsOverride),c=n.optionsOverride.iconClass||c),!E(i,n)){r++,e=s(i,!0);var o=null,u=t("<div/>"),f=t("<div/>"),l=t("<div/>"),p=t("<div/>"),d=t(i.closeHtml),h={intervalId:null,hideEta:null,maxHideTime:null},v={toastId:r,state:"visible",startTime:new Date,options:i,map:n};return m(),j(),w(),y(v),i.debug&&console&&console.log(v),u}function k(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(){x(),_(),C(),q(),M(),D(),S(),b()}function b(){var t="";switch(n.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}u.attr("aria-live",t)}function w(){i.closeOnHover&&u.hover(W,B),!i.onclick&&i.tapToDismiss&&u.click(T),i.closeButton&&d&&d.click((function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(t),T(!0)})),i.onclick&&u.click((function(t){i.onclick(t),T()}))}function j(){u.hide(),u[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),i.timeOut>0&&(o=setTimeout(T,i.timeOut),h.maxHideTime=parseFloat(i.timeOut),h.hideEta=(new Date).getTime()+h.maxHideTime,i.progressBar&&(h.intervalId=setInterval(F,10)))}function x(){n.iconClass&&u.addClass(i.toastClass).addClass(c)}function S(){i.newestOnTop?e.prepend(u):e.append(u)}function _(){if(n.title){var t=n.title;i.escapeHtml&&(t=k(n.title)),f.append(t).addClass(i.titleClass),u.append(f)}}function C(){if(n.message){var t=n.message;i.escapeHtml&&(t=k(n.message)),l.append(t).addClass(i.messageClass),u.append(l)}}function q(){i.closeButton&&(d.addClass(i.closeClass).attr("role","button"),u.prepend(d))}function M(){i.progressBar&&(p.addClass(i.progressClass),u.prepend(p))}function D(){i.rtl&&u.addClass("rtl")}function E(t,e){if(t.preventDuplicates){if(e.message===a)return!0;a=e.message}return!1}function T(e){var n=e&&!1!==i.closeMethod?i.closeMethod:i.hideMethod,a=e&&!1!==i.closeDuration?i.closeDuration:i.hideDuration,r=e&&!1!==i.closeEasing?i.closeEasing:i.hideEasing;if(!t(":focus",u).length||e)return clearTimeout(h.intervalId),u[n]({duration:a,easing:r,complete:function(){O(u),clearTimeout(o),i.onHidden&&"hidden"!==v.state&&i.onHidden(),v.state="hidden",v.endTime=new Date,y(v)}})}function B(){(i.timeOut>0||i.extendedTimeOut>0)&&(o=setTimeout(T,i.extendedTimeOut),h.maxHideTime=parseFloat(i.extendedTimeOut),h.hideEta=(new Date).getTime()+h.maxHideTime)}function W(){clearTimeout(o),h.hideEta=0,u.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}function F(){var t=(h.hideEta-(new Date).getTime())/h.maxHideTime*100;p.width(t+"%")}}function g(){return t.extend({},b(),c.options)}function O(t){e||(e=s()),t.is(":visible")||(t.remove(),t=null,0===e.children().length&&(e.remove(),a=void 0))}}()}.apply(e,a),void 0===r||(t.exports=r)}(n("07d6"))},"99de":function(t,e,n){"use strict";function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}n.d(e,"a",(function(){return i}));var r=n("257e");function i(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?Object(r["a"])(t):e}},a37f:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("b0c0");var a=n("d4ec"),r=n("ade3"),i=function t(e){var n=e.code,i=e.name,c=e.date,o=e.price,s=e.change,u=e.netinflow,f=e.netinflowrate;Object(a["a"])(this,t),Object(r["a"])(this,"code","000000"),Object(r["a"])(this,"name",void 0),Object(r["a"])(this,"date",void 0),Object(r["a"])(this,"price",void 0),Object(r["a"])(this,"change",void 0),Object(r["a"])(this,"netinflow",void 0),Object(r["a"])(this,"rate",void 0),Object(r["a"])(this,"netinflowrate",void 0),this.code=n,this.name=i,this.date=c,this.price=+o,this.change=+s,this.netinflow=+u,this.rate=+f,this.netinflowrate=+f}},a630:function(t,e,n){var a=n("23e7"),r=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:r})},acd8:function(t,e,n){var a=n("23e7"),r=n("7e12");a({global:!0,forced:parseFloat!=r},{parseFloat:r})},b868:function(t,e,n){"use strict";n("99af"),n("d3b7");var a=n("1157"),r=n.n(a),i=(n("b0c0"),n("a34a")),c=n.n(i),o=(n("96cf"),n("1da1")),s=n("127d");function u(t){return function(){var e=Object(o["a"])(c.a.mark((function e(){var n,a,r,i=arguments;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n>=3)){e.next=4;break}return e.abrupt("break",20);case 4:return console.log("#RetryWrapper# ".concat(t.name," call ").concat(n," time")),e.prev=5,e.next=8,t.apply(void 0,i);case 8:return a=e.sent,e.abrupt("return",a);case 12:return e.prev=12,e.t0=e["catch"](5),r=e.t0,e.next=17,Object(s["a"])(3e3);case 17:n++,e.next=1;break;case 20:throw r;case 21:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}()}var f=u,l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return window.parent.__Walle_Devtools?window.parent.__Walle_Devtools_Ajax({type:t,url:e,data:n,opts:a}):window.__Walle_Devtools?window.__Walle_Devtools_Ajax({type:t,url:e,data:n,opts:a}):new Promise((function(i,c){console.log("#ajax# request - ".concat(t," - ").concat(e," "),n),r.a.ajax(Object.assign({type:t,url:e,data:n,async:a.async||!0,dataType:a.dataType||"html",success:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.apply(void 0,e)},error:function(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];(t=console).log.apply(t,["#ajax# fail - "].concat(n)),c.apply(void 0,n)}},a))}))},p=function(t,e){var n;return t?(n="application/json"===e.contentType?JSON.stringify(t):r.a.param(t),n):t},d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=p(e,n);return l("POST",t,a,n)},h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=p(e,n);return f((function(){return l("GET",t,a,n)}))()},v=function(t){return new Promise((function(e,n){var a=document.createElement("img");a.src=t,a.onload=function(){return e(a)},a.onerror=n,a.onabort=n}))},k=function(t){return window.parent.__Walle_Devtools?window.parent.__Walle_Devtools_Download({url:t}):window.__Walle_Devtools?window.__Walle_Devtools_Download({url:t}):new Promise((function(e,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(){return e(a.response)},a.onerror=n,a.send(null)}))};e["a"]={ajax:l,post:d,get:h,getImage:v,getBinary:k}},bb2f:function(t,e,n){var a=n("d039");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c8d2:function(t,e,n){var a=n("d039"),r=n("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}},d81d:function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde"),c=n("ae40"),o=i("map"),s=c("map");a({target:"Array",proto:!0,forced:!o||!s},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},dd2e:function(t,e){(function(){var t=document.createElement("meta");t.setAttribute("http-equiv","Content-Security-Policy-Report-Only"),document.querySelector("head").appendChild(t)})()},f183:function(t,e,n){var a=n("d012"),r=n("861d"),i=n("5135"),c=n("9bf2").f,o=n("90e3"),s=n("bb2f"),u=o("meta"),f=0,l=Object.isExtensible||function(){return!0},p=function(t){c(t,u,{value:{objectID:"O"+ ++f,weakData:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,u)){if(!l(t))return"F";if(!e)return"E";p(t)}return t[u].objectID},h=function(t,e){if(!i(t,u)){if(!l(t))return!0;if(!e)return!1;p(t)}return t[u].weakData},v=function(t){return s&&k.REQUIRED&&l(t)&&!i(t,u)&&p(t),t},k=t.exports={REQUIRED:!1,fastKey:d,getWeakData:h,onFreeze:v};a[u]=!0}}]);