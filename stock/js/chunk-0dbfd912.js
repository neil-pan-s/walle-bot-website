(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dbfd912"],{"0644":function(e,t,r){var a=r("3818"),n=1,o=4;function i(e){return a(e,n|o)}e.exports=i},"12cc":function(e,t){e.exports={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1}},"26e9":function(e,t,r){"use strict";var a=r("23e7"),n=r("e8b5"),o=[].reverse,i=[1,2];a({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),o.call(this)}})},"2fe6":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));r("cb29");var a=r("d4ec"),n=r("ade3"),o={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(11, 188, 73)",blue:"rgb(120, 164, 250)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"},i=function e(t){Object(a["a"])(this,e),Object(n["a"])(this,"label",void 0),Object(n["a"])(this,"fill",void 0),Object(n["a"])(this,"backgroundColor",void 0),Object(n["a"])(this,"borderColor",void 0),Object(n["a"])(this,"data",void 0),Object.assign(this,t),this.fill=t.fill||!1,this.backgroundColor=t.backgroundColor||o.red,this.borderColor=t.borderColor||o.red}},"6f7a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"t0"},[r("ui-nav",[r("ui-nav-item",{attrs:{selected:"bond"===e.target}},[r("a",{on:{click:function(t){return e.onChangeTarget("bond")}}},[e._v("BOND")])]),r("ui-nav-item",{staticClass:"without",attrs:{selected:"future"===e.target}},[r("a",{on:{click:function(t){return e.onChangeTarget("future")}}},[e._v("FUTURE")])])],1),r("ui-nav",e._l(e.keys,(function(t){return r("ui-nav-item",{key:t,class:{without:t.includes("short")},attrs:{selected:e.key===t}},[r("a",{on:{click:function(r){return e.onChangeKey(t)}}},[e._v(e._s(t.toUpperCase()))])])})),1),r("ui-nav",[r("ui-nav-item",{attrs:{selected:1===+e.day},nativeOn:{click:function(t){return e.onChangeDay(1)}}},[e._v("周一")]),r("ui-nav-item",{attrs:{selected:2===+e.day},nativeOn:{click:function(t){return e.onChangeDay(2)}}},[e._v("周二")]),r("ui-nav-item",{attrs:{selected:3===+e.day},nativeOn:{click:function(t){return e.onChangeDay(3)}}},[e._v("周三")]),r("ui-nav-item",{attrs:{selected:4===+e.day},nativeOn:{click:function(t){return e.onChangeDay(4)}}},[e._v("周四")]),r("ui-nav-item",{attrs:{selected:5===+e.day},nativeOn:{click:function(t){return e.onChangeDay(5)}}},[e._v("周五")]),r("ui-nav-item",{nativeOn:{click:function(t){return e.onRealtime()}}},[e._v("实时")]),r("ui-nav-item",{nativeOn:{click:function(t){return e.onSimulator()}}},[e._v("回测")])],1),r("ui-nav",[r("ui-nav-item",{attrs:{selected:"total"===e.type}},[r("a",{on:{click:function(t){return e.onChangeType("total")}}},[e._v("交易汇总")])]),r("ui-nav-item",{attrs:{selected:"detail"===e.type}},[r("a",{on:{click:function(t){return e.onChangeType("detail")}}},[e._v("逐笔还原")])])],1),r("ul",{staticClass:"times"},[r("li",{directives:[{name:"show",rawName:"v-show",value:e.before,expression:"before"}],staticClass:"pre",on:{click:function(t){return e.onShowBefore()}}},[e._v(" ‹ "+e._s(e.before)+" ")]),r("li",[e._v(" "+e._s(e.tooltip)+" ")]),r("li",{directives:[{name:"show",rawName:"v-show",value:e.next,expression:"next"}],staticClass:"next",on:{click:function(t){return e.onShowNext()}}},[e._v(" "+e._s(e.next)+" › ")])]),r("ui-chart",{ref:"chart"})],1)},n=[],o=(r("99af"),r("cb29"),r("26e9"),r("b0c0"),r("b680"),r("b64b"),r("d3b7"),r("ac1f"),r("1276"),r("ddb0"),r("a34a")),i=r.n(o),c=(r("96cf"),r("1da1")),s=r("2fe6"),l=r("c1df"),u=r.n(l),d=r("38f7"),b=r("7366"),h=r.n(b),f={data:function(){return{day:u()().day(),targets:[],keys:[],target:"bond",type:"total",next:"",before:"",tooltip:"",console:!1}},mounted:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.targets=Object.keys(window.__Walle_Stock_T0.Controllers),e.onChangeTarget(e.targets[0]);case 2:case"end":return t.stop()}}),t)})))()},methods:{onSimulator:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:d["a"].simulator(e.target,e.key);case 1:case"end":return t.stop()}}),t)})))()},onRealtime:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("future"!==e.target){t.next=7;break}if(r=window.prompt("Please Input Future Code(eg. ag2007,pg2011)"),r){t.next=4;break}return t.abrupt("return");case 4:return a=r.split(","),a.length&&d["a"].open(e.target,e.key,a),t.abrupt("return");case 7:d["a"].open(e.target,e.key);case 8:case"end":return t.stop()}}),t)})))()},onChangeTarget:function(e){var t=this;return Object(c["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.target=e,t.keys=Object.keys(window.__Walle_Stock_T0.Controllers[t.target].Processors),t.key=t.keys[0],t.onChangeDay(t.day);case 4:case"end":return r.stop()}}),r)})))()},onChangeKey:function(e){var t=this;return Object(c["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.key=e,t.onChangeDay(t.day);case 2:case"end":return r.stop()}}),r)})))()},onChangeDay:function(e){var t=this;return Object(c["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.day=e,t.type="total",t.next="",t.before="",t.tooltip="",t.$refs.chart&&t.$refs.chart.clear(),r.next=8,d["a"].load(t.target,t.key,e);case 8:return r.next=10,t.onChangeType("total");case 10:case"end":return r.stop()}}),r)})))()},onChangeType:function(e){var t=this;return Object(c["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.type=e,"total"===e?t.onShowTotalChart():t.onShowDetailChart();case 2:case"end":return r.stop()}}),r)})))()},onShowBefore:function(){d["a"].stepToBefore(),this.onShowDetailChart()},onShowNext:function(){d["a"].stepToNext(),this.onShowDetailChart()},onShowTotalChart:function(){if(this.$refs.chart){var e=d["a"].total();if(d["a"].date()){this.next="",this.before="",this.tooltip="".concat(d["a"].date()," 总收益: ").concat(e.profits,"% 次数: ").concat(e.times," 胜率: ").concat(e.rate.win,"% 单笔收益: ").concat(e.rate.average,"%");var t=[new s["a"]({label:"Stocks Total PTCChange",backgroundColor:s["b"].red,borderColor:s["b"].red,data:e["profit"]}),new s["a"]({label:"Stock PTCChange",backgroundColor:s["b"].yellow,borderColor:s["b"].yellow,data:e["change"]})],r=e.time.reverse();this.$refs.chart.update({labels:r,datasets:t})}}},onShowDetailChart:function(){if(this.$refs.chart&&d["a"].date()){var e=d["a"].next(),t=d["a"].before();this.next=e&&u()(e,"HHmmss").format("HH:mm:ss"),this.before=t&&u()(t,"HHmmss").format("HH:mm:ss");var r=d["a"].current(),a=d["a"].detail(r),n=a.buy.change||0,o=a.sell.change||0;a.code&&a.name&&(this.tooltip="".concat(a.code," ").concat(a.name," ").concat(+(o-n).toFixed(2),"%"));var i=h()(a),c=i.trend.time,l=function(e,t,r){var a=new Array(e.length).fill(NaN);for(var n in e)if(+t>=+e[n]){a[n]=r;break}return a.reverse()},b=[new s["a"]({label:"Stock Buy Point",backgroundColor:s["b"].blue,borderColor:s["b"].blue,pointRadius:5,data:l(c,i.buy.time,i.buy.price)}),new s["a"]({label:"Stock Sell Point",backgroundColor:s["b"].green,borderColor:s["b"].green,pointRadius:5,data:l(c,i.sell.time,i.sell.price)}),new s["a"]({label:"Stock Price",backgroundColor:s["b"].red,borderColor:s["b"].red,data:i.trend.price.reverse()}),new s["a"]({label:"Stock MA5",backgroundColor:s["b"].orange,borderColor:s["b"].orange,data:i.trend.ma5.reverse()}),new s["a"]({label:"Stock MA10",hidden:!0,backgroundColor:s["b"].yellow,borderColor:s["b"].yellow,data:i.trend.ma10.reverse()}),new s["a"]({label:"Stock MA20",hidden:!0,backgroundColor:s["b"].grey,borderColor:s["b"].grey,data:i.trend.ma20.reverse()}),new s["a"]({label:"Stock Change",hidden:!0,backgroundColor:s["b"].orange,borderColor:s["b"].orange,data:i.trend.change.reverse()}),new s["a"]({label:"Stock Rate",hidden:!0,backgroundColor:s["b"].purple,borderColor:s["b"].purple,data:i.trend.rate.reverse()})];this.$refs.chart.update({labels:c,datasets:b})}}}},v=f,g=(r("95d1"),r("2877")),p=Object(g["a"])(v,a,n,!1,null,"0a1882c2",null);t["default"]=p.exports},7366:function(e,t,r){var a=r("b190"),n=a("cloneDeep",r("0644"),r("12cc"));n.placeholder=r("c2e4"),e.exports=n},"81d5":function(e,t,r){"use strict";var a=r("7b0b"),n=r("23cb"),o=r("50c4");e.exports=function(e){var t=a(this),r=o(t.length),i=arguments.length,c=n(i>1?arguments[1]:void 0,r),s=i>2?arguments[2]:void 0,l=void 0===s?r:n(s,r);while(l>c)t[c++]=e;return t}},"95d1":function(e,t,r){"use strict";var a=r("c4fc"),n=r.n(a);n.a},c4fc:function(e,t,r){},cb29:function(e,t,r){var a=r("23e7"),n=r("81d5"),o=r("44d2");a({target:"Array",proto:!0},{fill:n}),o("fill")}}]);