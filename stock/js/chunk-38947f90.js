(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38947f90"],{"0ae6":function(t,e,r){"use strict";r.r(e);var n=r("a34a"),a=r.n(n),s=(r("96cf"),r("1da1")),i=r("d4ec"),o=r("bee2"),c=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("5530")),u=r("ade3"),h=function t(e){var r=e.capture,n=e.trace,a=e.interval,s=e.lists,o=e.date,c=e.name;Object(i["a"])(this,t),Object(u["a"])(this,"capture",void 0),Object(u["a"])(this,"trace",[]),Object(u["a"])(this,"interval",void 0),Object(u["a"])(this,"lists",void 0),Object(u["a"])(this,"date",void 0),Object(u["a"])(this,"name",void 0),this.capture=r,this.trace=n,this.interval=a,this.lists=s,this.name=c,this.date=o},l=(r("caad"),r("b64b"),r("ac1f"),r("2532"),r("466d"),r("2ca0"),r("0cae")),f=(r("4160"),r("fb6a"),r("0d03"),r("b680"),r("25f0"),r("1276"),r("159b"),r("3835")),p=r("90d5"),v=r("1797"),d=(r("4e82"),r("07ac"),r("4795"),r("1e4d")),b=r("9313"),m=r("2894"),y=r("a37f"),g=r("127d"),w=r("c1df"),k=r.n(w),x=r("a002"),O=r.n(x),j="1.000001",S=O.a.createInstance({name:"flow",driver:O.a.INDEXEDDB}),T=function(){function t(){var e=this;Object(i["a"])(this,t),Object(u["a"])(this,"flows",{}),Object(u["a"])(this,"maOfFlows",{}),Object(u["a"])(this,"continueOfFlows",{}),Object(u["a"])(this,"topOfFlows",{rate:[],change:[],limitup:[]}),Object(u["a"])(this,"lastFlowDate","");var r=parent.location.hash||location.hash,n=r.includes("9529");setTimeout(Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return console.info("#Flows# force download start ..."),t.next=4,e.download();case 4:return console.info("#Flows# force download end ..."),t.abrupt("return");case 6:return t.next=8,e.load();case 8:return t.next=10,e.calcContinue();case 10:return t.next=12,e.calcTop();case 12:return t.next=14,e.update();case 14:case"end":return t.stop()}}),t)}))))}return Object(o["a"])(t,[{key:"load",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.length();case 3:if(e=t.sent,e){t.next=7;break}return console.log("#Flows# flows not exist!"),t.abrupt("return");case 7:return t.next=9,S.iterate((function(t,e){t&&(r.flows[e]=t)}));case 9:this.lastFlowDate=this.flows[j][0].date,console.info("#Flows# load flows ".concat(e," date ").concat(this.lastFlowDate," ...")),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.warn("#Flows# load flows fail ",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e in this.flows)this.flows[e].length>30&&(this.flows[e]=this.flows[e].slice(0,30)),S.setItem(e,this.flows[e]);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"download",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=d["a"].stocks(),e=[].concat(e,j),console.time("Flows Download"),r=!0,n=!1,s=void 0,t.prev=7,i=e[Symbol.iterator]();case 9:if(r=(o=i.next()).done){t.next=19;break}return c=o.value,t.next=13,p["a"].captureFlows(c);case 13:return this.flows[c]=t.sent,t.next=16,Object(g["a"])(50);case 16:r=!0,t.next=9;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](7),n=!0,s=t.t0;case 25:t.prev=25,t.prev=26,r||null==i["return"]||i["return"]();case 28:if(t.prev=28,!n){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(25);case 33:console.timeEnd("Flows Download"),this.save(),t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](0),console.warn("#Flows# download flows fail ",t.t1);case 40:case"end":return t.stop()}}),t,this,[[0,37],[7,21,25,33],[26,,28,32]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l,f,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.length();case 2:if(e=t.sent,e){t.next=6;break}return console.log("#Flows# flows not exist, update exit !"),t.abrupt("return");case 6:if(b["a"].isWeekend()){t.next=31;break}return t.next=9,b["a"].until("150000");case 9:console.info("#Flows# auto update daily ..."),r=m["a"].stocks(),n=k()().format("YYYYMMDD"),t.t0=a.a.keys(r);case 13:if((t.t1=t.t0()).done){t.next=30;break}if(s=t.t1.value,t.prev=15,i=r[s],o=i.name,c=i.price,u=i.change,h=i.netinflow,l=i.rate,f=this.flows[s][0],!(f&&+f.date>=+n)){t.next=20;break}return t.abrupt("continue",13);case 20:if(f.price!==c||f.rate!==l||f.netinflow!==h){t.next=22;break}return t.abrupt("continue",13);case 22:p=new y["a"]({code:s,name:o,date:n,price:c,change:u,netinflow:h,netinflowrate:l}),this.flows[s].unshift(p),t.next=28;break;case 26:t.prev=26,t.t2=t["catch"](15);case 28:t.next=13;break;case 30:this.save();case 31:case"end":return t.stop()}}),t,this,[[15,26]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"downloadDaily",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=k()().format("YYYYMMDD"),r=k()().format("HHmmss"),n=k()().subtract(1,"day").format("YYYYMMDD"),1===+k()().day()&&(n=k()().subtract(3,"days").format("YYYYMMDD")),!(e===this.lastFlowDate||n<=this.lastFlowDate)){t.next=6;break}return t.abrupt("return");case 6:if(!(+r>=15e4)){t.next=8;break}return t.abrupt("return");case 8:if(b["a"].isWeekend()){t.next=17;break}return s=Math.floor(58*Math.random())+1,i="00".concat(s).slice(-2),o="07"+i+"00",console.info("#Flows# auto download daily at ".concat(o," ...")),t.next=15,b["a"].until(o);case 15:return t.next=17,this.download();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"has",value:function(t){return!!this.flows[t]&&this.flows[t]}},{key:"flow",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.has(e)){t.next=2;break}return t.abrupt("return",this.capture(e));case 2:return t.abrupt("return",this.flows[e]);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.flows[e]=p["a"].captureFlows(e),t.abrupt("return",this.flows[e]);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcContinue",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=a.a.keys(this.flows);case 1:if((t.t1=t.t0()).done){t.next=12;break}return e=t.t1.value,r=this.flows[e],n=r[0]?r[0].name:"",t.next=7,_.isValidStock(e,n);case 7:if(t.sent){t.next=9;break}return t.abrupt("continue",1);case 9:this.calcContinueCore(e,n,r),t.next=1;break;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcContinueCore",value:function(t,e,r){this.continueOfFlows[t]={code:t,name:e,rate:0,change:0,limitup:0};var n=!0,a=!1,s=void 0;try{for(var i,o=r[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value,u=(c.change,c.rate);if(!(u>0))break;this.continueOfFlows[t].rate+=1}}catch(j){a=!0,s=j}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw s}}var h=!0,l=!1,f=void 0;try{for(var p,v=r[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var d=p.value,b=d.change;d.rate;if(!(b>0))break;this.continueOfFlows[t].change+=1}}catch(j){l=!0,f=j}finally{try{h||null==v["return"]||v["return"]()}finally{if(l)throw f}}var m=!0,y=!1,g=void 0;try{for(var w,k=r[Symbol.iterator]();!(m=(w=k.next()).done);m=!0){var x=w.value,O=x.change;x.rate;if(!(O>=9.8))break;this.continueOfFlows[t].limitup+=1}}catch(j){y=!0,g=j}finally{try{m||null==k["return"]||k["return"]()}finally{if(y)throw g}}}},{key:"calcTop",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calcTopCore("rate"),this.calcTopCore("change"),this.calcTopCore("limitup");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcTopCore",value:function(t){var e=Object.values(this.continueOfFlows),r=e.sort((function(e,r){return r[t]-e[t]}));this.topOfFlows[t]=r,console.info("#Flow# top continue ".concat(t," stocks ...")),console.table(this.topOfFlows[t].slice(0,20))}},{key:"ma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{var r=0,n=0,a=this.flows[t],s=m["a"].stocks([t])[t],i=k()().format("YYYYMMDD");r+=+s.price,n++;var o=!0,c=!1,u=void 0;try{for(var h,l=a[Symbol.iterator]();!(o=(h=l.next()).done);o=!0){var f=h.value,p=f.price,v=f.date;if(i!==v&&(r+=p,n++,n===e))break}}catch(d){c=!0,u=d}finally{try{o||null==l["return"]||l["return"]()}finally{if(c)throw u}}return+(r/n).toFixed(2)}catch(b){return 0}}},{key:"top",value:function(t){return this.topOfFlows[t]}},{key:"continue",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.continueOfFlows[e]){t.next=3;break}return t.abrupt("return",this.continueOfFlows[e][r]);case 3:return t.next=5,this.flow(e);case 5:return n=t.sent,s=n[0]?n[0].name:"",this.calcContinueCore(e,s,n),t.abrupt("return",this.continueOfFlows[e][r]);case 11:return t.prev=11,t.t0=t["catch"](0),t.abrupt("return",0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),E=new T,D="1.000001",P=function(){function t(e,r,n,a,s){Object(i["a"])(this,t),Object(u["a"])(this,"$valid",{rateRatio:.6,averageChange2:.2,bigChange:6}),Object(u["a"])(this,"range",{change:[null,null],price:[null,null],rate:[null,null],amount:[null,null]}),Object(u["a"])(this,"day",{rise:0,down:0,bigRise:0,bigDown:0}),Object(u["a"])(this,"fundamental",{eps:0,bvps:0,roe:0}),Object(u["a"])(this,"index",{days:0,daysRatio:0,changeUpRatio:0,changeDownRatio:0}),Object(u["a"])(this,"ratio",{mainRatio:0,abnormalRatio:0,lockRatio:0,onePercentRate:0,onePercentAmount:0}),Object(u["a"])(this,"longterm",{days:0,averagePrice:0,change:0,rate:0,amount:0}),Object(u["a"])(this,"shortterm",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(u["a"])(this,"limitup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(u["a"])(this,"riseup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(u["a"])(this,"rateup",{days:0,change:0,averageChange:0,averageRate:0,averageChange2:0}),Object(u["a"])(this,"code",void 0),Object(u["a"])(this,"name",void 0),Object(u["a"])(this,"stock",void 0),Object(u["a"])(this,"vtype",void 0),Object(u["a"])(this,"validator",void 0),Object(u["a"])(this,"flow",[]),Object(u["a"])(this,"gene",{}),this.code=e,this.stock=r,this.flow=n,this.vtype=s;var o=!0,c=!1,h=void 0;try{for(var l,f=v["a"].validators[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var p=l.value;if(p.name===s){this.validator=new _(p);break}}}catch(d){c=!0,h=d}finally{try{o||null==f["return"]||f["return"]()}finally{if(c)throw h}}Object.assign(this,a),r&&(this.name=r.name)}return Object(o["a"])(t,[{key:"toMoney",value:function(t){return t=Math.abs(+t)>=1e8?(+t/1e8).toFixed(2)+"亿":(+t/1e4).toFixed(2)+"万",t}},{key:"analyse",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.flow||!this.flow.length){t.next=25;break}return t.next=4,this.calcFundamental();case 4:return t.next=6,this.calcDays();case 6:return t.next=8,this.calcRange();case 8:return t.next=10,this.calcLimitup();case 10:return t.next=12,this.calcRiseup();case 12:return t.next=14,this.calcRateup();case 14:return t.next=16,this.calcLongterm();case 16:return t.next=18,this.calcShortterm();case 18:return t.next=20,this.calcRatio();case 20:if(this.code===D){t.next=23;break}return t.next=23,this.calcIndex();case 23:return t.next=25,this.calcGene();case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](0),console.warn("#Gene# analyse fail ",this.code,t.t0);case 30:return t.abrupt("return",this);case 31:case"end":return t.stop()}}),t,this,[[0,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcRange",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,a=this.flow[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value,i=s.price,o=s.change,c=s.rate,u=s.netinflow;null===this.range.price[0]&&(this.range.price[0]=i),null===this.range.price[1]&&(this.range.price[1]=i),i<this.range.price[0]&&(this.range.price[0]=i),i>this.range.price[1]&&(this.range.price[1]=i),null===this.range.change[0]&&(this.range.change[0]=o),null===this.range.change[1]&&(this.range.change[1]=o),o<this.range.change[0]&&(this.range.change[0]=o),o>this.range.change[1]&&(this.range.change[1]=o),null===this.range.amount[0]&&(this.range.amount[0]=u),null===this.range.amount[1]&&(this.range.amount[1]=u),u<this.range.amount[0]&&(this.range.amount[0]=u),u>this.range.amount[1]&&(this.range.amount[1]=u),null===this.range.rate[0]&&(this.range.rate[0]=c),null===this.range.rate[1]&&(this.range.rate[1]=c),c<this.range.rate[0]&&(this.range.rate[0]=c),c>this.range.rate[1]&&(this.range.rate[1]=c)}}catch(h){e=!0,r=h}finally{try{t||null==a["return"]||a["return"]()}finally{if(e)throw r}}this.range.price[0]=+this.range.price[0].toFixed(2),this.range.price[1]=+this.range.price[1].toFixed(2),this.range.change[0]=+this.range.change[0].toFixed(2),this.range.change[1]=+this.range.change[1].toFixed(2),this.range.amount[0]=+this.range.amount[0].toFixed(2),this.range.amount[1]=+this.range.amount[1].toFixed(2),this.range.rate[0]=+this.range.rate[0].toFixed(2),this.range.rate[1]=+this.range.rate[1].toFixed(2)}},{key:"calcDays",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,a=this.flow[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value.change;s>=0?this.day.rise++:this.day.down++,s>=this.$valid.bigChange&&this.day.bigRise++,s<=-this.$valid.bigChange&&this.day.bigDown++}}catch(i){e=!0,r=i}finally{try{t||null==a["return"]||a["return"]()}finally{if(e)throw r}}}},{key:"calcIndex",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=0,r=0,n=0,s=0,i=0,t.next=3,L.gene(D,this.vtype);case 3:o=t.sent,c=o.flow,this.flow.forEach((function(t,a){var o=c[a];o&&t.date===o.date&&(t.change>0&&o.change>0&&(e++,r+=t.change,s+=o.change),t.change<0&&o.change<0&&(e++,n+=t.change,i+=o.change))})),this.index.days=e,this.index.daysRatio=+(e/this.flow.length).toFixed(2),this.index.changeUpRatio=+(r/s).toFixed(2),this.index.changeDownRatio=-(n/i).toFixed(2);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcFundamental",value:function(){this.fundamental.eps=+this.stock.eps.toFixed(2),this.fundamental.bvps=+this.stock.bvps.toFixed(2),this.fundamental.roe=+this.stock.roe.toFixed(2)}},{key:"calcLongterm",value:function(){var t=0,e=!0,r=!1,n=void 0;try{for(var a,s=this.flow[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value,o=i.price,c=i.change,u=i.rate,h=i.netinflow;this.longterm.change+=c,this.longterm.rate+=u,this.longterm.amount+=h,this.longterm.days++,t+=o}}catch(l){r=!0,n=l}finally{try{e||null==s["return"]||s["return"]()}finally{if(r)throw n}}this.longterm.averagePrice=+(t/this.flow.length).toFixed(2),this.longterm.change=+this.longterm.change.toFixed(2),this.longterm.rate=+this.longterm.rate.toFixed(2),this.longterm.amount=+this.longterm.amount.toFixed(2)}},{key:"calcShorttermFun",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c,u,h,l,f,p,v,d;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0,s=0,i=0,o=0,t.t0=a.a.keys(this.flow);case 2:if((t.t1=t.t0()).done){t.next=16;break}return c=t.t1.value,u=this.flow[c],h=u.code,l=u.name,f=u.price,p=u.change,v=u.rate,t.next=7,r({code:h,name:l,price:f,change:p,rate:v});case 7:if(t.sent){t.next=9;break}return t.abrupt("continue",2);case 9:n++,i+=p,s+=v,d=this.flow[+c+1],d&&(o+=+d.change),t.next=2;break;case 16:n>0&&(e.days=n,e.change=+o.toFixed(2),e.averageChange=+(i/n).toFixed(2),e.averageRate=+(s/n).toFixed(2),e.averageChange2=+(o/n).toFixed(2));case 17:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"calcShortterm",value:function(){return this.calcShorttermFun(this.shortterm,function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.code,e.name,e.price,r=e.change,n=e.rate,t.abrupt("return",r>0&&n>0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"calcLimitup",value:function(){return this.calcShorttermFun(this.limitup,(function(t){t.code,t.name,t.price;var e=t.change,r=t.rate;return e>=9&&r>0}))}},{key:"calcRiseup",value:function(){var t=this;return this.calcShorttermFun(this.riseup,(function(e){e.code,e.name,e.price;var r=e.change,n=e.rate;return r>=t.$valid.bigChange&&n>0}))}},{key:"calcRateup",value:function(){var t=this;return this.calcShorttermFun(this.rateup,(function(e){e.code,e.name,e.price,e.change;var r=e.rate;return r>t.range.rate[1]*t.$valid.rateRatio}))}},{key:"isValidShortterm",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.code,e.change,r=e.rate,n={},t.next=4,this.calcShorttermFun(n,(function(t){t.code,t.name,t.price,t.change;var e=t.rate;return Math.abs((e-r)/r)>=.2}));case 4:return t.abrupt("return",n.averageChange2>=this.$valid.averageChange2);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcRatio",value:function(){var t=0,e=0,r=0,n=this.flow.slice(-1)[0],a=!0,s=!1,i=void 0;try{for(var o,c=this.flow[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,h=u.change,l=u.rate,f=u.netinflow;h>0&&l>0&&(t+=l,e+=f,r+=h)}}catch(p){s=!0,i=p}finally{try{a||null==c["return"]||c["return"]()}finally{if(s)throw i}}this.ratio.onePercentRate=+(t/r).toFixed(2),this.ratio.onePercentAmount=+(e/r).toFixed(2),this.ratio.mainRatio=+(this.longterm.rate/this.longterm.days).toFixed(2),this.ratio.abnormalRatio=+((this.day.bigRise+this.day.bigDown)/this.longterm.days).toFixed(2),this.ratio.lockRatio=+(+n.price/this.longterm.averagePrice).toFixed(2)}},{key:"calcGene",value:function(){this.gene.ratio={mainRatio:this.ratio.mainRatio,abnormalRatio:this.ratio.abnormalRatio,lockRatio:this.ratio.lockRatio,onePercentRate:this.ratio.onePercentRate,onePercentAmount:this.toMoney(this.ratio.onePercentAmount)},this.gene.shortterm=this.shortterm,this.gene.longterm={days:this.longterm.days,averagePrice:this.longterm.averagePrice,change:this.longterm.change,rate:this.longterm.rate,amount:this.toMoney(this.longterm.amount)},this.gene.limitup=this.limitup,this.gene.riseup=this.riseup,this.gene.rateup=this.rateup,this.gene.day=this.day,this.gene.range={change:this.range.change.toString(),price:this.range.price.toString(),rate:this.range.rate.toString(),amount:[this.toMoney(this.range.amount[0]),this.toMoney(this.range.amount[1])]},this.gene.index=this.index,this.gene.fundamental=this.fundamental}},{key:"show",value:function(){for(var t in this.gene)console.info("%c".concat(this.code,".").concat(t.toUpperCase()),"padding-left: 45%; color:#FFC107;"),console.table(this.gene[t])}},{key:"getFlow",value:function(){return this.flow}},{key:"getGene",value:function(){return this.gene}},{key:"toString",value:function(){var t="";for(var e in this.gene){var r=this.gene[e];for(var n in r)t+="".concat(e,".").concat(n,": ").concat(r[n].toString(),"  ")}return t}}]),t}(),B=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"genes",{}),Object(u["a"])(this,"vtypes",{});var e=!0,r=!1,n=void 0;try{for(var a,s=v["a"].validators[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value,c=o.name,h=o.rule["gene"],l={};for(var p in h)if(p.startsWith("$")){var d=p.split("."),b=Object(f["a"])(d,2),m=b[0],y=b[1];l[m]||(l[m]={}),l[m][y]=+h[p]}this.vtypes[c]=l}}catch(g){r=!0,n=g}finally{try{e||null==s["return"]||s["return"]()}finally{if(r)throw n}}}return Object(o["a"])(t,[{key:"has",value:function(t,e){return!!this.genes[e]&&this.genes[e][t]}},{key:"param",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.vtypes[e]||{});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"gene",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.has(e,r)){t.next=3;break}return t.next=3,this.capture(e,r);case 3:return t.abrupt("return",this.genes[r][e]);case 4:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.has(e,r)){t.next=3;break}return t.abrupt("return",this.gene(e,r));case 3:return t.next=5,Promise.all([E.flow(e),p["a"].captureStock(e)]);case 5:return n=t.sent,s=Object(f["a"])(n,2),i=s[0],o=s[1],t.next=11,new P(e,o,i,this.vtypes[r],r).analyse();case 11:return c=t.sent,this.genes[r]||(this.genes[r]={}),this.genes[r][e]=c,t.abrupt("return",c);case 17:t.prev=17,t.t0=t["catch"](0),console.warn("#Genes# capture fail ",r,e,t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),L=new B,R=r("2909"),C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[],values:[]};return Function.apply(void 0,Object(R["a"])(e.keys).concat(['"use strict";return ('.concat(t,")")])).apply(void 0,Object(R["a"])(e.values))},I=C,M=r("776f"),F=9.8,_=function(){function t(e){Object(i["a"])(this,t),this.config=e}return Object(o["a"])(t,[{key:"hasCaptureRule",value:function(t){return this.config.capture.includes(t)}},{key:"hasIntervalRule",value:function(t){return this.config.interval.includes(t)}},{key:"filter",value:function(){var e=Object(s["a"])(a.a.mark((function e(r,n){var s,i,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n.code,n.name,n.price,n.change,n.rate,n.turnover,n.qrr,n.eps,n.bvps,n.roe,s=this.config.capture,i=M["lb"].getIntervalKeys(),i.includes(r)&&(s=this.config.interval),o=M["lb"].getBondKeys(),o.includes(r)){e.next=11;break}return e.next=9,t.filterOfList(n);case 9:if(e.sent){e.next=11;break}return e.abrupt("return",!1);case 11:if(![M["F"].key,M["t"].key].includes(r)){e.next=13;break}return e.abrupt("return",!0);case 13:if(!s.includes("base")){e.next=18;break}return e.next=16,this.isValidBase(n);case 16:if(e.sent){e.next=18;break}return e.abrupt("return",!1);case 18:if(!s.includes("fundamental")){e.next=23;break}return e.next=21,this.isValidFundamental(n);case 21:if(e.sent){e.next=23;break}return e.abrupt("return",!1);case 23:if(!s.includes("whitelist")){e.next=28;break}return e.next=26,this.isValidWhitelist(n);case 26:if(e.sent){e.next=28;break}return e.abrupt("return",!1);case 28:if(!s.includes("gene")){e.next=33;break}return e.next=31,this.isValidGeneAnalyse(n.code,n);case 31:if(e.sent){e.next=33;break}return e.abrupt("return",!1);case 33:return e.abrupt("return",!0);case 36:return e.prev=36,e.t0=e["catch"](0),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,this,[[0,36]])})));function r(t,r){return e.apply(this,arguments)}return r}()},{key:"filterOfPreTrace",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c,u,h,l,f,p,v,d,b,m,y,g;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.config.capture,n.includes("pre-trace")){t.next=3;break}return t.abrupt("return",!0);case 3:if(s=this.config.rule["pre-trace"],s){t.next=6;break}return t.abrupt("return",!0);case 6:i=Object.keys(e),o=0,c=i;case 8:if(!(o<c.length)){t.next=22;break}if(u=c[o],![M["F"].key,M["t"].key].includes(u)){t.next=12;break}return t.abrupt("continue",19);case 12:if(h=e[u],l=r[u],h&&l){t.next=16;break}return t.abrupt("continue",19);case 16:for(v in f=h.getStocks(),p=l.getStocks(),f)for(m in d=f[v],b=p[v],s)y=(b[m]-d[m])/d[m],g="".concat(y).concat(s[m]),I(g)||(console.info("#Validator# filter stock of PreTrace",u,d.code,d.name,d.price,d.change,m,"[ ",b[m]," - ",d[m],s[m]," ]"),delete f[v]);case 19:o++,t.next=8;break;case 22:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"check",value:function(t,e,r,n){if(!t)return!0;try{for(var a=Object.keys(t),s=0,i=a;s<i.length;s++){var o=i[s],c=I("data.".concat(o),{keys:["data"],values:[e]}),u="".concat(c).concat(t[o]);if(void 0!==c&&!I(u))return!1}}catch(h){}return!0}},{key:"isFullRequiredFields",value:function(t){var e=new l["a"]({});for(var r in e)if(!t.hasOwnProperty(r))return!1;return!0}},{key:"isValidBase",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.code,n=e.name,e.price,e.change,e.rate,e.turnover,e.qrr,t.abrupt("return",this.check(this.config.rule.base,e,r,n));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidWhitelist",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.code,e.name,d["a"].whitelist().has(r)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidFundamental",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.config.rule.fundamental,r){t.next=3;break}return t.abrupt("return",!0);case 3:return t.abrupt("return",this.check(r,e,e.code,e.name));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isValidGeneAnalyse",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.config.rule["gene"],n){t.next=3;break}return t.abrupt("return",!0);case 3:return s=this.config.name,t.next=6,L.gene(e,s);case 6:return i=t.sent,t.next=9,i.isValidShortterm(r);case 9:if(t.sent){t.next=11;break}return t.abrupt("return",!1);case 11:o={},t.t0=a.a.keys(n);case 13:if((t.t1=t.t0()).done){t.next=20;break}if(c=t.t1.value,!c.startsWith("$")){t.next=17;break}return t.abrupt("continue",13);case 17:o[c]=n[c],t.next=13;break;case 20:return t.abrupt("return",this.check(o,i,i.code,i.name));case 21:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()}],[{key:"filterOfList",value:function(){var e=Object(s["a"])(a.a.mark((function e(r){var n,s,i,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.code,s=r.name,i=r.price,o=r.change,r.rate,r.turnover,r.qrr,!(o>F||i<=0)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",t.isValidStock(n,s));case 4:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()},{key:"isValidStock",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.toUpperCase().includes("ST")){t.next=2;break}return t.abrupt("return",!1);case 2:if(!r.toUpperCase().includes("B")&&!r.toUpperCase().includes("Ｂ")){t.next=4;break}return t.abrupt("return",!1);case 4:if(!r.includes("退")){t.next=6;break}return t.abrupt("return",!1);case 6:if(!r.match(/\d+/g)){t.next=8;break}return t.abrupt("return",!1);case 8:if(!("".concat(e).startsWith("688")||"".concat(e).startsWith("300")||"".concat(e).startsWith("200")||"".concat(e).startsWith("900"))){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),A=(r("4de4"),r("99de")),V=r("7e84"),N=r("262e"),H=function(){function t(e){Object(i["a"])(this,t),Object(u["a"])(this,"name",void 0),this.name=e}return Object(o["a"])(t,[{key:"filter",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(t,e,r){window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:{name:t,vtype:e,stock:r}}))}},{key:"monitor",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r||(r=new _(v["a"].validators[0])),n=r.config.name,s=!0,i=!1,o=void 0,t.prev=6,c=e[Symbol.iterator]();case 8:if(s=(u=c.next()).done){t.next=25;break}if(h=u.value,r.isFullRequiredFields(h)){t.next=14;break}return t.next=13,p["a"].captureStock(h.code);case 13:h=t.sent;case 14:return t.next=16,r.filter(this.name,h);case 16:if(t.sent){t.next=18;break}return t.abrupt("continue",22);case 18:return t.next=20,this.filter(h);case 20:if(!t.sent){t.next=22;break}this.broadcast(this.name,n,h);case 22:s=!0,t.next=8;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](6),i=!0,o=t.t0;case 31:t.prev=31,t.prev=32,s||null==c["return"]||c["return"]();case 34:if(t.prev=34,!i){t.next=37;break}throw o;case 37:return t.finish(34);case 38:return t.finish(31);case 39:t.next=43;break;case 41:t.prev=41,t.t1=t["catch"](0);case 43:case"end":return t.stop()}}),t,this,[[0,41],[6,27,31,39],[32,,34,38]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),q=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M["K"].key,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(i["a"])(this,e),t=Object(A["a"])(this,Object(V["a"])(e).call(this,r)),t.minContinueDays=n,t}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"filter",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.minContinueDays){t.next=6;break}return t.next=3,E["continue"](e.code,"limitup");case 3:if(r=t.sent,!(r<this.minContinueDays)){t.next=6;break}return t.abrupt("return",!1);case 6:return t.abrupt("return",+e.change>=9.5);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{b["a"].interval(Object(s["a"])(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,t.next=4,m["a"].listOfStocks("netinflow");case 4:return r=t.sent,r=r.slice(0,200),t.next=8,e.monitor(r);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](0),console.warn("#diggers# capture fail",t.t1);case 17:case"end":return t.stop()}}),t,null,[[0,14],[1,10]])}))),null,30)}catch(r){}case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(H),Y=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M["M"].key,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(i["a"])(this,e),t=Object(A["a"])(this,Object(V["a"])(e).call(this,r)),t.dayOfMa=n,t}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"filter",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E.ma(e.code,this.dayOfMa),t.abrupt("return",+e.price<r);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(H),K=r("257e");function U(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(V["a"])(t),null===t)break;return t}function W(t,e,r){return W="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=U(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}},W(t,e,r||t)}var z=r("7366"),G=r.n(z),Z=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i["a"])(this,t),Object(u["a"])(this,"name",void 0),Object(u["a"])(this,"origin",{}),Object(u["a"])(this,"stocks",{}),this.name=e,this.origin=G()(n),this.stocks=G()(a),window.addEventListener("__Walle_Stock_Ignore_Event",(function(t){var e=t.detail;r.ignore(e)}))}return Object(o["a"])(t,[{key:"filter",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"buy";window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:{name:t,vtype:e,stock:r,tradetype:n}}))}},{key:"ignore",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.time,n=e.vtype,s=e.listkey,i=e.code,t.prev=1,"interval"!==r||"v0"!==n||s!==this.name){t.next=9;break}if(!this.origin[i]){t.next=8;break}return t.next=6,this.deliver(i);case 6:t.next=9;break;case 8:delete this.stocks[i];case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:case"end":return t.stop()}}),t,this,[[1,11]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deliver",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=ut.controller("interval","v0"),!this.origin[e]){t.next=15;break}return console.log("#Digger# filter ".concat(this.name," stock"),e),t.next=6,p["a"].captureStock(e);case 6:return n=t.sent,s=this.origin[e],t.next=10,r.ignore(this.name,e);case 10:return t.next=12,r.t0Statement.remove(this.name,e);case 12:return t.next=14,r.t1Statement.update(this.name,s,n);case 14:delete this.stocks[e];case 15:t.next=19;break;case 17:t.prev=17,t.t0=t["catch"](0);case 19:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=Object.keys(this.stocks),r.length){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,p["a"].captureStocks(r);case 6:this.stocks=t.sent,n=!0,s=!1,i=void 0,t.prev=10,o=e[Symbol.iterator]();case 12:if(n=(c=o.next()).done){t.next=19;break}return u=c.value,t.next=16,u.monitor(this.stocks,this.validator);case 16:n=!0,t.next=12;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](10),s=!0,i=t.t0;case 25:t.prev=25,t.prev=26,n||null==o["return"]||o["return"]();case 28:if(t.prev=28,!s){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(25);case 33:t.next=37;break;case 35:t.prev=35,t.t1=t["catch"](0);case 37:return t.abrupt("return",Object.values(this.stocks));case 38:case"end":return t.stop()}}),t,this,[[0,35],[10,21,25,33],[26,,28,32]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c,u,h,l,f,d,b,m,y,g,w;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r||(r=new _(v["a"].validators[0])),n=r.config.name,s=!0,i=!1,o=void 0,t.prev=6,c=e[Symbol.iterator]();case 8:if(s=(u=c.next()).done){t.next=34;break}if(h=u.value,r.isFullRequiredFields(h)){t.next=14;break}return t.next=13,p["a"].captureStock(h.code);case 13:h=t.sent;case 14:return t.next=16,r.filter(this.name,h);case 16:if(t.sent){t.next=18;break}return t.abrupt("continue",31);case 18:return t.next=20,this.filter(h);case 20:if(t.sent){t.next=22;break}return t.abrupt("continue",31);case 22:if(l=h,f=l.code,d=l.name,l.price,b=l.change,m=l.netinflow,y=l.rate,l.eps,l.bvps,l.roe,l.turnover,l.qrr,console.log("#Digger# capture ".concat(this.name,"-").concat(n," stock"),f,d,b,y,m),!this.stocks[f]&&!this.origin[f]){t.next=26;break}return t.abrupt("continue",31);case 26:if(g=Object.keys(this.stocks).length,!(g>=10)){t.next=29;break}return t.abrupt("break",34);case 29:this.broadcast(this.name,"v0",h,"buy"),this.stocks[f]=h;case 31:s=!0,t.next=8;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t["catch"](6),i=!0,o=t.t0;case 40:t.prev=40,t.prev=41,s||null==c["return"]||c["return"]();case 43:if(t.prev=43,!i){t.next=46;break}throw o;case 46:return t.finish(43);case 47:return t.finish(40);case 48:return w=ut.controller("interval","v0"),t.next=51,w.update(this.name,this.stocks);case 51:t.next=55;break;case 53:t.prev=53,t.t1=t["catch"](0);case 55:return t.abrupt("return",Object.values(this.stocks));case 56:case"end":return t.stop()}}),t,this,[[0,53],[6,36,40,48],[41,,43,47]])})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),$=function(t){function e(){var t,r;Object(i["a"])(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Object(A["a"])(this,(t=Object(V["a"])(e)).call.apply(t,[this].concat(a))),Object(u["a"])(Object(K["a"])(r),"ma5Monitor",new Y(M["M"].key,5)),Object(u["a"])(Object(K["a"])(r),"ma7Monitor",new Y(M["N"].key,7)),Object(u["a"])(Object(K["a"])(r),"ma10Monitor",new Y(M["L"].key,10)),r}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e=v["a"].intervals[0],b["a"].interval(Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.clear();case 2:return t.next=4,r.capture(r.name);case 4:case"end":return t.stop()}}),t)}))),e.trace)}catch(n){}case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[this.ma5Monitor,this.ma7Monitor,this.ma10Monitor],t.abrupt("return",W(Object(V["a"])(e.prototype),"update",this).call(this,r));case 2:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"clear",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(this.stocks);case 2:if((t.t1=t.t0()).done){t.next=13;break}return e=t.t1.value,r=this.stocks[e],t.next=7,this.filter(r);case 7:if(t.sent){t.next=11;break}return this.broadcast(this.name,"v0",r,"sell"),t.next=11,this.deliver(r.code);case 11:t.next=2;break;case 13:t.next=17;break;case 15:t.prev=15,t.t2=t["catch"](0);case 17:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(r,n){var s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["a"].captureList(r);case 3:return s=t.sent,t.abrupt("return",W(Object(V["a"])(e.prototype),"capture",this).call(this,s,n));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"filter",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E.ma(e.code,5),n=E.ma(e.code,7),t.abrupt("return",+e.price>r&&+e.price>n);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(Z),J=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"diggers",{})}return Object(o["a"])(t,[{key:"load",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l,p,v,d,b,m;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=ut.controller("interval","v0"),t.next=4,Promise.all([e.getYesterdayLists(),e.getTodayLists()]);case 4:if(r=t.sent,n=Object(f["a"])(r,2),s=n[0],i=n[1],i){t.next=11;break}return t.next=11,e.override(s);case 11:for(o=e.lists,c=M["lb"].getIntervalKeys(),u=!0,h=!1,l=void 0,t.prev=16,p=c[Symbol.iterator]();!(u=(v=p.next()).done);u=!0){d=v.value,b={},m={};try{b=s[d].stocks,m=o[d].stocks}catch(a){}this.diggers[d]=new $(d,b,m)}t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](16),h=!0,l=t.t0;case 24:t.prev=24,t.prev=25,u||null==p["return"]||p["return"]();case 27:if(t.prev=27,!h){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=36;break;case 34:t.prev=34,t.t1=t["catch"](0);case 36:case"end":return t.stop()}}),t,this,[[0,34],[16,20,24,32],[25,,27,31]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:t.prev=2,e=M["lb"].getIntervalKeys(),r=!0,n=!1,s=void 0,t.prev=7,i=e[Symbol.iterator]();case 9:if(r=(o=i.next()).done){t.next=16;break}return c=o.value,t.next=13,this.diggers[c].start();case 13:r=!0,t.next=9;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](7),n=!0,s=t.t0;case 22:t.prev=22,t.prev=23,r||null==i["return"]||i["return"]();case 25:if(t.prev=25,!n){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return t.next=32,(new q).start();case 32:t.next=36;break;case 34:t.prev=34,t.t1=t["catch"](2);case 36:case"end":return t.stop()}}),t,this,[[2,34],[7,18,22,30],[23,,25,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"list",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.diggers[e].update());case 1:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),X=new J,Q=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"list",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},Object(u["a"])(r,M["g"].key,(function(){return s.listOfBond("change")})),Object(u["a"])(r,M["f"].key,(function(){return s.listOfStock("change")})),Object(u["a"])(r,M["j"].key,(function(){return s.listOfBond("rate")})),Object(u["a"])(r,M["i"].key,(function(){return s.listOfStock("rate")})),Object(u["a"])(r,M["k"].key,(function(){return s.listOfBond("netinflow")})),Object(u["a"])(r,M["h"].key,(function(){return s.listOfStock("netinflow")})),n=r,t.abrupt("return",n[e]());case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listOfBond",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=d["a"].stocksOfBonds(),n=m["a"].stocks(r),s=m["a"].listOfBonds(e),i=[],o=!0,c=!1,u=void 0,t.prev=7,h=s[Symbol.iterator]();case 9:if(o=(l=h.next()).done){t.next=25;break}if(f=l.value,p=d["a"].stockOfBond(f.code),v=n[p],v){t.next=15;break}return t.abrupt("continue",22);case 15:return t.next=17,_.isValidStock(v.code,v.name);case 17:if(t.sent){t.next=19;break}return t.abrupt("continue",22);case 19:if(!(f.price<=0)){t.next=21;break}return t.abrupt("continue",22);case 21:i.push(f);case 22:o=!0,t.next=9;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](7),c=!0,u=t.t0;case 31:t.prev=31,t.prev=32,o||null==h["return"]||h["return"]();case 34:if(t.prev=34,!c){t.next=37;break}throw u;case 37:return t.finish(34);case 38:return t.finish(31);case 39:return t.abrupt("return",i);case 40:case"end":return t.stop()}}),t,null,[[7,27,31,39],[32,,34,38]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listOfStock",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p,v,b;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=d["a"].stocksOfBonds(),n=m["a"].stocks(r),s=m["a"].bonds(),i=m["a"].list(n,e),o=[],c=!0,u=!1,h=void 0,t.prev=8,l=i[Symbol.iterator]();case 10:if(c=(f=l.next()).done){t.next=26;break}return p=f.value,t.next=14,_.isValidStock(p.code,p.name);case 14:if(t.sent){t.next=16;break}return t.abrupt("continue",23);case 16:if(v=d["a"].bondOfStock(p.code),b=s[v],b){t.next=20;break}return t.abrupt("continue",23);case 20:if(!(b.price<=0)){t.next=22;break}return t.abrupt("continue",23);case 22:o.push(b);case 23:c=!0,t.next=10;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t["catch"](8),u=!0,h=t.t0;case 32:t.prev=32,t.prev=33,c||null==l["return"]||l["return"]();case 35:if(t.prev=35,!u){t.next=38;break}throw h;case 38:return t.finish(35);case 39:return t.finish(32);case 40:return t.abrupt("return",o);case 41:case"end":return t.stop()}}),t,null,[[8,28,32,40],[33,,35,39]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),tt=new Q,et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,t),Object(u["a"])(this,"stocks",{}),this.stocks=e}return Object(o["a"])(t,[{key:"getStocks",value:function(){return this.stocks}},{key:"setStocks",value:function(t){this.stocks=t}},{key:"getStockCodes",value:function(){return Object.keys(this.stocks)}},{key:"clone",value:function(){var e=Object.assign({},e);return new t(e)}},{key:"merge",value:function(t){for(var e in t.stocks){var r=Object.keys(this.stocks).length;if(r>9)return;this.stocks[e]||(this.stocks[e]=t.stocks[e])}}},{key:"recover",value:function(t){return this.stocks=t.stocks,this}},{key:"get",value:function(t){return this.stocks[t]}},{key:"upsert",value:function(t){this.stocks[t.code]=t}},{key:"remove",value:function(t){delete this.stocks[t]}}]),t}(),rt=function(){function t(e,r){Object(i["a"])(this,t),Object(u["a"])(this,"oldlist",void 0),Object(u["a"])(this,"newlist",void 0),Object(u["a"])(this,"openChange",void 0),Object(u["a"])(this,"closeChange",void 0),this.oldlist=e,this.newlist=r,this.calc()}return Object(o["a"])(t,[{key:"calc",value:function(){var t=this.oldlist.getStockCodes(),e=0,r=0,n=!0,a=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;0!==this.newlist.get(c).price?(e+=(this.newlist.get(c).price-this.oldlist.get(c).price)/this.oldlist.get(c).price,r+=(this.newlist.get(c).open-this.oldlist.get(c).price)/this.oldlist.get(c).price):console.info("#Statement# suspension stock consider as change 0% ...",c,this.newlist.get(c).name)}}catch(u){a=!0,s=u}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw s}}this.closeChange=(100*e).toFixed(2),this.openChange=(100*r).toFixed(2)}},{key:"getOpenChange",value:function(){return this.openChange}},{key:"getCloseChange",value:function(){return this.closeChange}},{key:"getChange",value:function(){return this.closeChange}},{key:"getProfit",value:function(t){return(this.closeChange*t).toFixed(2)}}]),t}(),nt=O.a.createInstance({name:"trace",driver:O.a.INDEXEDDB}),at=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isToday:!1};Object(i["a"])(this,t),Object(u["a"])(this,"isToday",void 0),Object(u["a"])(this,"record",{change:{},capture:{},trace:{}}),Object(u["a"])(this,"name",void 0),Object(u["a"])(this,"rule",void 0),Object(u["a"])(this,"listController",void 0),Object(u["a"])(this,"oldlists",void 0),Object(u["a"])(this,"newlists",void 0),Object(u["a"])(this,"openChanges",{}),Object(u["a"])(this,"closeChanges",{}),this.rule=r,this.listController=e,this.isToday=n.isToday,this.name=(this.isToday?"t0-".concat(this.rule.name):this.rule.name).toLowerCase(),this.reset(),this.deprecated()}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=!1,r=e?120:300,t.prev=2,t.next=5,this.load();case 5:if(!this.rule.name.includes("interval")||this.isToday){t.next=7;break}return t.abrupt("return");case 7:b["a"].interval(Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("#StatementController# ".concat(n.name," capture start ...")),t.next=3,n.capture();case 3:console.log("#StatementController# ".concat(n.name," capture end ..."));case 4:case"end":return t.stop()}}),t)}))),null,r),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.warn("#StatementController# ",t.t0);case 13:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"deprecated",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].until("150000");case 2:return t.next=5,nt.length();case 5:if(e=t.sent,!(e<=200)){t.next=8;break}return t.abrupt("break",15);case 8:return t.next=10,nt.key(0);case 10:return r=t.sent,t.next=13,nt.removeItem(r);case 13:t.next=2;break;case 15:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=k()().format("YYYYMMDD"),t.next=4,nt.getItem(e);case 4:if(r=t.sent,r){t.next=7;break}return t.abrupt("return");case 7:for(r[this.name]&&(this.record=r[this.name]),n=this.rule.interval?M["lb"].getIntervalKeys():M["lb"].getNormalKeys(),s=!0,i=!1,o=void 0,t.prev=12,c=n[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)h=u.value,l=M["lb"].name(h),this.oldlists[h]=new et(this.record.capture[l]),this.newlists[h]=new et(this.record.trace[l]);t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),i=!0,o=t.t0;case 20:t.prev=20,t.prev=21,s||null==c["return"]||c["return"]();case 23:if(t.prev=23,!i){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:t.next=32;break;case 30:t.prev=30,t.t1=t["catch"](0);case 32:case"end":return t.stop()}}),t,this,[[0,30],[12,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=k()().format("YYYYMMDD"),t.next=3,nt.getItem(r);case 3:return n=t.sent,n||(n={}),this.record={change:e.change,trace:e.trace,capture:e.capture},n[this.name]=this.record,t.abrupt("return",nt.setItem(r,n));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){var t=this.rule.interval?M["lb"].getIntervalKeys():M["lb"].getNormalKeys();this.oldlists={},this.newlists={};var e=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;this.newlists[i]=new et,this.oldlists[i]=new et}}catch(o){r=!0,n=o}finally{try{e||null==s["return"]||s["return"]()}finally{if(r)throw n}}}},{key:"remove",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.load();case 3:this.newlists[e]&&this.newlists[e].remove(r),this.oldlists[e]&&this.oldlists[e].remove(r),this.calc(),this.broadcast(),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.load();case 3:this.newlists[e]||(this.newlists[e]=new et),this.oldlists[e]||(this.oldlists[e]=new et),this.oldlists[e].upsert(r),this.newlists[e].upsert(n),this.calc(),this.broadcast(),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.newlists=null,this.oldlists=null,!e){t.next=7;break}this.oldlists=e,t.next=16;break;case 7:if(!this.isToday){t.next=13;break}return t.next=10,this.listController.getTodayLists();case 10:this.oldlists=t.sent,t.next=16;break;case 13:return t.next=15,this.listController.getYesterdayLists();case 15:this.oldlists=t.sent;case 16:if(this.oldlists){t.next=18;break}return t.abrupt("return");case 18:this.newlists={},r=Object.keys(this.oldlists),n=0,s=r;case 21:if(!(n<s.length)){t.next=37;break}if(i=s[n],t.prev=23,M["lb"].get(i)){t.next=26;break}return t.abrupt("continue",34);case 26:return t.next=28,this.captureList(this.oldlists[i]);case 28:this.newlists[i]=t.sent,t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](23),console.warn("#StatementController# ",t.t0);case 34:n++,t.next=21;break;case 37:this.calc(),this.broadcast(),t.next=44;break;case 41:t.prev=41,t.t1=t["catch"](0),console.warn("#StatementController# capture",t.t1);case 44:return t.abrupt("return",this.newlists);case 45:case"end":return t.stop()}}),t,this,[[0,41],[23,31]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calc",value:function(){if(this.newlists)for(var t=Object.keys(this.newlists),e=0,r=t;e<r.length;e++){var n=r[e],a=new rt(this.oldlists[n],this.newlists[n]);this.closeChanges[n]=a.getCloseChange(),this.openChanges[n]=a.getOpenChange()}}},{key:"broadcast",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e={name:this.name,change:{},trace:{},capture:{}},r=Object.keys(this.newlists),n=0,s=r;n<s.length;n++)i=s[n],o=M["lb"].name(i),c=k()().format("HH:mm"),u=this.closeChanges[i],this.record.change[o]||(this.record.change[o]=[]),this.record.change[o].unshift(u,c),e.change[o]=this.record.change[o],e.trace[o]=this.newlists[i].getStocks(),e.capture[o]=this.oldlists[i].getStocks();return t.next=5,this.save(e);case 5:console.log("#StatementController# list trace [".concat(this.name,"] at ").concat(k()().format("HH:mm:ss")," ...")),window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Trace_Event",{detail:e}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureList",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new et,n=Object.keys(e.getStocks()),t.next=4,p["a"].captureStocks(n);case 4:return s=t.sent,r.setStocks(s),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),st=O.a.createInstance({name:"capture",driver:O.a.INDEXEDDB}),it=10,ot=function(){function t(e,r){Object(i["a"])(this,t),Object(u["a"])(this,"rule",void 0),Object(u["a"])(this,"validator",void 0),Object(u["a"])(this,"lists",void 0),Object(u["a"])(this,"listKeys",void 0),Object(u["a"])(this,"statement",void 0),Object(u["a"])(this,"t0Statement",void 0),Object(u["a"])(this,"blocks",{concept:[],industry:[]}),this.rule=e,this.validator=r,this.t1Statement=new at(this,e),this.t0Statement=new at(this,e,{isToday:!0}),this.listKeys=e.interval?M["lb"].getIntervalKeys():M["lb"].getNormalKeys(),this.reset(),this.deprecated()}return Object(o["a"])(t,[{key:"all",value:function(){return this.lists}},{key:"list",value:function(t){return this.lists[t]}},{key:"stocks",value:function(t){return this.lists[t].getStocks()}},{key:"ignore",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:if(this.lists[e]){t.next=4;break}return t.abrupt("return");case 4:return this.lists[e].remove("".concat(r)),this.broadcast(),t.next=8,this.save();case 8:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.lists[e]||(this.lists[e]=new et),this.lists[e].merge({stocks:r}),this.broadcast(),t.next=5,this.save();case 5:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"override",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.lists=e,this.broadcast(),t.next=4,this.save();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"load",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=k()().format("YYYYMMDD"),t.next=3,this.loadListsOf(e);case 3:r=t.sent,r&&(this.lists=r);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadListsOf",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.rule.name,t.next=3,st.getItem(e);case 3:if(n=t.sent,n){t.next=7;break}return console.log("#ListController# ".concat(r," ").concat(e," lists not exist!")),t.abrupt("return");case 7:if(n[r]){t.next=10;break}return console.log("#ListController# ".concat(r," ").concat(e," lists not exist!")),t.abrupt("return");case 10:return t.abrupt("return",this.recover(n[r]));case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTodayLists",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=k()().format("YYYYMMDD"),t.abrupt("return",this.loadListsOf(e));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getYesterdayLists",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,st.length();case 2:return e=t.sent,r=k()().format("YYYYMMDD"),t.next=6,st.key(e-1);case 6:if(n=t.sent,n!==r){t.next=13;break}return t.next=10,st.key(e-2);case 10:n=t.sent,t.next=16;break;case 13:return t.next=15,st.key(e-1);case 15:n=t.sent;case 16:return t.abrupt("return",this.loadListsOf(n));case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"recover",value:function(t){for(var e in t)t[e]=(new et).recover(t[e]);return t}},{key:"deprecated",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].until("150000");case 2:return t.next=5,st.length();case 5:if(e=t.sent,!(e<=200)){t.next=8;break}return t.abrupt("break",15);case 8:return t.next=10,st.key(0);case 10:return r=t.sent,t.next=13,st.removeItem(r);case 13:t.next=2;break;case 15:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=k()().format("YYYYMMDD"),r=this.rule.name,t.next=4,st.getItem(e);case 4:return n=t.sent,n||(n={}),n[r]=this.lists,t.abrupt("return",st.setItem(e,n));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){var t=this.listKeys;this.lists={};var e=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;this.lists[i]=new et}}catch(o){r=!0,n=o}finally{try{e||null==s["return"]||s["return"]()}finally{if(r)throw n}}}},{key:"captureHotBlocks",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].captureBlock();case 2:return this.blocks=t.sent,console.info("#EastMoneyBlockCrawler# Hot Concept Blocks ..."),console.table(this.blocks.concept),console.info("#EastMoneyBlockCrawler# Hot Industry Blocks ..."),console.table(this.blocks.industry),t.abrupt("return",this.blocks);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createHotBlocksList",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={concept:[M["o"].key,M["p"].key,M["q"].key],industry:[M["w"].key,M["x"].key,M["y"].key]},t.next=4,this.captureHotBlocks();case 4:for(r in e)for(s in n=e[r],n)for(u in i=n[s],o=this.lists[i],c=o.getStocks(),c)h=c[u],h.block=this.blocks[r][s]["name"];t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.warn("#ListController# ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"createHotStocksList",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l,f,p,v,d,b,m,y,g,w,k,x,O,j;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.listKeys,r=M["lb"].getBondKeys(),n={},s={},i=[],o=0,c=!0,u=!1,h=void 0,t.prev=9,l=e[Symbol.iterator]();case 11:if(c=(f=l.next()).done){t.next=22;break}if(p=f.value,!r.includes(p)){t.next=15;break}return t.abrupt("continue",19);case 15:for(b in v=this.lists[p],d=v.getStocks(),Object.assign(n,d),d)m=d[b],i[b]||(i[b]={name:m.name,count:0}),i[b].count++;case 19:c=!0,t.next=11;break;case 22:t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](9),u=!0,h=t.t0;case 28:t.prev=28,t.prev=29,c||null==l["return"]||l["return"]();case 31:if(t.prev=31,!u){t.next=34;break}throw h;case 34:return t.finish(31);case 35:return t.finish(28);case 36:for(y=Object.keys(i).sort((function(t,e){return i[e].count-i[t].count})),g=!0,w=!1,k=void 0,t.prev=40,x=y[Symbol.iterator]();!(g=(O=x.next()).done);g=!0)j=O.value,i[j].count>=3&&o<it&&(s[j]=Object.assign({},n[j],{hot:i[j].count}),o++);t.next=48;break;case 44:t.prev=44,t.t1=t["catch"](40),w=!0,k=t.t1;case 48:t.prev=48,t.prev=49,g||null==x["return"]||x["return"]();case 51:if(t.prev=51,!w){t.next=54;break}throw k;case 54:return t.finish(51);case 55:return t.finish(48);case 56:console.log("#ListController# list ".concat(this.rule.name," capture hot stcoks ...")),console.table(i),this.lists[M["v"].key].setStocks(s);case 59:case"end":return t.stop()}}),t,this,[[9,24,28,36],[29,,31,35],[40,44,48,56],[49,,51,55]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.rule.interval?void 0:[this.rule.capture],t.prev=1,t.next=4,this.load();case 4:b["a"].interval(Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("#ListController# list ".concat(r.rule.name," capture start ...")),t.next=3,r.capture();case 3:r.rule.interval||(console.info("=================================================="),console.info("#ListController# today list capture [".concat(r.rule.name,"] at ").concat(k()().format("HH:mm:ss"),": "),r.lists),console.info("==================================================")),console.log("#ListController# list ".concat(r.rule.name," capture end ..."));case 5:case"end":return t.stop()}}),t)}))),e,this.rule.interval),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.warn("#ListController# ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"captureList",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,v,d,b;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=M["lb"].getIntervalKeys(),n=M["lb"].getBondKeys(),s=[],!r.includes(e)){t.next=9;break}return t.next=6,X.list(e,this.validator);case 6:s=t.sent,t.next=18;break;case 9:if(!n.includes(e)){t.next=15;break}return t.next=12,tt.list(e);case 12:s=t.sent,t.next=18;break;case 15:return t.next=17,p["a"].captureList(e);case 17:s=t.sent;case 18:if(s&&s.length){t.next=20;break}return t.abrupt("return",new et);case 20:i={},o=0,c=!0,u=!1,h=void 0,t.prev=24,l=s[Symbol.iterator]();case 26:if(c=(f=l.next()).done){t.next=52;break}if(v=f.value,d=v,b=d.code,d.name,d.change,r.includes(e)){t.next=38;break}if(this.validator.isFullRequiredFields(v)){t.next=34;break}return t.next=33,p["a"].captureStock(b);case 33:v=t.sent;case 34:return t.next=36,this.validator.filter(e,v);case 36:if(t.sent){t.next=38;break}return t.abrupt("continue",49);case 38:if(!i[b]){t.next=40;break}return t.abrupt("continue",49);case 40:if(!(v.price<=0)){t.next=42;break}return t.abrupt("continue",49);case 42:if(n.includes(e)){t.next=45;break}if(!(v.change>9.8)){t.next=45;break}return t.abrupt("continue",49);case 45:if(i[b]=v,o++,o!==it){t.next=49;break}return t.abrupt("break",52);case 49:c=!0,t.next=26;break;case 52:t.next=58;break;case 54:t.prev=54,t.t0=t["catch"](24),u=!0,h=t.t0;case 58:t.prev=58,t.prev=59,c||null==l["return"]||l["return"]();case 61:if(t.prev=61,!u){t.next=64;break}throw h;case 64:return t.finish(61);case 65:return t.finish(58);case 66:return console.log("#ListController# list ".concat(this.rule.name," capture ").concat(e," "),i),t.abrupt("return",new et(i));case 68:case"end":return t.stop()}}),t,this,[[24,54,58,66],[59,,61,65]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,i,o,c=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object.keys(this.lists),r=0,n=e;case 2:if(!(r<n.length)){t.next=23;break}if(i=n[r],t.prev=4,i!==M["v"].key){t.next=7;break}return t.abrupt("continue",20);case 7:if(this.listKeys.includes(i)){t.next=9;break}return t.abrupt("continue",20);case 9:return t.next=11,this.captureList(i);case 11:return o=t.sent,this.lists[i].merge(o),t.next=15,Object(g["a"])(500);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),console.warn("#ListController# ",t.t0);case 20:r++,t.next=2;break;case 23:if(t.prev=23,!this.rule.interval){t.next=30;break}return this.broadcast(),t.next=28,this.save();case 28:t.next=36;break;case 30:return this.createHotStocksList(),this.createHotBlocksList(),this.broadcast(),t.next=35,this.save();case 35:setTimeout(Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},t.next=3,Object(g["a"])(15e4);case 3:return t.next=5,c.t0Statement.capture(c.lists);case 5:if(e=t.sent,console.log("#ListController# [".concat(c.rule.name,"] t0Statement pre-trace "),e),!c.validator.hasCaptureRule("pre-trace")){t.next=13;break}return t.next=10,c.validator.filterOfPreTrace(c.lists,e);case 10:return c.broadcast(),t.next=13,c.save();case 13:case"end":return t.stop()}}),t)}))));case 36:t.next=41;break;case 38:t.prev=38,t.t1=t["catch"](23),console.warn("#ListController# ",t.t1);case 41:case"end":return t.stop()}}),t,this,[[4,17],[23,38]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={name:this.rule.name,lists:this.lists},window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Capture_Event",{detail:e}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),ct=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"listControllers",[]),this.clearTempCapture();var e=[].concat(v["a"].captures||[],v["a"].temps||[]),r=v["a"].validators,n=!0,a=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var h=o.value,l=!0,f=!1,p=void 0;try{for(var d,b=r[Symbol.iterator]();!(l=(d=b.next()).done);l=!0){var m=d.value,y=this.create(h,m);this.listControllers.push(y)}}catch(w){f=!0,p=w}finally{try{l||null==b["return"]||b["return"]()}finally{if(f)throw p}}}}catch(w){a=!0,s=w}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw s}}var g=this.create(v["a"].intervals[0],r[0]);this.listControllers.push(g)}return Object(o["a"])(t,[{key:"create",value:function(t,e){var r="".concat(t.capture,"-").concat(e.name).toLowerCase(),n=new h(Object(c["a"])({},t,{name:r})),a=new _(e);return new ot(n,a)}},{key:"controller",value:function(t,e){var r=!0,n=!1,a=void 0;try{for(var s,i=this.listControllers[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value,c=o.rule,u=o.validator.config;if(c.capture===t&&u.name===e)return o}}catch(h){n=!0,a=h}finally{try{r||null==i["return"]||i["return"]()}finally{if(n)throw a}}}},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=k()().format("YYYYMMDD"),r=!0,n=!1,s=void 0,t.prev=5,i=this.listControllers[Symbol.iterator]();case 7:if(r=(o=i.next()).done){t.next=16;break}if(c=o.value,!c.rule.date||c.rule.date===e){t.next=12;break}return console.log("#controllers# ignore temp capture rule ",c.rule.capture,c.rule.date),t.abrupt("continue",13);case 12:c.start();case 13:r=!0,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](5),n=!0,s=t.t0;case 22:t.prev=22,t.prev=23,r||null==i["return"]||i["return"]();case 25:if(t.prev=25,!n){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:t.next=35;break;case 32:t.prev=32,t.t1=t["catch"](0),console.warn("#controllers# capture",t.t1);case 35:case"end":return t.stop()}}),t,this,[[0,32],[5,18,22,30],[23,,25,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=!0,r=!1,n=void 0,t.prev=4,s=this.listControllers[Symbol.iterator]();case 6:if(e=(i=s.next()).done){t.next=15;break}return o=i.value,t.next=10,o.t1Statement.start();case 10:return t.next=12,o.t0Statement.start();case 12:e=!0,t.next=6;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](4),r=!0,n=t.t0;case 21:t.prev=21,t.prev=22,e||null==s["return"]||s["return"]();case 24:if(t.prev=24,!r){t.next=27;break}throw n;case 27:return t.finish(24);case 28:return t.finish(21);case 29:t.next=34;break;case 31:t.prev=31,t.t1=t["catch"](0),console.warn("#controllers# trace ",t.t1);case 34:case"end":return t.stop()}}),t,this,[[0,31],[4,17,21,29],[22,,24,28]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearTempCapture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(v["a"].temps){t.next=2;break}return t.abrupt("return");case 2:if(v["a"].temps.length){t.next=4;break}return t.abrupt("return");case 4:for(e=[],r=k()().subtract(2,"days").format("YYYYMMDD"),1!==+k()().day()&&2!==+k()().day()||(r=k()().subtract(4,"days").format("YYYYMMDD")),n=!0,s=!1,i=void 0,t.prev=10,o=v["a"].temps[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)u=c.value,+u.date>r&&e.push(u);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),s=!0,i=t.t0;case 18:t.prev=18,t.prev=19,n||null==o["return"]||o["return"]();case 21:if(t.prev=21,!s){t.next=24;break}throw i;case 24:return t.finish(21);case 25:return t.finish(18);case 26:v["a"].temps=e;case 27:case"end":return t.stop()}}),t,null,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"setTempCapture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=k()().format("YYYYMMDD"),r=k()().add(1,"minutes").format("HH:mm"),n=new h({capture:r,trace:["14:40"],date:e}),v["a"].temps=[].concat(v["a"].temps,n);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTempCapture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],s=!0,i=!1,o=void 0,t.prev=4,c=v["a"].temps[Symbol.iterator]();case 6:if(s=(u=c.next()).done){t.next=14;break}if(h=u.value,h.capture!==e||h.date!==r){t.next=10;break}return t.abrupt("continue",11);case 10:n.push(h);case 11:s=!0,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),i=!0,o=t.t0;case 20:t.prev=20,t.prev=21,s||null==c["return"]||c["return"]();case 23:if(t.prev=23,!i){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:v["a"].temps=n;case 29:case"end":return t.stop()}}),t,null,[[4,16,20,28],[21,,23,27]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"ignore",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n,s){var i,o,c,u,h,l,f,p,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=!0,o=!1,c=void 0,t.prev=3,u=this.listControllers[Symbol.iterator]();case 5:if(i=(h=u.next()).done){t.next=19;break}if(l=h.value,f=l.rule,p=l.validator.config,v=M["lb"].keyOf(n),f.capture!==e||p.name!==r){t.next=16;break}return t.next=13,l.ignore(v,s);case 13:return t.next=15,l.t0Statement.remove(v,s);case 15:window.dispatchEvent(new CustomEvent("__Walle_Stock_Ignore_Event",{detail:{time:e,vtype:r,listkey:v,code:s}}));case 16:i=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](3),o=!0,c=t.t0;case 25:t.prev=25,t.prev=26,i||null==u["return"]||u["return"]();case 28:if(t.prev=28,!o){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(25);case 33:case"end":return t.stop()}}),t,this,[[3,21,25,33],[26,,28,32]])})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()}]),t}(),ut=new ct,ht=r("b868"),lt=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"index",{sse:{price:0,change:0,volume:0,amount:0,netinflow:0,rate:0},szse:{price:0,change:0,volume:0,amount:0,netinflow:0,rate:0},north:{}}),Object(u["a"])(this,"number",{full:0,rise:0,down:0,limitup:0,limitdown:0,prelimitup:0,prelimitdown:0}),Object(u["a"])(this,"strength",{full:0,netinflow:0,rise:0,down:0}),Object(u["a"])(this,"changes",{index:[],netinflow:[],full:[],rise:[],down:[]}),Object(u["a"])(this,"rates",{index:[],netinflow:[],full:[],rise:[],down:[]})}return Object(o["a"])(t,[{key:"start",value:function(){var t=this;b["a"].interval((function(){t.process()}),null,180,"market-analyse")}},{key:"process",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.calcIndex();case 3:return t.next=5,this.calcIndexOfNorth();case 5:return t.next=7,this.calcStocks();case 7:return t.next=9,this.broadcast();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.warn("#Market-Trend# ",t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){window.dispatchEvent(new CustomEvent("__Walle_Stock_Market_Analyse_Event",{detail:{index:this.index,number:this.number,strength:this.strength,changes:this.changes,rates:this.rates}}))}},{key:"calcStocks",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s in e=m["a"].stocks(),r={full:0,rise:0,down:0},n={full:0,rise:0,down:0},this.number.full=0,this.number.rise=0,this.number.down=0,this.number.limitup=0,this.number.limitdown=0,this.number.prelimitup=0,this.number.prelimitdown=0,e)i=e[s],i.change>0&&(this.number.rise++,r.rise+=i.change,n.rise+=i.rate),i.change<0&&(this.number.down++,r.down+=i.change,n.down+=i.rate),i.change>=9.8&&this.number.limitup++,i.change<=-9.8&&this.number.limitdown++,i.change>5&&i.change<9.8&&this.number.prelimitup++,i.change<-5&&i.change>-9.8&&this.number.prelimitdown++,this.number.full++;r.rise=+r.rise.toFixed(2),r.down=+r.down.toFixed(2),r.full=+(r.rise+r.down).toFixed(2),n.rise=+n.rise.toFixed(2),n.down=+n.down.toFixed(2),n.full=+(n.rise+n.down).toFixed(2),this.strength.rise=+(n.rise/this.number.rise).toFixed(2),this.strength.down=+(n.down/this.number.down).toFixed(2),this.strength.full=+(this.strength.rise+this.strength.down).toFixed(2),o=k()().format("HH:mm"),this.changes.rise.unshift(r.rise,o),this.changes.down.unshift(r.down,o),this.changes.full.unshift(r.full,o),this.changes.index.unshift(+this.index.sse.price+this.index.szse.price,o),this.rates.rise.unshift(+(n.rise/this.number.rise).toFixed(2),o),this.rates.down.unshift(+(n.down/this.number.down).toFixed(2),o),this.rates.full.unshift(+(n.rise/this.number.rise+n.down/this.number.down).toFixed(2),o),this.rates.index.unshift(+this.index.sse.rate+this.index.szse.rate,o),this.calcNetinflow(o);case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcNetinflow",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=400,n=m["a"].listOfStocks("netinflow",1,r),s=0,i=0,o=!0,c=!1,u=void 0,t.prev=7,h=n[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)f=l.value,s+=f.change,i+=f.rate;t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),c=!0,u=t.t0;case 15:t.prev=15,t.prev=16,o||null==h["return"]||h["return"]();case 18:if(t.prev=18,!c){t.next=21;break}throw u;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.strength.netinflow=+(i/r).toFixed(2),this.changes.netinflow.unshift(+s.toFixed(2),e),this.rates.netinflow.unshift(+(i/r).toFixed(2),e);case 26:case"end":return t.stop()}}),t,this,[[7,11,15,23],[16,,18,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcIndexOfNorth",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="http://push2.eastmoney.com/api/qt/kamt/get?fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54",t.next=4,ht["a"].get(e,null);case 4:r=t.sent,n=JSON.parse(r),this.index.north=n.data,t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"calcIndex",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].captureStocks(["1.000001","399001"]);case 2:e=t.sent,r=e["1.000001"],n=e["399001"],this.index={sse:r,szse:n};case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"isTradingDay",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.next=2;break;case 2:if(e=+k()().format("HHmmss"),r="092500",!(e<92500)){t.next=8;break}r="092510",t.next=14;break;case 8:if(!(e>113e3)){t.next=12;break}r="130010",t.next=14;break;case 12:if(!(e>15e4)){t.next=14;break}return t.abrupt("return",!1);case 14:return console.log("#Markets# will start at ".concat(r," ...")),t.next=17,b["a"].until(r);case 17:return t.next=19,p["a"].isTrading();case 19:if(n=t.sent,console.info("#Markets# stock market trading status ".concat(n?"open":"close"," ...")),n){t.next=28;break}if(!(e>=92500&&e<=113e3||e>=13e4&&e<=15e4)){t.next=28;break}return t.next=25,toastr.clearAll();case 25:return t.next=27,toastr.loading("Market Closed","Holidays");case 27:console.info("#Markets# stock market closed for holidays ...");case 28:return t.abrupt("return",n);case 29:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),ft=new lt,pt=r("21a6"),vt=r.n(pt),dt=r("b5ee"),bt=r("32d2"),mt="walle-stocks-trace.json",yt="walle-stocks-capture.json",gt="walle-stocks-storage.json",wt="walle-stocks-flow.json",kt=function(){function t(){var e=this;Object(i["a"])(this,t),dt["a"].listen("KeyB",(function(){var t={timeOut:5e3,extendedTimeOut:5e3,closeButton:!0,positionClass:"toast-bottom-left"};bt["a"].clear(),bt["a"].confirm("click to backup trace file","BACKUP",(function(){return e.trace()}),t),bt["a"].confirm("click to backup capture file","BACKUP",(function(){return e.capture()}),t),bt["a"].confirm("click to backup flow file","BACKUP",(function(){return e.flow()}),t),bt["a"].confirm("click to backup storage file","BACKUP",(function(){return e.storage()}),t)}))}return Object(o["a"])(t,[{key:"download",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){var n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=k()().format("YYYYMMDD"),s=new Blob([JSON.stringify(r,null,"\t")],{type:"application/json;charset=utf-8"}),t.next=4,Object(g["a"])(1e3);case 4:return t.abrupt("return",vt.a.saveAs(s,"".concat(n,"-").concat(e)));case 5:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,nt.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(mt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,st.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(yt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"flow",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,S.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(wt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"storage",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={},t.next=4,O.a.iterate((function(t,r){e[r]=t}));case 4:return t.next=6,this.download(gt,e);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"all",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.storage();case 2:return t.next=4,this.capture();case 4:return t.next=6,this.flow();case 6:return t.next=8,this.trace();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"autoBackup",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=k()().endOf("month").format("YYYYMMDD"),r=k()().format("YYYYMMDD"),e!==r){t.next=8;break}return t.next=5,b["a"].until("233000");case 5:return t.next=7,this.all();case 7:console.info("#Backup# auto backup storage & records at ".concat(r," ..."));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),xt=function(){function t(){var e=this;Object(i["a"])(this,t),dt["a"].listen("KeyR",(function(){return e.upload()}))}return Object(o["a"])(t,[{key:"upload",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=document.createElement("input"),e.type="file",e.multiple="multiple",e.onchange=function(){r.recover(e.files)},e.click();case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"recover",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,h,l,f,p,v,d=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r={},Object(u["a"])(r,mt,(function(t){return d.trace(t)})),Object(u["a"])(r,yt,(function(t){return d.capture(t)})),Object(u["a"])(r,wt,(function(t){return d.flow(t)})),Object(u["a"])(r,gt,(function(t){return d.storage(t)})),n=r,s=!0,i=!1,o=void 0,t.prev=5,c=e[Symbol.iterator]();case 7:if(s=(h=c.next()).done){t.next=20;break}if(l=h.value,f=l.name.slice(9),!n[f]){t.next=17;break}return t.next=13,l.text();case 13:return p=t.sent,v=JSON.parse(p),t.next=17,n[f](v);case 17:s=!0,t.next=7;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](5),i=!0,o=t.t0;case 26:t.prev=26,t.prev=27,s||null==c["return"]||c["return"]();case 29:if(t.prev=29,!i){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:window.alert("Walle Recover Success ..."),t.next=41;break;case 37:t.prev=37,t.t1=t["catch"](0),console.info("#Recover# fail ",t.t1),window.alert("Walle Recover Fail, Try Aagin ...");case 41:case"end":return t.stop()}}),t,null,[[0,37],[5,22,26,34],[27,,29,33]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trace",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,nt.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,st.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"flow",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,S.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"storage",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,t.t0=a.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return r=t.t1.value,t.next=6,O.a.setItem(r,e[r]);case 6:t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t2=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),Ot=new kt,jt=(new xt,function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,Ot.autoBackup(),t.next=4,ft.isTradingDay();case 4:if(!t.sent){t.next=11;break}console.log("#Loop# core-loop start ..."),m["a"].start(),X.start(),ft.start(),ut.capture(),ut.trace();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.warn("#loop# ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}()),St=new jt,Tt=(r("a9e3"),r("a15b"),r("bfb1")),Et=r("720d"),Dt=r.n(Et),Pt=function(){function t(e,r){Object(i["a"])(this,t),Object(u["a"])(this,"publickey","-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDHdsyxT66pDG4p73yope7jxA92\nc0AT4qIJ/xtbBcHkFPK77upnsfDTJiVEuQDH+MiMeb+XhCLNKZGp0yaUU6GlxZdp\n+nLW8b7Kmijr3iepaDhcbVTsYBWchaWUXauj9Lrhz58/6AE/NF0aMolxIGpsi+ST\n2hSHPu3GSXMdhPCkWQIDAQAB\n-----END PUBLIC KEY-----"),Object(u["a"])(this,"validatekey",""),Object(u["a"])(this,"opener",null),Object(u["a"])(this,"shareholder",{sz:"",sh:""}),Object(u["a"])(this,"user",{id:"",password:""}),Object(u["a"])(this,"tradeTypes",{B:"B",a:"0a",b:"0b",c:"0c",d:"0d",e:"0e",S:"S",f:"0f",g:"0g",h:"0h",i:"0i",j:"0j"}),Object(u["a"])(this,"status",{0:"未知",1:"未报",2:"已报",3:"部成",4:"待报",5:"已受理",6:"已成",7:"已撤"}),this.user.id=e,this.user.password=r}return Object(o["a"])(t,[{key:"market",value:function(t){var e=t.slice(0,2);return["00","30","12"].includes(e)?"sz":["60","68","11"].includes(e)?"sh":void 0}},{key:"login",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.opener){t.next=3;break}return t.abrupt("return");case 3:return this.opener=Tt["a"].open("https://jy.xzsec.com/Login"),t.next=6,new Promise((function(t,r){toastr.confirm("click to continue after login ...","MARKET ACCOUNT LOGIN",Object(s["a"])(a.a.mark((function r(){return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.opener=null,r.prev=1,r.next=4,e.key();case 4:r.next=8;break;case 6:r.prev=6,r.t0=r["catch"](1);case 8:t();case 9:case"end":return r.stop()}}),r,null,[[1,6]])}))),{timeOut:0,extendedTimeOut:0})}));case 6:console.log("#EastMoneyStockTrader# login ..."),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# login fail",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"ocr",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"captcha",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=Math.random(),r="https://jy.xzsec.com/Login/YZM?randNum=".concat(e),console.log("#EastMoneyStockTrader# captcha ...",r),t.abrupt("return",{url:r,random:e});case 7:throw t.prev=7,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# captcha fail",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"auth",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n,s){var i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i="https://jy.xzsec.com/Login/Authentication?validatekey=",o=new Dt.a,o.setPublicKey(this.publickey),c=o.encrypt(r),u={userId:e,password:c,identifyCode:n,randNumber:s,duration:"1800",authCode:"",type:"Z"},t.next=8,ht["a"].post(i,u,{dataType:"json"});case 8:if(h=t.sent,0!==h.Status){t.next=13;break}console.log("#EastMoneyStockTrader# auth ..."),t.next=14;break;case 13:throw h;case 14:t.next=20;break;case 16:throw t.prev=16,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# auth fail",t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"key",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="https://jy.xzsec.com/Trade/Buy",t.next=4,ht["a"].get(e,null);case 4:if(r=t.sent,!r){t.next=16;break}if(n=document.createElement("div"),n.innerHTML=r,s=n.querySelector("#em_validatekey"),!s||!s.value){t.next=13;break}this.validatekey=s.value,t.next=14;break;case 13:throw{status:-1,message:"密钥获取异常，请重新登录!"};case 14:return console.log("#EastMoneyStockTrader# load key ...",this.validatekey),t.abrupt("return",this.validatekey);case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# load key fail",t.t0),t.t0;case 22:case"end":return t.stop()}}),t,this,[[0,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"check",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.validatekey){t.next=4;break}return t.next=3,this.login();case 3:throw{status:-2,message:"会话已超时，请重新登录!"};case 4:return t.abrupt("return",!!this.validatekey);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"hook",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-2!==e.Status){t.next=3;break}throw this.validatekey="",{status:-2,message:"会话已超时，请重新登录!"};case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trade",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n,s,i){var o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return o="https://jy.xzsec.com/Trade/SubmitTrade?validatekey=".concat(this.validatekey),this.market(r),c={stockCode:r,amount:s,tradeType:e,zqmc:n},i&&(c.price=i),t.next=9,ht["a"].post(o,c,{dataType:"json"});case 9:if(u=t.sent,this.hook(u),0!==u.Status){t.next=16;break}return console.log("#EastMoneyStockTrader# trade-[".concat(e,"]: ").concat(r," ").concat(n," ").concat(i," ").concat(s," ")),t.abrupt("return",u.Data[0].Wtbh);case 16:throw u;case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# trade-[".concat(e,"]: ").concat(r," ").concat(n," ").concat(i," ").concat(s," fail"),t.t0),t.t0;case 23:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,r,n,a,s){return t.apply(this,arguments)}return e}()},{key:"limitorder",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n,s){var i,o,c,u,h=arguments;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=h.length>4&&void 0!==h[4]?h[4]:5,t.next=3,this.position(r);case 3:return o=t.sent,c=e===this.tradeTypes.B?o.sell.price[i-1]:o.buy.price[i-1],t.next=7,this.trade(e,r,n,s,c);case 7:return u=t.sent,t.next=10,Object(g["a"])(300);case 10:return t.next=12,this.revoke([u]);case 12:case"end":return t.stop()}}),t,this)})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"buy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n){var s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.slice(0,2),!["11","12"].includes(s)){t.next=3;break}return t.abrupt("return",this.limitorder(this.tradeTypes.B,e,r,n));case 3:return t.abrupt("return",this.trade(this.tradeTypes.d,e,r,n));case 4:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n){var s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.slice(0,2),!["11","12"].includes(s)){t.next=3;break}return t.abrupt("return",this.limitorder(this.tradeTypes.S,e,r,n));case 3:return t.abrupt("return",this.trade(this.tradeTypes.i,e,r,n));case 4:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"query",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Search/GetOrdersData?validatekey=".concat(this.validatekey),n={qqhs:10,dwc:""},t.next=7,ht["a"].post(r,n,{dataType:"json"});case 7:if(s=t.sent,this.hook(s),0!==s.Status){t.next=37;break}i=!0,o=!1,c=void 0,t.prev=13,u=s.Data[Symbol.iterator]();case 15:if(i=(h=u.next()).done){t.next=23;break}if(l=h.value,l.Wtbh!==e){t.next=20;break}return console.log("#EastMoneyStockTrader# query ".concat(e,": code ").concat(l.Zqdm," ").concat(l.Zqmc," status ").concat(l.Mmsm,"-").concat(l.Wtzt," deal ").concat(l.Cjsl,"/").concat(l.Wtsl)),t.abrupt("return",l.Wtzt);case 20:i=!0,t.next=15;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](13),o=!0,c=t.t0;case 29:t.prev=29,t.prev=30,i||null==u["return"]||u["return"]();case 32:if(t.prev=32,!o){t.next=35;break}throw c;case 35:return t.finish(32);case 36:return t.finish(29);case 37:throw console.log("#EastMoneyStockTrader# query ".concat(e," status 未知 ")),"未知";case 41:throw t.prev=41,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# query ".concat(e," fail"),t.t1),t.t1;case 45:case"end":return t.stop()}}),t,this,[[0,41],[13,25,29,37],[30,,32,36]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"revoke",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:for(r="https://jy.xzsec.com/Trade/RevokeOrders?validatekey=".concat(this.validatekey),n=k()().format("YYYYMMDD"),s=[],i=!0,o=!1,c=void 0,t.prev=9,u=e[Symbol.iterator]();!(i=(h=u.next()).done);i=!0)l=h.value,s.push("".concat(n,"_").concat(l));t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](9),o=!0,c=t.t0;case 17:t.prev=17,t.prev=18,i||null==u["return"]||u["return"]();case 20:if(t.prev=20,!o){t.next=23;break}throw c;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return f={revokes:s.join(",")},t.next=28,ht["a"].post(r,f);case 28:p=t.sent,console.log("#EastMoneyStockTrader# revoke ",p),t.next=36;break;case 32:throw t.prev=32,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# revoke: ".concat(e.join(",")," fail"),t.t1),t.t1;case 36:case"end":return t.stop()}}),t,this,[[0,32],[9,13,17,25],[18,,20,24]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"revokelist",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Trade/GetRevokeList?validatekey=".concat(this.validatekey),t.next=6,ht["a"].post(r,null,{dataType:"json"});case 6:if(n=t.sent,this.hook(n),0!==n.Status){t.next=34;break}for(s=null,i=[],o=!0,c=!1,u=void 0,t.prev=14,h=n.Data[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)f=l.value,i.push(f.Wtbh),f.Wtbh===e&&(s=f.Wtbh);t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](14),c=!0,u=t.t0;case 22:t.prev=22,t.prev=23,o||null==h["return"]||h["return"]();case 25:if(t.prev=25,!c){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return console.log("#EastMoneyStockTrader# revokelist ",s||i),t.abrupt("return",e?s:i);case 34:throw n;case 35:t.next=41;break;case 37:throw t.prev=37,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# revokelist ".concat(e||""," fail"),t.t1),t.t1;case 41:case"end":return t.stop()}}),t,this,[[0,37],[14,18,22,30],[23,,25,29]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stocklist",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p,v,d;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return r="https://jy.xzsec.com/Search/GetStockList?validatekey=".concat(this.validatekey),t.next=6,ht["a"].get(r,null,{dataType:"json"});case 6:if(n=t.sent,this.hook(n),0!==n.Status){t.next=34;break}for(s=null,i=[],o=!0,c=!1,u=void 0,t.prev=14,h=n.Data[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)f=l.value,p=f.Zqdm,v=f.Zqmc,d={total:+f.Zqsl,available:+f.Kysl,unavailable:+f.Djsl},e===p&&(s={code:p,name:v,amount:d}),i.push({code:p,name:v,amount:d});t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](14),c=!0,u=t.t0;case 22:t.prev=22,t.prev=23,o||null==h["return"]||h["return"]();case 25:if(t.prev=25,!c){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return console.log("#EastMoneyStockTrader# stocklist : ",s||i),t.abrupt("return",e?s:i);case 34:throw n;case 35:t.next=41;break;case 37:throw t.prev=37,t.t1=t["catch"](0),console.warn("#EastMoneyStockTrader# stocklist ".concat(e||""," fail"),t.t1),t.t1;case 41:case"end":return t.stop()}}),t,this,[[0,37],[14,18,22,30],[23,,25,29]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"position",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=this.market(e).toUpperCase(),n="https://hsmarket.eastmoney.com/api/SHSZQuoteSnapshot?id=".concat(e,"&market=").concat(r,"&callback"),t.next=5,ht["a"].get(n,null);case 5:for(s=t.sent,s=s.slice(1,-2),i=JSON.parse(s),o={buy:{price:[],amount:[]},sell:{price:[],amount:[]}},c=0,u=[1,2,3,4,5];c<u.length;c++)h=u[c],o.buy.price.push(+i.fivequote["buy".concat(h)]),o.buy.amount.push(+i.fivequote["buy".concat(h,"_count")]),o.sell.price.push(+i.fivequote["sale".concat(h)]),o.sell.amount.push(+i.fivequote["sale".concat(h,"_count")]);return console.log("#EastMoneyStockTrader# position ".concat(e,": "),o),t.abrupt("return",o);case 14:throw t.prev=14,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# position ".concat(e," fail"),t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"account",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.check();case 3:return e="https://jy.xzsec.com/Com/queryAssetAndPositionV1?validatekey=".concat(this.validatekey),r={moneyType:"RMB"},t.next=7,ht["a"].post(e,r,{dataType:"json"});case 7:return n=t.sent,this.hook(n),s={money:{available:0,unavailable:0},profit:{today:0,all:0},capital:{stock:0,money:0}},0===n.Status&&(i=n.Data[0],s.money.available=+i.Kyzj,s.money.unavailable=+i.Djzj,s.profit.today=+(i.Dryk||0),s.profit.all=+i.Ljyk,s.capital.stock=+i.Zxsz,s.capital.money=+i.Zzc,console.log("#EastMoneyStockTrader# account ",s)),t.abrupt("return",s);case 14:throw t.prev=14,t.t0=t["catch"](0),console.warn("#EastMoneyStockTrader# account fail",t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Bt=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"trader",new Pt),Object(u["a"])(this,"isForceDisable",!0),this.isForceDisable="off"===v["a"].trader.status}return Object(o["a"])(t,[{key:"login",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.trader.key();case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](3),t.next=12,this.trader.check();case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](0),console.warn("#Trader# login ",t.t1);case 17:case"end":return t.stop()}}),t,this,[[0,14],[3,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"amount",value:function(t,e){try{if(t.startsWith("11")||t.startsWith("12")){var r=v["a"].trader.bond.amount/e;return+Number(Math.floor(r/v["a"].trader.bond.unit)*v["a"].trader.bond.unit).toFixed(0)}var n=v["a"].trader.stock.amount/e;return+Number(Math.floor(n/v["a"].trader.stock.unit)*v["a"].trader.stock.unit).toFixed(0)}catch(a){return t.startsWith("11")||t.startsWith("12")?10:100}}},{key:"buy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n){var s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:if(n){t.next=9;break}return t.next=6,this.trader.position(e);case 6:return s=t.sent,n=this.amount(e,s.sell.price[0]),t.abrupt("return",this.trader.buy(e,r,n));case 9:return t.next=11,this.trader.stocklist(e);case 11:i=t.sent,i||(i={code:e,name:r,amount:{total:0,available:0,unavailable:0}}),o=n;case 14:return t.next=17,this.trader.buy(e,r,o);case 17:return t.next=19,this.trader.stocklist(e);case 19:if(c=t.sent,u=c.amount.total-i.amount.total,u!==n){t.next=23;break}return t.abrupt("return");case 23:o=n-u,t.next=14;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](0),console.warn("#Trader# buy ",t.t0);case 31:case"end":return t.stop()}}),t,this,[[0,28]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n){var s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.trader.stocklist(e);case 5:if(s=t.sent,s){t.next=8;break}return t.abrupt("return");case 8:if(s.amount.available){t.next=10;break}return t.abrupt("return");case 10:n||(n=s.amount.available),n>s.amount.available&&(n=s.amount.available),i=n;case 13:return t.next=16,this.trader.sell(e,r,i);case 16:return t.next=18,this.trader.stocklist(e);case 18:if(o=t.sent,o){t.next=21;break}return t.abrupt("return");case 21:if(o.amount.available){t.next=23;break}return t.abrupt("return");case 23:if(c=s.amount.available-o.amount.available,c!==n){t.next=26;break}return t.abrupt("return");case 26:i=n-c,t.next=13;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](0),console.warn("#Trader# sell ",t.t0);case 34:case"end":return t.stop()}}),t,this,[[0,31]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"liquidation",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isForceDisable){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.trader.stocklist();case 5:e=t.sent,r=!0,n=!1,s=void 0,t.prev=9,i=e[Symbol.iterator]();case 11:if(r=(o=i.next()).done){t.next=18;break}return c=o.value,t.next=15,this.sell(c.code,c.name,c.amount.available);case 15:r=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](9),n=!0,s=t.t0;case 24:t.prev=24,t.prev=25,r||null==i["return"]||i["return"]();case 27:if(t.prev=27,!n){t.next=30;break}throw s;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=37;break;case 34:t.prev=34,t.t1=t["catch"](0),console.warn("#Trader# liquidation ",t.t1);case 37:case"end":return t.stop()}}),t,this,[[0,34],[9,20,24,32],[25,,27,31]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Lt=new Bt,Rt=r("5ca6"),Ct=r.n(Rt),It=(r("26e9"),r("5319"),function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(i["a"])(this,t),Object(u["a"])(this,"multiple",void 0),Object(u["a"])(this,"code",void 0),Object(u["a"])(this,"prevclose",void 0),Object(u["a"])(this,"details",[]),this.code=e,this.multiple=r}return Object(o["a"])(t,[{key:"url",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=p["a"].eastmoney.marketCode(t),n="".concat(r,".").concat(t),a="http://push2.eastmoney.com/api/qt/stock/details/get?fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54,f55&pos=".concat(e,"&secid=").concat(n);return a}},{key:"prevclose",value:function(){}},{key:"trends",value:function(){var t={time:[],price:[],volume:[]},e=0,r=0,n=0,a=G()(this.details).reverse();for(var s in a){var i=a[s];e=i[0].replace(/:/g,""),r+=+i[2],0===+s&&(n=e),+e>=+n+3*this.multiple&&(n=e,t.time.unshift(e),t.price.unshift(+i[1]),t.volume.unshift(r),r=0)}return t}},{key:"isFire",value:function(){var t=0,e=0,r=!0,n=!1,a=void 0;try{for(var s,i=this.details[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value,c=o[4];if(2===+c?t++:t=0,e>5)break;e++}}catch(u){n=!0,a=u}finally{try{r||null==i["return"]||i["return"]()}finally{if(n)throw a}}return t>=3}},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.url(this.code,e),t.next=3,ht["a"].get(r,null,{dataType:"json"});case 3:for(n=t.sent,s=n.data.details,i=!0,o=!1,c=void 0,t.prev=8,u=s[Symbol.iterator]();!(i=(h=u.next()).done);i=!0)l=h.value,f=l.split(","),this.details.unshift(f);t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](8),o=!0,c=t.t0;case 16:t.prev=16,t.prev=17,i||null==u["return"]||u["return"]();case 19:if(t.prev=19,!o){t.next=22;break}throw c;case 22:return t.finish(19);case 23:return t.finish(16);case 24:return this.prevclose=+n.data.prePrice,t.abrupt("return",this);case 26:case"end":return t.stop()}}),t,this,[[8,12,16,24],[17,,19,23]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()),Mt=function(){function t(e){Object(i["a"])(this,t),Object(u["a"])(this,"code",void 0),Object(u["a"])(this,"prevclose",void 0),Object(u["a"])(this,"details",[]),this.code=e}return Object(o["a"])(t,[{key:"url",value:function(t){var e=p["a"].eastmoney.marketCode(t),r="".concat(e,".").concat(t),n="http://push2.eastmoney.com/api/qt/stock/trends2/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58&secid=".concat(r,"&ndays=1&iscr=1");return n}},{key:"trends",value:function(){var t={time:[],price:[],volume:[]},e=!0,r=!1,n=void 0;try{for(var a,s=this.details[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value,o=k()(i[0]).format("HHmmss");t.time.push(o),t.price.push(+i[2]),t.volume.push(+i[5])}}catch(c){r=!0,n=c}finally{try{e||null==s["return"]||s["return"]()}finally{if(r)throw n}}return t}},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l,f,p=arguments;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=p.length>0&&void 0!==p[0]?p[0]:-10,r=this.url(this.code,e),t.next=4,ht["a"].get(r,null,{dataType:"json"});case 4:for(n=t.sent,s=n.data.trends,i=!0,o=!1,c=void 0,t.prev=9,u=s[Symbol.iterator]();!(i=(h=u.next()).done);i=!0)l=h.value,f=l.split(","),this.details.unshift(f);t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](9),o=!0,c=t.t0;case 17:t.prev=17,t.prev=18,i||null==u["return"]||u["return"]();case 20:if(t.prev=20,!o){t.next=23;break}throw c;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return this.prevclose=+n.data.preClose,t.abrupt("return",this);case 27:case"end":return t.stop()}}),t,this,[[9,13,17,25],[18,,20,24]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Ft=function t(e,r,n){return Object(i["a"])(this,t),3===r?new It(e,n):60===r?new Mt(e):void 0};function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=t[0],a=0;return r||(r=t.length-1),t.forEach((function(t,s){a>=r||(1===e||s%e===0)&&(n<+t&&(n=t),a++)})),n}function At(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=t[0],a=0;return r||(r=t.length-1),t.forEach((function(t,s){a>=r||(1===e||s%e===0)&&(n>+t&&(n=t),a++)})),n}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=0,a=0,s=0;return t.forEach((function(t,i){s>=r||(1===e?(n+=+t,s++):(a+=+t,i%e===0&&(n+=+a/r,s++)))})),s<r&&(r=s),+(n/r).toFixed(2)}var Nt=function(){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(i["a"])(this,t),Object(u["a"])(this,"profit",{time:{win:0,lose:0},change:{win:0,lose:0},rate:{win:0,lose:0},ratio:0}),Object(u["a"])(this,"trends",{time:[],price:[],volume:[],ma5:[],ma10:[],ma20:[],change:[],rate:[]}),Object(u["a"])(this,"code",void 0),Object(u["a"])(this,"period",void 0),Object(u["a"])(this,"multiple",void 0),Object(u["a"])(this,"prevclose",void 0),Object(u["a"])(this,"details",{time:[],price:[],volume:[]}),Object(u["a"])(this,"index",0),Object(u["a"])(this,"simulator",void 0),this.code=r,this.period=n,this.multiple=a,this.simulator=e}return Object(o["a"])(t,[{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Ft(this.code,this.period,this.multiple).capture();case 2:e=t.sent,this.details=e.trends(),this.details.time.reverse(),this.details.price.reverse(),this.details.volume.reverse(),this.prevclose=e.prevclose;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.simulator,r=e.analyseOfBuy,n=e.analyseOfSell,s=e.analyseOfBuy2,i=e.analyseOfSell2,o=0,c=0,t.next=5,this.capture();case 5:if(!this.hasNext()){t.next=47;break}if(this.next(),!(+this.trends.time[0]<93e3)){t.next=9;break}return t.abrupt("continue",5);case 9:if(!r(this.trends)){t.next=45;break}console.info("#analyseOfBuy# ",this.trends.time[0],this.trends.price[0],this.trends.change[0],this.trends.volume[0],this.trends.ma5[0],this.trends.ma10[0],this.trends.ma20[0]),o=this.trends.change[0];case 12:if(!this.hasNext()){t.next=22;break}if(this.next(),!n(this.trends,{change:o})){t.next=20;break}return c=this.trends.change[0],u=c-o,console.info("#analyseOfSell# ",this.trends.time[0],this.trends.price[0],this.trends.change[0],this.trends.volume[0],this.trends.ma5[0],this.trends.ma10[0],this.trends.ma20[0],u),this.update(u),t.abrupt("break",22);case 20:t.next=12;break;case 22:if(!s){t.next=45;break}h=0;case 24:if(!this.hasNext()){t.next=45;break}if(h++,!(h>3)){t.next=28;break}return t.abrupt("break",45);case 28:if(this.next(),!s(this.trends)){t.next=43;break}console.info("#analyseOfBuy2# ",this.trends.time[0],this.trends.price[0],this.trends.change[0],this.trends.volume[0],this.trends.ma5[0],this.trends.ma10[0],this.trends.ma20[0]),o=this.trends.change[0];case 32:if(!this.hasNext()){t.next=42;break}if(this.next(),!i(this.trends,{change:o})){t.next=40;break}return c=this.trends.change[0],l=c-o,console.info("#analyseOfSell2# ",this.trends.time[0],this.trends.price[0],this.trends.change[0],this.trends.volume[0],this.trends.ma5[0],this.trends.ma10[0],this.trends.ma20[0],l),this.update(l),t.abrupt("break",42);case 40:t.next=32;break;case 42:return t.abrupt("break",45);case 43:t.next=24;break;case 45:t.next=5;break;case 47:console.info("#Profit# ","总笔数 ",this.profit.time.win+this.profit.time.lose,"总收益 ",this.profit.change.win+this.profit.change.lose,"单笔收益 ",(this.profit.change.win+this.profit.change.lose)/(this.profit.time.win+this.profit.time.lose),this.profit),t.next=53;break;case 50:t.prev=50,t.t0=t["catch"](0),console.warn("MockProcessor ",t.t0);case 53:return t.abrupt("return",this);case 54:case"end":return t.stop()}}),t,this,[[0,50]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"hasNext",value:function(){var t=this.details.time.length;return this.index<t}},{key:"next",value:function(){this.index+=1;var t=this.details.time[this.index],e=this.details.price[this.index],r=this.details.volume[this.index],n=+((e-this.prevclose)/this.prevclose*100).toFixed(2);this.trends.time.unshift(t),this.trends.price.unshift(e),this.trends.volume.unshift(r),this.trends.change.unshift(n),this.trends.ma5.unshift(Vt(this.trends.price,1,5)),this.trends.ma10.unshift(Vt(this.trends.price,1,10)),this.trends.ma20.unshift(Vt(this.trends.price,1,20)),this.trends.rate.unshift(NaN)}},{key:"update",value:function(t){t>0?(this.profit.time.win++,this.profit.change.win+=t):(this.profit.time.lose++,this.profit.change.lose+=t);var e=this.profit.time.win+this.profit.time.lose+1;this.profit.rate.win=this.profit.time.win/e,this.profit.rate.lose=this.profit.time.lose/e,this.profit.ratio=(this.profit.change.win+this.profit.change.lose)/e}}]),t}(),Ht=function(){function t(e,r,n,a){Object(i["a"])(this,t),Object(u["a"])(this,"Processor",void 0),Object(u["a"])(this,"processor",void 0),Object(u["a"])(this,"target",void 0),Object(u["a"])(this,"key",void 0),Object(u["a"])(this,"codes",[]),this.Processor=e,this.target=r,this.key=n,this.codes=a}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ft.isTradingDay();case 3:if(!t.sent){t.next=28;break}return t.prev=4,t.next=7,Lt.login();case 7:return t.next=9,Lt.liquidation();case 9:if(this.codes){t.next=13;break}return t.next=12,this.capture();case 12:this.codes=t.sent;case 13:this.processor=new this.Processor(this.target,this.key,this.codes),this.processor.start(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),console.warn("T0Controller start ",t.t0);case 20:return this._isRunning=!0,t.next=24,b["a"].until("144500");case 24:return t.next=26,this.stop();case 26:return t.next=28,Lt.liquidation();case 28:t.next=34;break;case 30:t.prev=30,t.t1=t["catch"](0),this._isRunning=!1,console.warn("T0Controller start ",t.t1);case 34:case"end":return t.stop()}}),t,this,[[0,30],[4,17]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{this.processor.stop()}catch(e){console.warn("T0Controller stop ",e)}case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),qt=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"_broadcast",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:e})),r=(window.parent||window).opener,r&&["L3","L5"].includes(e.state)&&r.dispatchEvent(new CustomEvent("__Walle_Stock_Daily_Interval_Event",{detail:e}));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"broadcast",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r,n,s){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._broadcast({name:"".concat(e," - ").concat(r),vtype:"v0",stock:n,trend:s,state:r});case 1:case"end":return t.stop()}}),t,this)})));function e(e,r,n,a){return t.apply(this,arguments)}return e}()},{key:"buy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{Lt.buy(r.code,r.name)}catch(e){}case 1:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"sell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e,r){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{Lt.sell(r.code,r.name)}catch(e){}case 1:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()}]),t}(),Yt=new qt,Kt={L1:"L1",L2:"L2",L3:"L3",L4:"L4",L5:"L5"},Ut=function(){function t(e){Object(i["a"])(this,t),Object(u["a"])(this,"sse",void 0),Object(u["a"])(this,"period",void 0),Object(u["a"])(this,"codes",[]),Object(u["a"])(this,"_stocks",{}),Object(u["a"])(this,"_trend",{}),this.codes=e}return Object(o["a"])(t,[{key:"init",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=!0,r=!1,n=void 0,t.prev=3,s=this.codes[Symbol.iterator]();!(e=(i=s.next()).done);e=!0)o=i.value,this._trend[o]={time:[],price:[],volume:[],ma5:[],ma10:[],ma20:[],change:[],rate:[]};t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](3),r=!0,n=t.t0;case 11:t.prev=11,t.prev=12,e||null==s["return"]||s["return"]();case 14:if(t.prev=14,!r){t.next=17;break}throw n;case 17:return t.finish(14);case 18:return t.finish(11);case 19:case"end":return t.stop()}}),t,this,[[3,7,11,19],[12,,14,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"restart",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.sse=p["a"].sseStart(this.codes,{interval:1});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r=this,n=arguments;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:3,t.prev=1,this.period=e,t.next=5,this.init();case 5:return t.next=7,this.restart();case 7:return b["a"].interval(Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",r.update());case 1:case"end":return t.stop()}}),t)}))),null,this.period),t.next=10,Object(g["a"])(20*this.period*1e3);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.warn("T0SSE start ",t.t0);case 15:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){this.sse&&this.sse.stop()}},{key:"stocks",value:function(){return this.sse.getStocks(this.codes)}},{key:"stock",value:function(t){return this.sse.getStock(t)}},{key:"trends",value:function(){return this._trend}},{key:"trend",value:function(t){return this._trend[t]}},{key:"update",value:function(){console.log("@"),2===+this.sse.state()&&(console.warn("#T0# sse restart ...",this.sse.state()),this.restart()),this._bak=this._stocks,this._stocks=this.sse.getStocks(this.codes);var t=k()().format("HHmmss");for(var e in this._stocks){var r=this._bak[e],n=this._stocks[e];this._trend[e].time.unshift(t),this._trend[e].price.unshift(+n.price),this._trend[e].change.unshift(+n.change),this._trend[e].rate.unshift(+n.rate),this._trend[e].volume.unshift(+n.volume-(r?+r.volume:0)),this._trend[e].ma5.unshift(this.maOfPrice(e,1,5)),this._trend[e].ma10.unshift(this.maOfPrice(e,1,10)),this._trend[e].ma20.unshift(this.maOfPrice(e,1,20)),this._trend[e].time=this._trend[e].time.slice(0,100),this._trend[e].price=this._trend[e].price.slice(0,100),this._trend[e].change=this._trend[e].change.slice(0,100),this._trend[e].rate=this._trend[e].rate.slice(0,100),this._trend[e].volume=this._trend[e].volume.slice(0,100),this._trend[e].ma5=this._trend[e].ma5.slice(0,100),this._trend[e].ma10=this._trend[e].ma10.slice(0,100),this._trend[e].ma20=this._trend[e].ma20.slice(0,100)}}},{key:"maOfPrice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Vt(this._trend[t].price,e,r)}},{key:"maOfVolume",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Vt(this._trend[t].volume,e,r)}}]),t}(),Wt=O.a.createInstance({name:"storage",driver:O.a.INDEXEDDB}),zt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(i["a"])(this,t),Object(u["a"])(this,"record",{code:"",name:"",trend:{time:[],ma5:[],ma10:[],ma20:[],price:[],change:[],rate:[]},monitor:{time:"",price:"",change:"",rate:""},buy:{time:"",price:"",change:"",rate:""},sell:{time:"",price:"",change:"",rate:""}}),this.record.name=r,this.record.code=e}return Object(o["a"])(t,[{key:"key",value:function(){return this.record.key}},{key:"code",value:function(t){return t&&(this.record.code=t),this.record.code}},{key:"name",value:function(t){return t&&(this.record.code=t),this.record.name}},{key:"trend",value:function(t){return t&&(this.record.trend.time=t.time.slice(0,100),this.record.trend.ma5=t.ma5.slice(0,100),this.record.trend.ma10=t.ma10.slice(0,100),this.record.trend.ma20=t.ma20.slice(0,100),this.record.trend.price=t.price.slice(0,100),this.record.trend.change=t.change.slice(0,100),this.record.trend.rate=t.rate.slice(0,100)),this.record.trend}},{key:"monitor",value:function(t){if(t){var e=k()().format("HHmmss");this.record.monitor={time:e,price:t.price,change:t.change,rate:t.rate},this.record.name=t.name,this.record.code=t.code}return this.record.monitor}},{key:"buy",value:function(t){if(t){var e=k()().format("HHmmss");this.record.buy={time:e,price:t.price,change:t.change,rate:t.rate},this.record.name=t.name,this.record.code=t.code}return this.record.buy}},{key:"sell",value:function(t){if(t){var e=k()().format("HHmmss");this.record.sell={time:e,price:t.price,change:t.change,rate:t.rate},this.record.name=t.name,this.record.code=t.code}return this.record.sell}}]),t}(),Gt=function(){function t(e,r){Object(i["a"])(this,t),Object(u["a"])(this,"records",{}),Object(u["a"])(this,"target",void 0),Object(u["a"])(this,"key",void 0),this.target=e,this.key=r}return Object(o["a"])(t,[{key:"name",value:function(){var t=k()().day();return"t0-".concat(t,"-").concat(this.target,"-").concat(this.key)}},{key:"record",value:function(){return new zt}},{key:"append",value:function(t){var e=t.record,r=k()().format("HHmmss");return this.records[r]=e,this.save()}},{key:"all",value:function(){return this.records}},{key:"get",value:function(t){return this.records[t]||{}}},{key:"set",value:function(t,e){var r=e.record;return this.records[t]=r,this.save()}},{key:"load",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=k()().format("YYYY-MM-DD"),t.next=3,Wt.getItem(this.name());case 3:return r=t.sent,r&&r.date===e&&(this.records=r),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=k()().format("YYYY-MM-DD"),this.records.date=e,t.abrupt("return",Wt.setItem(this.name(),this.records));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Zt=function(){function t(e,r,n){Object(i["a"])(this,t),Object(u["a"])(this,"key",""),Object(u["a"])(this,"records",void 0),Object(u["a"])(this,"sse",void 0),Object(u["a"])(this,"hooks",Yt),Object(u["a"])(this,"current",void 0),Object(u["a"])(this,"isRunning",!1),Object(u["a"])(this,"isForceStop",!1),this.key=r,this.sse=new Ut(n),this.records=new Gt(e,r)}return Object(o["a"])(t,[{key:"start",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,i=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.records.load();case 3:return t.next=5,this.sse.start(e);case 5:this.isRunning=!0;case 6:return console.log("#"),t.next=10,Object(g["a"])(1e3);case 10:if(r=k()().format("HHmmss"),!(+r<93e3)){t.next=13;break}return t.abrupt("continue",6);case 13:if(!this.isForceStop){t.next=16;break}return console.log("T0Processor loop force stop ..."),t.abrupt("break",55);case 16:return t.prev=16,this.current=null,n=new zt(this.key),this.hooks.broadcast(this.key,Kt.L1),t.next=22,this.monitor();case 22:if(this.current=t.sent,this.current){t.next=25;break}return t.abrupt("continue",6);case 25:return n.monitor(this.current),console.log("T0Processor loop state L1 ... ",this.current),this.hooks.broadcast(this.key,Kt.L2,this.current,this.sse.trend(this.current.code)),t.next=30,this.analyseOfBuy(this.current);case 30:if(this.current=t.sent,this.current){t.next=33;break}return t.abrupt("continue",6);case 33:return n.buy(this.current),console.log("T0Processor loop state L2 ... ",this.current),this.hooks.broadcast(this.key,Kt.L3,this.current,this.sse.trend(this.current.code)),this.hooks.buy(this.key,this.current),console.log("T0Processor loop state L3 ... ",this.current),this.hooks.broadcast(this.key,Kt.L4,this.current,this.sse.trend(this.current.code)),t.next=41,this.analyseOfSell(this.current);case 41:this.current=t.sent,n.sell(this.current),console.log("T0Processor loop state L4 ... ",this.current),this.hooks.broadcast(this.key,Kt.L5,this.current,this.sse.trend(this.current.code)),this.hooks.sell(this.key,this.current),console.log("T0Processor loop state L5 ... ",this.current),function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["a"])(18e4);case 2:e.trend(i.sse.trend(e.code())),i.records.append(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(n),t.next=53;break;case 50:t.prev=50,t.t0=t["catch"](16),console.warn("T0Processor loop ",t.t0);case 53:t.next=6;break;case 55:this.isRunning=!1,t.next=61;break;case 58:t.prev=58,t.t1=t["catch"](0),console.warn("T0Processor loop ",t.t1);case 61:case"end":return t.stop()}}),t,this,[[0,58],[16,50]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stop",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isForceStop=!0,this.sse.stop(),t.abrupt("return",new Promise((function(t){setInterval((function(){e.isRunning||t()}),1e3)})));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),$t=function(t){function e(){var t,r;Object(i["a"])(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Object(A["a"])(this,(t=Object(V["a"])(e)).call.apply(t,[this].concat(a))),Object(u["a"])(Object(K["a"])(r),"isImpulseBoom",!1),r}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){return W(Object(V["a"])(e.prototype),"start",this).call(this,15)}},{key:"monitor",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.sse.trends();case 2:0,r=(new Date).getTime(),t.t0=a.a.keys(e);case 5:if((t.t1=t.t0()).done){t.next=19;break}if(n=t.t1.value,s=this.sse.trend(n),i=this.sse.stock(n),this.isImpulseBoom=!1,!(i.change-s.change[0]>3)){t.next=14;break}return console.info("T0LongPlatformProcessor analyseOfBuy impulse boom",n,i.change,i.change[0],i.change-s.change[0]),this.isImpulseBoom=!0,t.abrupt("return",i);case 14:if(!(i.change-s.change[2]>1)){t.next=17;break}return console.info("T0LongPlatformProcessor analyseOfBuy impulse breakthrough",n,i.change,s.change[2],i.change-s.change[2]),t.abrupt("return",i);case 17:t.next=5;break;case 19:return o=(new Date).getTime(),console.log("*",o-r+"ms"),t.next=23,Object(g["a"])(1500);case 23:t.next=2;break;case 25:t.next=30;break;case 27:t.prev=27,t.t2=t["catch"](0),console.warn("T0LongImpulseProcessor monitor ",t.t2);case 30:case"end":return t.stop()}}),t,this,[[0,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.code,t.prev=1,n=this.sse.trend(r),s=this.sse.stock(r),!this.isImpulseBoom){t.next=7;break}t.next=11;break;case 7:if(i=_t(n.volume.slice(3),1,60),n.volume[0]-i>0||n.volume[1]-i>0||n.volume[2]-i>0){t.next=10;break}return t.abrupt("return");case 10:console.info("T0LongPlatformProcessor analyseOfBuy volume breakthrough",n.time[0],n.volume[0]-i);case 11:return this.analyseOfBuy.high=s.change,this.analyseOfSell.high=s.change,t.abrupt("return",s);case 16:t.prev=16,t.t0=t["catch"](1),console.warn("T0LongImpulseProcessor analyseOfBuy ",t.t0);case 19:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,n=e.change,t.prev=1;case 2:if(s=this.sse.stock(r),i=this.sse.trend(r),o=.4,c=.5,u=.5,s.change>this.analyseOfSell.high&&(this.analyseOfSell.high=s.change),!(n-s.change>c)){t.next=10;break}return console.log("T0LongPlatformProcessor analyseOfSell stoploss",i.time[0],n,s.change),t.abrupt("return",s);case 10:if(!(i.ma5[0]<=i.ma5[1])){t.next=18;break}if(!(s.change-n>0&&s.change-n<u)){t.next=15;break}if(!(i.price[0]<i.price[1])){t.next=15;break}return console.log("T0LongPlatformProcessor analyseOfSell stopprofit",i.time[0],s.change,s.change),t.abrupt("return",s);case 15:if(!(s.change-n>0&&this.analyseOfSell.high-s.change>=o)){t.next=18;break}return console.log("T0LongPlatformProcessor analyseOfSell drawdown",i.time[0],this.analyseOfSell.high,s.change),t.abrupt("return",s);case 18:if(i.price[0]>i.ma5[0]&&i.price[0]>i.ma10[0]){t.next=25;break}if(!(i.ma10[0]<=i.ma10[1])){t.next=22;break}return console.log("T0LongPlatformProcessor analyseOfSell ma10 reverse",i.time[0],i.ma10[0],i.ma10[1]),t.abrupt("return",s);case 22:if(!(i.ma5[0]<=i.ma10[0])){t.next=25;break}return console.log("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",i.time[0],i.ma5[0],i.ma10[0]),t.abrupt("return",s);case 25:return t.next=27,Object(g["a"])(1e3);case 27:t.next=2;break;case 29:t.next=35;break;case 31:return t.prev=31,t.t0=t["catch"](1),console.warn("T0LongImpulseProcessor analyseOfSell ",t.t0),t.abrupt("return",this.sse.stock(r));case 35:case"end":return t.stop()}}),t,this,[[1,31]])})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(Zt),Jt=function(t){function e(){return Object(i["a"])(this,e),Object(A["a"])(this,Object(V["a"])(e).apply(this,arguments))}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){return W(Object(V["a"])(e.prototype),"start",this).call(this,30)}},{key:"monitor",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.sse.trends();case 2:0,r=(new Date).getTime(),t.t0=a.a.keys(e);case 5:if((t.t1=t.t0()).done){t.next=25;break}if(n=t.t1.value,s=this.sse.stock(n),i=this.sse.trend(n),s.price>i.ma5[0]&&s.price>i.price[0]){t.next=11;break}return t.abrupt("continue",5);case 11:if(o=i.change.slice(3),c=_t(o,1,60),u=At(o,1,60),c-u<2){t.next=16;break}return t.abrupt("continue",5);case 16:if(console.info("T0LongPlatformProcessor analyseOfBuy platform amplitude",n,"max = "+c,"min = "+u,c-u),s.change-c>1){t.next=19;break}return t.abrupt("continue",5);case 19:return console.info("T0LongPlatformProcessor analyseOfBuy platform breakthrough",n,s.change-c),this.analyseOfBuy.high=s.change,this.analyseOfSell.high=s.change,t.abrupt("return",s);case 25:return h=(new Date).getTime(),console.log("*",h-r+"ms"),t.next=29,Object(g["a"])(1500);case 29:t.next=2;break;case 31:t.next=36;break;case 33:t.prev=33,t.t2=t["catch"](0),console.warn("T0LongPlatformProcessor monitor ",t.t2);case 36:case"end":return t.stop()}}),t,this,[[0,33]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.code,t.prev=1,n=this.sse.trend(r),s=n.ma5[0],i=n.ma10[0],o=n.ma20[0],s>i){t.next=8;break}return t.abrupt("return");case 8:if(console.log("T0LongPlatformProcessor analyseOfBuy step-1 mas up",n.time[0],"ma5 = "+s,"ma10 = "+i,"ma20 = "+o),c=_t(n.volume.slice(3),1,60),n.volume[0]-c>0||n.volume[1]-c>0||n.volume[2]-c>0){t.next=12;break}return t.abrupt("return");case 12:return console.info("T0LongPlatformProcessor analyseOfBuy step-2 volume breakthrough",n.time[0],n.volume[0]-c),t.abrupt("return",this.sse.stock(r));case 16:t.prev=16,t.t0=t["catch"](1),console.warn("T0LongPlatformProcessor analyseOfBuy ",t.t0);case 19:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,n=e.change,t.prev=1;case 2:if(s=this.sse.stock(r),i=this.sse.trend(r),o=.4,c=.5,u=.5,s.change>this.analyseOfSell.high&&(this.analyseOfSell.high=s.change),!(n-s.change>c)){t.next=10;break}return console.log("T0LongPlatformProcessor analyseOfSell stoploss",i.time[0],n,s.change),t.abrupt("return",s);case 10:if(!(i.ma5[0]<=i.ma5[1])){t.next=18;break}if(!(s.change-n>0&&s.change-n<u)){t.next=15;break}if(!(i.price[0]<i.price[1])){t.next=15;break}return console.log("T0LongPlatformProcessor analyseOfSell stopprofit",i.time[0],s.change,i.change[0]),t.abrupt("return",s);case 15:if(!(s.change-n>0&&this.analyseOfSell.high-s.change>=o)){t.next=18;break}return console.log("T0LongPlatformProcessor analyseOfSell drawdown",i.time[0],this.analyseOfSell.high,s.change),t.abrupt("return",s);case 18:if(i.price[0]>i.ma5[0]&&i.price[0]>i.ma10[0]){t.next=25;break}if(!(i.ma10[0]<=i.ma10[1])){t.next=22;break}return console.log("T0LongPlatformProcessor analyseOfSell ma10 reverse",i.time[0],i.ma10[0],i.ma10[1]),t.abrupt("return",s);case 22:if(!(i.ma5[0]<=i.ma10[0])){t.next=25;break}return console.log("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",i.time[0],i.ma5[0],i.ma10[0]),t.abrupt("return",s);case 25:return t.next=27,Object(g["a"])(1e3);case 27:t.next=2;break;case 29:t.next=35;break;case 31:return t.prev=31,t.t0=t["catch"](1),console.warn("T0LongPlatformProcessor analyseOfSell ",t.t0),t.abrupt("return",this.sse.stock(r));case 35:case"end":return t.stop()}}),t,this,[[1,31]])})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(Zt),Xt=(r("3358"),r("5a2b"),r("9dd4"),{"long-impulse":$t,"long-platform":Jt});function Qt(t){try{if(t.change[0]-t.change[1]>3)return console.info("T0LongPlatformProcessor analyseOfBuy impulse boom",t.time[0],t.change[0],t.change[1],t.change[0]-t.change[1]),!0;if(!(t.change[0]-t.change[3]>1))return;console.info("T0LongPlatformProcessor analyseOfBuy impulse breakthrough",t.time[0],t.change[0],t.change[3],t.change[0]-t.change[3]);var e=_t(t.volume.slice(3),1,60);if(!(t.volume[0]-e>0||t.volume[1]-e>0||t.volume[2]-e>0))return;return console.info("T0LongPlatformProcessor analyseOfBuy volume breakthrough",t.time[0],t.volume[0]-e),Qt.high=t.change[0],te.high=t.change[0],!0}catch(r){console.warn("T0LongImpulseProcessor analyseOfBuy ",r)}}function te(t,e){var r=e.change;try{var n={change:t.change[0],price:t.price[0]},a=.4,s=.5,i=.5;if(n.change>te.high&&(te.high=n.change),r-n.change>s)return console.log("T0LongPlatformProcessor analyseOfSell stoploss",t.time[0],r,n.change),n;if(n.change-r>0&&te.high-n.change>=a)return console.log("T0LongPlatformProcessor analyseOfSell drawdown",t.time[0],te.high,n.change),n;if(t.ma5[0]<=t.ma5[1]&&n.change-r>0&&n.change-r<i&&t.price[0]<t.price[1])return console.log("T0LongPlatformProcessor analyseOfSell stopprofit",t.time[0],r,n.change),n;if(!(t.price[0]>t.ma5[0]&&t.price[0]>t.ma10[0])){if(t.ma10[0]<=t.ma10[1])return console.log("T0LongPlatformProcessor analyseOfSell ma10 reverse",t.time[0],t.ma10[0],t.ma10[1]),n;if(t.ma5[0]<=t.ma10[0])return console.log("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",t.time[0],t.ma5[0],t.ma10[0]),n}}catch(o){console.warn("T0LongImpulseProcessor analyseOfSell ",o)}}var ee={analyseOfBuy:Qt,analyseOfSell:te};function re(t){try{if(t.change.length<60)return;var e=t.ma5[0],r=t.ma10[0],n=t.ma20[0];if(!(e>r))return;console.info("T0LongPlatformProcessor analyseOfBuy step-1 mas up",t.time[0],"ma5 = "+e,"ma10 = "+r,"ma20 = "+n);var a=_t(t.volume.slice(3),1,60);if(!(t.volume[0]-a>0||t.volume[1]-a>0||t.volume[2]-a>0))return;console.info("T0LongPlatformProcessor analyseOfBuy step-2 volume breakthrough",t.time[0],t.volume[0]-a);var s=t.change.slice(3),i=_t(s,1,60),o=At(s,1,60);if(!(i-o<2))return;if(console.info("T0LongPlatformProcessor analyseOfBuy step-3 platform amplitude",t.time[0],"max = "+i,"min = "+o,i-o),!(t.change[0]-i>1))return;return console.info("T0LongPlatformProcessor analyseOfBuy step-4 platform breakthrough",t.time[0],t.change[0]-i),re.high=t.change[0],ne.high=t.change[0],!0}catch(c){console.warn("T0LongPlatformProcessor analyseOfBuy ",c)}}function ne(t,e){var r=e.change;try{var n={change:t.change[0],price:t.price[0]},a=.4,s=.5,i=.5;if(n.change>ne.high&&(ne.high=n.change),r-n.change>s)return console.log("T0LongPlatformProcessor analyseOfSell stoploss",t.time[0],r,n.change),n;if(n.change-r>0&&ne.high-n.change>=a)return console.log("T0LongPlatformProcessor analyseOfSell drawdown",t.time[0],ne.high,n.change),n;if(t.ma5[0]<=t.ma5[1]&&n.change-r>0&&n.change-r<i&&t.price[0]<t.price[1])return console.log("T0LongPlatformProcessor analyseOfSell stopprofit",t.time[0],r,n.change),n;if(!(t.price[0]>t.ma5[0]&&t.price[0]>t.ma10[0])){if(t.ma10[0]<=t.ma10[1])return console.log("T0LongPlatformProcessor analyseOfSell ma10 reverse",t.time[0],t.ma10[0],t.ma10[1]),n;if(t.ma5[0]<=t.ma10[0])return console.log("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",t.time[0],t.ma5[0],t.ma10[0]),n}}catch(o){return console.warn("T0LongPlatformProcessor analyseOfSell ",o),!0}}var ae={analyseOfBuy:re,analyseOfSell:ne};r("d5d6"),r("75a4"),r("47b3");var se={"long-impulse":ee,"long-platform":ae},ie=function(t){function e(){return Object(i["a"])(this,e),Object(A["a"])(this,Object(V["a"])(e).apply(this,arguments))}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"capture2",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h,l,f,v;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.prev=1,t.next=4,p["a"].captureList(M["bb"].key);case 4:r=t.sent,r&&(e=e.concat(r)),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:return t.prev=10,t.next=13,p["a"].captureList(M["e"].key);case 13:n=t.sent,n&&(e=e.concat(n)),t.next=19;break;case 17:t.prev=17,t.t1=t["catch"](10);case 19:s=0,i=[],o=!0,c=!1,u=void 0,t.prev=24,h=e[Symbol.iterator]();case 26:if(o=(l=h.next()).done){t.next=42;break}return f=l.value,v=d["a"].stockOfBond(f.code),t.next=31,_.isValidStock(v,"");case 31:if(t.sent){t.next=33;break}return t.abrupt("continue",39);case 33:if(!(f.price<=0)){t.next=35;break}return t.abrupt("continue",39);case 35:if(i.push(f.code),!(s>=15)){t.next=38;break}return t.abrupt("break",42);case 38:s++;case 39:o=!0,t.next=26;break;case 42:t.next=48;break;case 44:t.prev=44,t.t2=t["catch"](24),c=!0,u=t.t2;case 48:t.prev=48,t.prev=49,o||null==h["return"]||h["return"]();case 51:if(t.prev=51,!c){t.next=54;break}throw u;case 54:return t.finish(51);case 55:return t.finish(48);case 56:return t.abrupt("return",i);case 57:case"end":return t.stop()}}),t,null,[[1,8],[10,17],[24,44,48,56],[49,,51,55]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s,i,o,c,u,h;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],r=d["a"].bonds(),n=!0,s=!1,i=void 0,t.prev=5,o=r[Symbol.iterator]();case 7:if(n=(c=o.next()).done){t.next=18;break}return u=c.value,h=d["a"].stockOfBond(u),t.next=12,_.isValidStock(h,"");case 12:if(t.sent){t.next=14;break}return t.abrupt("continue",15);case 14:e.push(u);case 15:n=!0,t.next=7;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](5),s=!0,i=t.t0;case 24:t.prev=24,t.prev=25,n||null==o["return"]||o["return"]();case 27:if(t.prev=27,!s){t.next=30;break}throw i;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return t.abrupt("return",e);case 33:case"end":return t.stop()}}),t,null,[[5,20,24,32],[25,,27,31]])})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Ht);Object(u["a"])(ie,"Processors",Xt),Object(u["a"])(ie,"Simulators",se);var oe=function(t){function e(){return Object(i["a"])(this,e),Object(A["a"])(this,Object(V["a"])(e).apply(this,arguments))}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){return W(Object(V["a"])(e.prototype),"start",this).call(this,3)}},{key:"monitor",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.sse.trends();case 2:0,t.t0=a.a.keys(e);case 4:if((t.t1=t.t0()).done){t.next=14;break}if(r=t.t1.value,n=this.sse.trend(r),!(n.price[0]>n.ma5[0])){t.next=12;break}if(!(n.price[0]>=n.price[1]&&n.price[1]>=n.price[2]&&n.price[2]>=n.price[3])){t.next=10;break}return t.abrupt("return",this.sse.stock(r));case 10:if(!(n.change[0]-n.change[3]>=.2)){t.next=12;break}return t.abrupt("return",this.sse.stock(r));case 12:t.next=4;break;case 14:return t.next=16,Object(g["a"])(1e3);case 16:t.next=2;break;case 18:t.next=23;break;case 20:t.prev=20,t.t2=t["catch"](0),console.warn("T0LongImpulseProcessor monitor ",t.t2);case 23:case"end":return t.stop()}}),t,this,[[0,20]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p,v,d,b,m;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,t.prev=1,n=0;case 3:if(n++,!(n>6)){t.next=7;break}return t.abrupt("return");case 7:if(!(n>1)){t.next=10;break}return t.next=10,Object(g["a"])(1e3);case 10:if(s=this.sse.stock(r),i=this.sse.trend(r),i.price[0]>i.ma5[0]&&i.change[0]>i.change[1]){t.next=14;break}return t.abrupt("return");case 14:if(o=i.ma5[0],c=i.ma10[0],u=i.ma20[0],h=Vt(i.price,1,60),o>c&&c>u&&u>h){t.next=20;break}return t.abrupt("return");case 20:if(console.log("T0LongImpulseProcessor analyseOfBuy step-1 mas up ",i.time[0],"ma5 = "+o,"ma10 = "+c,"ma20 = "+u),l=Vt(i.volume,1,5),f=Vt(i.volume,1,10),p=Vt(i.volume,1,20),l>f&&f>p){t.next=26;break}return t.abrupt("return");case 26:for(console.log("T0LongImpulseProcessor analyseOfBuy step-2 volmue up",i.time[0],"ma5 = "+l,"ma10 = "+f,"ma20 = "+p),v=0,d=0,b=[0,1,2,3,4,5,7,8,9];d<b.length;d++)m=b[d],i.ma10[m]>i.ma10[m+1]&&v++;if(v<8){t.next=31;break}return t.abrupt("return");case 31:if(console.log("T0LongImpulseProcessor analyseOfBuy step-3 ma boot",i.time[0],"ma10ContinueRiseTick = ",v),!(i.price[0]>=i.price[1]&&i.price[1]>=i.price[2]&&i.price[2]>=i.price[3])){t.next=35;break}return console.log("T0LongImpulseProcessor analyseOfBuy change rise",i.time[0],"price += ",i.price[0],i.price[1],i.price[2]),t.abrupt("return",s);case 35:if(!(i.change[0]-i.change[3]>=.2)){t.next=38;break}return console.log("T0LongImpulseProcessor analyseOfBuy change fire",i.time[0],"change += ",i.change[0]-i.change[3]),t.abrupt("return",s);case 38:t.next=3;break;case 40:t.next=45;break;case 42:t.prev=42,t.t0=t["catch"](1),console.warn("T0LongImpulseProcessor analyseOfBuy ",t.t0);case 45:case"end":return t.stop()}}),t,this,[[1,42]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,t.prev=1;case 2:if(n=this.sse.stock(r),s=this.sse.trend(r),!(s.price[0]<s.price[1]&&s.price[1]<s.price[2])){t.next=8;break}return console.log("T0LongImpulseProcessor analyseOfSell price down x2",s.time[0],s.price[0],s.price[1],s.price[2]),t.abrupt("return",n);case 8:if(!(s.ma5[1]>s.price[1])){t.next=11;break}return console.log("T0LongImpulseProcessor analyseOfSell ma down price < ma",s.time[0],s.ma5[1],s.price[1]),t.abrupt("return",n);case 11:return t.next=13,Object(g["a"])(1e3);case 13:t.next=2;break;case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t["catch"](1),console.warn("T0LongImpulseProcessor analyseOfSell ",t.t0),t.abrupt("return",this.sse.stock(r));case 21:case"end":return t.stop()}}),t,this,[[1,17]])})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(Zt),ce=function(t){function e(){return Object(i["a"])(this,e),Object(A["a"])(this,Object(V["a"])(e).apply(this,arguments))}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"start",value:function(){return W(Object(V["a"])(e.prototype),"start",this).call(this,15)}},{key:"monitor",value:function(){var t=Object(s["a"])(a.a.mark((function t(){var e,r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.sse.trends();case 2:0,t.t0=a.a.keys(e);case 4:if((t.t1=t.t0()).done){t.next=12;break}if(r=t.t1.value,n=this.sse.stock(r),s=this.sse.trend(r),!(s.change[0]-s.change[4]>=.4)){t.next=10;break}return t.abrupt("return",n);case 10:t.next=4;break;case 12:return t.next=14,Object(g["a"])(3e4);case 14:t.next=2;break;case 16:t.next=21;break;case 18:t.prev=18,t.t2=t["catch"](0),console.warn("T0LongPlatformProcessor monitor ",t.t2);case 21:case"end":return t.stop()}}),t,this,[[0,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"analyseOfBuy",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s,i,o,c,u,h,l,f,p;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.code,t.prev=1,n=this.sse.trend(r),n.price[0]>n.ma5[0]&&n.change[0]>n.change[1]){t.next=5;break}return t.abrupt("return");case 5:if(s=n.ma5[0],i=n.ma10[0],o=n.ma20[0],s>i&&i>o){t.next=10;break}return t.abrupt("return");case 10:if(console.log("T0LongPlatformProcessor analyseOfBuy step-1 mas up ",n.time[0],"ma5 = "+s,"ma10 = "+i,"ma20 = "+o),c=Vt(n.volume,1,5),u=Vt(n.volume,1,10),h=Vt(n.volume,1,20),c>u&&u>h){t.next=16;break}return t.abrupt("return");case 16:if(console.log("T0LongPlatformProcessor analyseOfBuy step-2 volmue up",n.time[0],"ma5 = "+c,"ma10 = "+u,"ma20 = "+h),l=n.change.slice(3),f=_t(l,1,20),p=At(l,1,20),console.log("T0LongPlatformProcessor analyseOfBuy step-3 platform max & min",n.time[0],"max = "+f,"min = "+p),f-p<2){t.next=23;break}return t.abrupt("return");case 23:if(console.log("T0LongPlatformProcessor analyseOfBuy step-3 platform amplitude",n.time[0],f-p),n.change[0]-f>=.4){t.next=26;break}return t.abrupt("return");case 26:if(console.log("T0LongPlatformProcessor analyseOfBuy step-4 platform reakthrough ",n.time[0],n.change[0]-f),n.price[0]>n.price[1]&&n.price[1]>n.price[2]){t.next=29;break}return t.abrupt("return");case 29:return console.log("T0LongPlatformProcessor analyseOfBuy step-5 ma up",n.time[0],n.ma5[0],n.ma5[1],n.ma5[2]),t.abrupt("return",this.sse.stock(r));case 33:t.prev=33,t.t0=t["catch"](1),console.warn("T0LongPlatformProcessor analyseOfBuy ",t.t0);case 36:case"end":return t.stop()}}),t,this,[[1,33]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"analyseOfSell",value:function(){var t=Object(s["a"])(a.a.mark((function t(e){var r,n,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.code,t.prev=1;case 2:if(n=this.sse.stock(r),s=this.sse.trend(r),!(s.ma5[0]<=s.ma10[0])){t.next=8;break}return console.log("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",s.time[0],s.ma5[0],s.ma10[0]),t.abrupt("return",n);case 8:return t.next=10,Object(g["a"])(1e3);case 10:t.next=2;break;case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t["catch"](1),console.warn("T0LongPlatformProcessor analyseOfSell ",t.t0),t.abrupt("return",this.sse.stock(r));case 18:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(Zt),ue=r("1826"),he=r.n(ue),le=r("c141"),fe=r.n(le),pe=(r("1aaa"),{"long-impulse":oe,"long-platform":ce,"short-impulse":he.a,"short-platform":fe.a});function ve(t){try{if(!(t.price[0]>t.ma5[0]&&t.change[0]>t.change[1]))return;var e=t.ma5[0],r=t.ma10[0],n=t.ma20[0],a=Vt(t.price,1,60);if(!(e>r&&r>n&&n>a))return;console.info("T0LongImpulseProcessor analyseOfBuy step-1 mas up ",t.time[0],"ma5 = "+e,"ma10 = "+r,"ma20 = "+n);var s=Vt(t.volume,1,5),i=Vt(t.volume,1,10),o=Vt(t.volume,1,20);if(!(s>i&&i>o))return;console.info("T0LongImpulseProcessor analyseOfBuy step-2 volmue up",t.time[0],"ma5 = "+s,"ma10 = "+i,"ma20 = "+o);for(var c=0,u=0,h=[0,1,2,3,4,5,7,8,9];u<h.length;u++){var l=h[u];t.ma10[l]>t.ma10[l+1]&&c++}if(!(c<8))return;if(console.info("T0LongImpulseProcessor analyseOfBuy step-3 ma boot",t.time[0],"ma10ContinueRiseTick = ",c),t.price[0]>=t.price[1]&&t.price[1]>=t.price[2]&&t.price[2]>=t.price[3])return console.info("T0LongImpulseProcessor analyseOfBuy step-4 continue rise",t.time[0],"price += ",t.price[0],t.price[1],t.price[2]),!0;if(t.change[0]-t.change[3]>=.2)return console.info("T0LongImpulseProcessor analyseOfBuy step-5 change fire",t.time[0],"change += ",t.change[0]-t.change[3]),!0}catch(f){console.warn("T0LongImpulseProcessor analyseOfBuy ",f)}}function de(t){try{if(t.price[0]<t.price[1]&&t.price[1]<t.price[2])return console.info("T0LongImpulseProcessor analyseOfSell price down x2",t.time[0],t.price[0],t.price[1],t.price[2]),!0;if(t.ma5[1]>t.price[1])return console.info("T0LongImpulseProcessor analyseOfSell ma down price < ma",t.time[0],t.ma5[1],t.price[1]),!0}catch(e){console.warn("T0LongImpulseProcessor analyseOfSell ",e)}}var be={analyseOfBuy:ve,analyseOfSell:de};function me(t){try{if(!(t.price[0]>t.ma5[0]&&t.change[0]>t.change[1]))return;var e=t.ma5[0],r=t.ma10[0],n=t.ma20[0];if(!(e>r&&r>n))return;console.info("T0LongPlatformProcessor analyseOfBuy step-1 mas up ",t.time[0],"ma5 = "+e,"ma10 = "+r,"ma20 = "+n);var a=Vt(t.volume,1,5),s=Vt(t.volume,1,10),i=Vt(t.volume,1,20);if(!(a>s&&s>i))return;console.info("T0LongPlatformProcessor analyseOfBuy step-2 volmue up",t.time[0],"ma5 = "+a,"ma10 = "+s,"ma20 = "+i);var o=t.change.slice(3),c=_t(o,1,20),u=At(o,1,20);if(console.info("T0LongPlatformProcessor analyseOfBuy step-3 platform max & min",t.time[0],"max = "+c,"min = "+u),!(c-u<2))return;if(console.info("T0LongPlatformProcessor analyseOfBuy step-3 platform amplitude",t.time[0],c-u),!(t.change[0]-c>=.4))return;if(console.info("T0LongPlatformProcessor analyseOfBuy step-4 platform reakthrough ",t.time[0],t.change[0]-c),!(t.price[0]>t.price[1]&&t.price[1]>t.price[2]))return;return console.info("T0LongPlatformProcessor analyseOfBuy step-5 ma up",t.time[0],t.ma5[0],t.ma5[1],t.ma5[2]),!0}catch(h){console.warn("T0LongPlatformProcessor analyseOfBuy ",h)}}function ye(t){try{if(t.ma5[0]<=t.ma10[0])return console.info("T0LongPlatformProcessor analyseOfSell ma down ma5 <= ma10",t.time[0],t.ma5[0],t.ma10[0]),!0}catch(e){console.warn("T0LongPlatformProcessor analyseOfSell ",e)}}var ge={analyseOfBuy:me,analyseOfSell:ye};var we=r("5fcd"),ke=r.n(we),xe=r("5c93"),Oe=r.n(xe),je=(r("9206"),{"long-impulse":be,"long-platform":ge,"short-impulse":ke.a,"short-platform":Oe.a}),Se=function(t){function e(){return Object(i["a"])(this,e),Object(A["a"])(this,Object(V["a"])(e).apply(this,arguments))}return Object(N["a"])(e,t),Object(o["a"])(e,[{key:"capture",value:function(){var t=Object(s["a"])(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Ht);Object(u["a"])(Se,"Processors",pe),Object(u["a"])(Se,"Simulators",je);var Te=function(){function t(){Object(i["a"])(this,t),Object(u["a"])(this,"Controllers",{bond:ie,future:Se})}return Object(o["a"])(t,[{key:"processor",value:function(t,e,r){var n=this.Controllers[t],a=this.Controllers[t].Processors[e];return new n(a,t,e,r)}},{key:"simulator",value:function(t,e,r,n,a){var s=this.Controllers[t].Simulators[e];return new Nt(s,r,n,a)}},{key:"processors",value:function(t){return this.Controllers[t].Processors}},{key:"simulators",value:function(t){return this.Controllers[t].Simulators}}]),t}(),Ee=new Te;window.__Walle_Stock_Loop=St,window.__Walle_Stock_Controller=ut,window.__Walle_Stock_Pool=m["a"],window.__Walle_Stock_Bond=tt,window.__Walle_Stock_Flow=E,window.__Walle_Stock_Gene=L,window.__Walle_Stock_Crawler=p["a"],window.__Walle_Stock_Trader=Lt,window.__Walle_Stock_Strategy=Ct.a,window.__Walle_Stock_Define=M["lb"],window.__Walle_Stock_Market=ft,window.__Walle_Stock_Whitelist=d["a"],window.__Walle_Stock_Cron=b["a"],window.__Walle_Stock_Validator=_,window.__Walle_Stock_T0=Ee},1826:function(t,e){},"1aaa":function(t,e){},"1ba9":function(t,e,r){function n(){}function a(t,e,r,n){n>=0?(t.day.up++,t.profit.max+=n,t.profit.max=+t.profit.max.toFixed(2)):t.day.down++,t.day.normal++,t.profit.normal+=n,t.profit.normal=+t.profit.normal.toFixed(2),t.profitrate.normal=+(t.profit.normal/t.day.normal).toFixed(2),t.winrate.normal=+(t.day.up/t.day.normal*100).toFixed(2),t["daily-open-ptcchange"].push(e,r),t["daily-close-ptcchange"].push(e,n);var a=t["daily-open-profit"].length,s=t["daily-close-profit"].length,i=t["daily-open-profit"][a-1]||0,o=t["daily-close-profit"][s-1]||0;i+=r,o+=n,i=+i.toFixed(2),o=+o.toFixed(2),t["daily-open-profit"].push(e,i),t["daily-close-profit"].push(e,o)}r("b680"),t.exports={init:n,process:a}},"21a6":function(t,e,r){(function(r){var n,a,s;(function(r,i){a=[],n=i,s="function"===typeof n?n.apply(e,a):n,void 0===s||(t.exports=s)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){o(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,r){var o=i.URL||i.webkitURL,c=document.createElement("a");e=e||t.name||"download",c.download=e,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?s(c):a(c.href)?n(t,e,r):s(c,c.target="_blank")):(c.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(c.href)}),4e4),setTimeout((function(){s(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,i){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,i),r);else if(a(t))n(t,r,i);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){s(o)}))}}:function(t,e,r,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,r);var s="application/octet-stream"===t.type,o=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},u.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,l=h.createObjectURL(t);a?a.location=l:location.href=l,a=null,setTimeout((function(){h.revokeObjectURL(l)}),4e4)}});i.saveAs=o.saveAs=o,t.exports=o}))}).call(this,r("c8ba"))},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),s=r("d039"),i=r("ad6d"),o="toString",c=RegExp.prototype,u=c[o],h=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=o;(h||l)&&n(RegExp.prototype,o,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?i.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},"29b1":function(t,e,r){r("b680");var n=r("870f"),a=20,s=0,i=0,o={};function c(){s=0,0,i=0,o={}}function u(t,e,r,s){var c=0;c=o.date?n.getPTCChange(o.open,o.close):n.getPTCChange(r,s),c>=a?i++:i=0,o={date:e,open:r,close:s}}function h(t,e,r,s){var o=n.getPTCChange(r,s);o>=a?i++:i=0}function l(t,e,r,a){var o=n.getPTCChange(r,a);i>=2&&(t.day.hot++,t.profit["hot"]=+(t.profit["hot"]+o).toFixed(2),t.profitrate["hot"]=+(t.profit["hot"]/t.day["hot"]).toFixed(2),o>0?s++:0,t.winrate["hot"]=+(s/t.day["hot"]*100).toFixed(2)),window?u(t,e,r,a):h(t,e,r,a)}t.exports={process:l,init:c}},"2c5c":function(t,e){var r={};function n(t,e,n){for(var a in r={},t){var s=t[a],i=+a+1+"";t[i]?n[a]>0&&n[i]>0?r[s]="+":n[a]<0&&n[i]<0?r[s]="-":r[s]="~":r[s]="~"}}function a(t,e,n){for(var a in r={},t){var s=t[a],i=+a+1+"",o=+a+2+"";t[i]&&t[o]?n[i]>0&&n[o]>0?r[s]="+":n[i]<0&&n[o]<0?r[s]="-":r[s]="~":r[s]="~"}}function s(t,e,r){window?n(t,e,r):a(t,e,r)}function i(t){return r[t]||"~"}t.exports={process:s,trend:i}},"32a9":function(t,e,r){r("b680");var n=r("870f"),a=r("2c5c"),s=0;function i(){s=0,0}function o(t,e,r,i){var o=n.getPTCChange(r,i),c=a.trend(e);"+"===c&&(t.day["up-trade"]++,t.profit["up-trade"]=+(t.profit["up-trade"]+o).toFixed(2),t.profitrate["up-trade"]=+(t.profit["up-trade"]/t.day["up-trade"]).toFixed(2),o>0?s++:0,t.winrate["up-trade"]=+(s/t.day["up-trade"]*100).toFixed(2))}t.exports={process:o,init:i}},3358:function(t,e){},"3f62":function(t,e,r){r("b680");var n=r("870f"),a=1,s=0;function i(){s=0,0,a=1}function o(t,e,r,i){var o=n.getPTCChange(r,i);a*=1+o/100*.1,t.profit["compound"]=1e3*(a-1),t.profit["compound"]=+t.profit["compound"].toFixed(2),t.day["compound"]++,t.profitrate["compound"]=+(t.profit["compound"]/t.day["compound"]).toFixed(2),o>0?s++:0,t.winrate["compound"]=+(s/t.day["compound"]*100).toFixed(2)}t.exports={process:o,init:i}},"466d":function(t,e,r){"use strict";var n=r("d784"),a=r("825a"),s=r("50c4"),i=r("1d80"),o=r("8aa5"),c=r("14c3");n("match",1,(function(t,e,r){return[function(e){var r=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var i=a(t),u=String(this);if(!i.global)return c(i,u);var h=i.unicode;i.lastIndex=0;var l,f=[],p=0;while(null!==(l=c(i,u))){var v=String(l[0]);f[p]=v,""===v&&(i.lastIndex=o(u,s(i.lastIndex),h)),p++}return 0===p?null:f}]}))},"47b3":function(t,e){},"4de4":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").filter,s=r("1dde"),i=r("ae40"),o=s("filter"),c=i("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("ade3");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"5a2b":function(t,e){},"5c93":function(t,e){},"5ca6":function(t,e,r){r("a4d3"),r("e01a"),r("d28b"),r("caad"),r("d3b7"),r("2532"),r("3ca3"),r("ddb0");var n=r("a34a");r("96cf");var a=r("c973"),s=r("ce69"),i=s.generate,o=r("2c5c"),c=[r("1ba9"),r("870f"),r("71cc"),r("3f62"),r("29b1"),r("32a9"),r("c116")];function u(t,e){return h.apply(this,arguments)}function h(){return h=a(n.mark((function t(e,r){var a,s,u,h,l,f,p,v,d,b,m,y,g,w,k,x,O,j,S,T,E;return n.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=i(e),t.prev=1,r){t.next=4;break}return t.abrupt("return",a);case 4:for(s=r.date,u=r.open,h=r.close,e.includes("上证指数")&&o.process(s,u,h),l=!0,f=!1,p=void 0,t.prev=11,v=c[Symbol.iterator]();!(l=(d=v.next()).done);l=!0)b=d.value,b.init();t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](11),f=!0,p=t.t0;case 19:t.prev=19,t.prev=20,l||null==v["return"]||v["return"]();case 22:if(t.prev=22,!f){t.next=25;break}throw p;case 25:return t.finish(22);case 26:return t.finish(19);case 27:m=s.length,y=0;case 29:if(!(y<m)){t.next=55;break}for(g=s[y],w=u[y],k=h[y],x=!0,O=!1,j=void 0,t.prev=36,S=c[Symbol.iterator]();!(x=(T=S.next()).done);x=!0)E=T.value,E.process(a,g,w,k);t.next=44;break;case 40:t.prev=40,t.t1=t["catch"](36),O=!0,j=t.t1;case 44:t.prev=44,t.prev=45,x||null==S["return"]||S["return"]();case 47:if(t.prev=47,!O){t.next=50;break}throw j;case 50:return t.finish(47);case 51:return t.finish(44);case 52:y++,t.next=29;break;case 55:t.next=60;break;case 57:t.prev=57,t.t2=t["catch"](1),console.log("#strategy# analyse fail: ",t.t2);case 60:return t.abrupt("return",a);case 61:case"end":return t.stop()}}),t,null,[[1,57],[11,15,19,27],[20,,22,26],[36,40,44,52],[45,,47,51]])}))),h.apply(this,arguments)}t.exports={analyse:u}},"5fcd":function(t,e){},"71cc":function(t,e,r){r("b680");var n=r("870f"),a=2,s=0,i=0,o=!1,c={};function u(){s=0,0,0,i=0,o=!1,c={}}function h(t){return o}function l(t,e,r,a){var s=0;s=c.date?n.getPTCChange(c.open,c.close):n.getPTCChange(r,a),s>=0?(i=0):(0,i++),c={date:e,open:r,close:a}}function f(t,e,r,a){var s=n.getPTCChange(r,a);s>=0?(i=0):(0,i++)}function p(t,e,r,c){var u=n.getPTCChange(r,c);i<a?(o=!1,t.day.trade++,t.profit.strategy+=u,t.profit.strategy=+t.profit.strategy.toFixed(2),t.profitrate["strategy"]=+(t.profit["strategy"]/t.day["trade"]).toFixed(2),u>0?s++:0,t.winrate["strategy"]=+(s/t.day["trade"]*100).toFixed(2)):(o=!0,t.day.rest++),window?l(t,e,r,c):f(t,e,r,c)}t.exports={isPeriodRest:h,process:p,init:u}},"720d":function(t,e,r){(function(t,r){r(e)})(0,(function(t){"use strict";var e="0123456789abcdefghijklmnopqrstuvwxyz";function r(t){return e.charAt(t)}function n(t,e){return t&e}function a(t,e){return t|e}function s(t,e){return t^e}function i(t,e){return t&~e}function o(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function c(t){var e=0;while(0!=t)t&=t-1,++e;return e}var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="=";function l(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=u.charAt(r>>6)+u.charAt(63&r);e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=u.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=u.charAt(r>>2)+u.charAt((3&r)<<4));while((3&n.length)>0)n+=h;return n}function f(t){var e,n="",a=0,s=0;for(e=0;e<t.length;++e){if(t.charAt(e)==h)break;var i=u.indexOf(t.charAt(e));i<0||(0==a?(n+=r(i>>2),s=3&i,a=1):1==a?(n+=r(s<<2|i>>4),s=15&i,a=2):2==a?(n+=r(s),n+=r(i>>2),s=3&i,a=3):(n+=r(s<<2|i>>4),n+=r(15&i),a=0))}return 1==a&&(n+=r(s<<2)),n}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var p,v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},v(t,e)};function d(t,e){function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var b,m={decode:function(t){var e;if(void 0===p){var r="0123456789ABCDEF",n=" \f\n\r\t \u2028\u2029";for(p={},e=0;e<16;++e)p[r.charAt(e)]=e;for(r=r.toLowerCase(),e=10;e<16;++e)p[r.charAt(e)]=e;for(e=0;e<n.length;++e)p[n.charAt(e)]=-1}var a=[],s=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(o=p[o],-1!=o){if(void 0===o)throw new Error("Illegal character at offset "+e);s|=o,++i>=2?(a[a.length]=s,s=0,i=0):s<<=4}}if(i)throw new Error("Hex encoding incomplete: 4 bits missing");return a}},y={decode:function(t){var e;if(void 0===b){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="= \f\n\r\t \u2028\u2029";for(b=Object.create(null),e=0;e<64;++e)b[r.charAt(e)]=e;for(e=0;e<n.length;++e)b[n.charAt(e)]=-1}var a=[],s=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(o=b[o],-1!=o){if(void 0===o)throw new Error("Illegal character at offset "+e);s|=o,++i>=4?(a[a.length]=s>>16,a[a.length]=s>>8&255,a[a.length]=255&s,s=0,i=0):s<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:a[a.length]=s>>10;break;case 3:a[a.length]=s>>16,a[a.length]=s>>8&255;break}return a},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=y.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return y.decode(t)}},g=1e13,w=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var r,n,a=this.buf,s=a.length;for(r=0;r<s;++r)n=a[r]*t+e,n<g?e=0:(e=0|n/g,n-=e*g),a[r]=n;e>0&&(a[r]=e)},t.prototype.sub=function(t){var e,r,n=this.buf,a=n.length;for(e=0;e<a;++e)r=n[e]-t,r<0?(r+=g,t=1):t=0,n[e]=r;while(0===n[n.length-1])n.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,r=e[e.length-1].toString(),n=e.length-2;n>=0;--n)r+=(g+e[n]).toString().substring(1);return r},t.prototype.valueOf=function(){for(var t=this.buf,e=0,r=t.length-1;r>=0;--r)e=e*g+t[r];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),k="…",x=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,O=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function j(t,e){return t.length>e&&(t=t.substring(0,e)+k),t}var S,T=function(){function t(e,r){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=r)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"===typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,r){for(var n="",a=t;a<e;++a)if(n+=this.hexByte(this.get(a)),!0!==r)switch(15&a){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},t.prototype.isASCII=function(t,e){for(var r=t;r<e;++r){var n=this.get(r);if(n<32||n>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var r="",n=t;n<e;++n)r+=String.fromCharCode(this.get(n));return r},t.prototype.parseStringUTF=function(t,e){for(var r="",n=t;n<e;){var a=this.get(n++);r+=a<128?String.fromCharCode(a):a>191&&a<224?String.fromCharCode((31&a)<<6|63&this.get(n++)):String.fromCharCode((15&a)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},t.prototype.parseStringBMP=function(t,e){for(var r,n,a="",s=t;s<e;)r=this.get(s++),n=this.get(s++),a+=String.fromCharCode(r<<8|n);return a},t.prototype.parseTime=function(t,e,r){var n=this.parseStringISO(t,e),a=(r?x:O).exec(n);return a?(r&&(a[1]=+a[1],a[1]+=+a[1]<70?2e3:1900),n=a[1]+"-"+a[2]+"-"+a[3]+" "+a[4],a[5]&&(n+=":"+a[5],a[6]&&(n+=":"+a[6],a[7]&&(n+="."+a[7]))),a[8]&&(n+=" UTC","Z"!=a[8]&&(n+=a[8],a[9]&&(n+=":"+a[9]))),n):"Unrecognized time: "+n},t.prototype.parseInteger=function(t,e){var r,n=this.get(t),a=n>127,s=a?255:0,i="";while(n==s&&++t<e)n=this.get(t);if(r=e-t,0===r)return a?-1:0;if(r>4){i=n,r<<=3;while(0==(128&(+i^s)))i=+i<<1,--r;i="("+r+" bit)\n"}a&&(n-=256);for(var o=new w(n),c=t+1;c<e;++c)o.mulAdd(256,this.get(c));return i+o.toString()},t.prototype.parseBitString=function(t,e,r){for(var n=this.get(t),a=(e-t-1<<3)-n,s="("+a+" bit)\n",i="",o=t+1;o<e;++o){for(var c=this.get(o),u=o==e-1?n:0,h=7;h>=u;--h)i+=c>>h&1?"1":"0";if(i.length>r)return s+j(i,r)}return s+i},t.prototype.parseOctetString=function(t,e,r){if(this.isASCII(t,e))return j(this.parseStringISO(t,e),r);var n=e-t,a="("+n+" byte)\n";r/=2,n>r&&(e=t+r);for(var s=t;s<e;++s)a+=this.hexByte(this.get(s));return n>r&&(a+=k),a},t.prototype.parseOID=function(t,e,r){for(var n="",a=new w,s=0,i=t;i<e;++i){var o=this.get(i);if(a.mulAdd(128,127&o),s+=7,!(128&o)){if(""===n)if(a=a.simplify(),a instanceof w)a.sub(80),n="2."+a.toString();else{var c=a<80?a<40?0:1:2;n=c+"."+(a-40*c)}else n+="."+a.toString();if(n.length>r)return j(n,r);a=new w,s=0}}return s>0&&(n+=".incomplete"),n},t}(),E=function(){function t(t,e,r,n,a){if(!(n instanceof D))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=r,this.tag=n,this.sub=a}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+r,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);case 6:return this.stream.parseOID(e,e+r,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return j(this.stream.parseStringUTF(e,e+r),t);case 18:case 19:case 20:case 21:case 22:case 26:return j(this.stream.parseStringISO(e,e+r),t);case 30:return j(this.stream.parseStringBMP(e,e+r),t);case 23:case 24:return this.stream.parseTime(e,e+r,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var r=0,n=this.sub.length;r<n;++r)e+=this.sub[r].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),r=127&e;if(r==e)return r;if(r>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===r)return null;e=0;for(var n=0;n<r;++n)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,r=2*this.length;return t.substr(e,r)},t.decode=function(e){var r;r=e instanceof T?e:new T(e,0);var n=new T(r),a=new D(r),s=t.decodeLength(r),i=r.pos,o=i-n.pos,c=null,u=function(){var e=[];if(null!==s){var n=i+s;while(r.pos<n)e[e.length]=t.decode(r);if(r.pos!=n)throw new Error("Content size is not correct for container starting at offset "+i)}else try{for(;;){var a=t.decode(r);if(a.tag.isEOC())break;e[e.length]=a}s=i-r.pos}catch(o){throw new Error("Exception while decoding undefined length content: "+o)}return e};if(a.tagConstructed)c=u();else if(a.isUniversal()&&(3==a.tagNumber||4==a.tagNumber))try{if(3==a.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");c=u();for(var h=0;h<c.length;++h)if(c[h].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(l){c=null}if(null===c){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+i);r.pos=i+Math.abs(s)}return new t(n,o,s,a,c)},t}(),D=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!==(32&e),this.tagNumber=31&e,31==this.tagNumber){var r=new w;do{e=t.get(),r.mulAdd(128,127&e)}while(128&e);this.tagNumber=r.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),P=0xdeadbeefcafe,B=15715070==(16777215&P),L=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/L[L.length-1],C=function(){function t(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,a=(1<<e)-1,s=!1,i="",o=this.t,c=this.DB-o*this.DB%e;if(o-- >0){c<this.DB&&(n=this[o]>>c)>0&&(s=!0,i=r(n));while(o>=0)c<e?(n=(this[o]&(1<<c)-1)<<e-c,n|=this[--o]>>(c+=this.DB-e)):(n=this[o]>>(c-=e)&a,c<=0&&(c+=this.DB,--o)),n>0&&(s=!0),s&&(i+=r(n))}return s?i:"0"},t.prototype.negate=function(){var e=A();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;while(--r>=0)if(0!=(e=this[r]-t[r]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Z(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var r=A();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r},t.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new M(e):new F(e),this.exp(t,r)},t.prototype.clone=function(){var t=A();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var r,n=this.DB-t*this.DB%8,a=0;if(t-- >0){n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[a++]=r|this.s<<this.DB-n);while(t>=0)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(e[a++]=r)}return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=A();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=A();return this.bitwiseTo(t,a,e),e},t.prototype.xor=function(t){var e=A();return this.bitwiseTo(t,s,e),e},t.prototype.andNot=function(t){var e=A();return this.bitwiseTo(t,i,e),e},t.prototype.not=function(){for(var t=A(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=A();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=A();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+o(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=c(this[r]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,a)},t.prototype.clearBit=function(t){return this.changeBit(t,i)},t.prototype.flipBit=function(t){return this.changeBit(t,s)},t.prototype.add=function(t){var e=A();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=A();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=A();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=A();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=A();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=A(),r=A();return this.divRemTo(t,e,r),[e,r]},t.prototype.modPow=function(t,e){var r,n,a=t.bitLength(),s=G(1);if(a<=0)return s;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new M(e):e.isEven()?new _(e):new F(e);var i=[],o=3,c=r-1,u=(1<<r)-1;if(i[1]=n.convert(this),r>1){var h=A();n.sqrTo(i[1],h);while(o<=u)i[o]=A(),n.mulTo(h,i[o-2],i[o]),o+=2}var l,f,p=t.t-1,v=!0,d=A();a=Z(t[p])-1;while(p>=0){a>=c?l=t[p]>>a-c&u:(l=(t[p]&(1<<a+1)-1)<<c-a,p>0&&(l|=t[p-1]>>this.DB+a-c)),o=r;while(0==(1&l))l>>=1,--o;if((a-=o)<0&&(a+=this.DB,--p),v)i[l].copyTo(s),v=!1;else{while(o>1)n.sqrTo(s,d),n.sqrTo(d,s),o-=2;o>0?n.sqrTo(s,d):(f=s,s=d,d=f),n.mulTo(d,i[l],s)}while(p>=0&&0==(t[p]&1<<a))n.sqrTo(s,d),f=s,s=d,d=f,--a<0&&(a=this.DB-1,--p)}return n.revert(s)},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;var n=e.clone(),a=this.clone(),s=G(1),i=G(0),o=G(0),c=G(1);while(0!=n.signum()){while(n.isEven())n.rShiftTo(1,n),r?(s.isEven()&&i.isEven()||(s.addTo(this,s),i.subTo(e,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);while(a.isEven())a.rShiftTo(1,a),r?(o.isEven()&&c.isEven()||(o.addTo(this,o),c.subTo(e,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(a)>=0?(n.subTo(a,n),r&&s.subTo(o,s),i.subTo(c,i)):(a.subTo(n,a),r&&o.subTo(s,o),c.subTo(i,c))}return 0!=a.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},t.prototype.pow=function(t){return this.exp(t,new I)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var a=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;a<s&&(s=a),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));while(e.signum()>0)(a=e.getLowestSetBit())>0&&e.rShiftTo(a,e),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},t.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=L[L.length-1]){for(e=0;e<L.length;++e)if(r[0]==L[e])return!0;return!1}if(r.isEven())return!1;e=1;while(e<L.length){var n=L[e],a=e+1;while(a<L.length&&n<R)n*=L[a++];n=r.modInt(n);while(e<a)if(n%L[e++]==0)return!1}return r.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2}this.t=0,this.s=0;var a=e.length,s=!1,i=0;while(--a>=0){var o=8==n?255&+e[a]:z(e,a);o<0?"-"==e.charAt(a)&&(s=!0):(s=!1,0==i?this[this.t++]=o:i+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,i+=n,i>=this.DB&&(i-=this.DB))}8==n&&0!=(128&+e[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t},t.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var r=t%this.DB,n=this.DB-r,a=(1<<n)-1,s=Math.floor(t/this.DB),i=this.s<<r&this.DM,o=this.t-1;o>=0;--o)e[o+s+1]=this[o]>>n|i,i=(this[o]&a)<<r;for(o=s-1;o>=0;--o)e[o]=0;e[s]=i,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,a=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)e[i-r-1]|=(this[i]&s)<<a,e[i-r]=this[i]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<a),e.t=this.t-r,e.clamp()}},t.prototype.subTo=function(t,e){var r=0,n=0,a=Math.min(t.t,this.t);while(r<a)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n-=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},t.prototype.multiplyTo=function(e,r){var n=this.abs(),a=e.abs(),s=n.t;r.t=s+a.t;while(--s>=0)r[s]=0;for(s=0;s<a.t;++s)r[s+n.t]=n.am(0,a[s],r,s,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)},t.prototype.squareTo=function(t){var e=this.abs(),r=t.t=2*e.t;while(--r>=0)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,r,n){var a=e.abs();if(!(a.t<=0)){var s=this.abs();if(s.t<a.t)return null!=r&&r.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=A());var i=A(),o=this.s,c=e.s,u=this.DB-Z(a[a.t-1]);u>0?(a.lShiftTo(u,i),s.lShiftTo(u,n)):(a.copyTo(i),s.copyTo(n));var h=i.t,l=i[h-1];if(0!=l){var f=l*(1<<this.F1)+(h>1?i[h-2]>>this.F2:0),p=this.FV/f,v=(1<<this.F1)/f,d=1<<this.F2,b=n.t,m=b-h,y=null==r?A():r;i.dlShiftTo(m,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),t.ONE.dlShiftTo(h,y),y.subTo(i,i);while(i.t<h)i[i.t++]=0;while(--m>=0){var g=n[--b]==l?this.DM:Math.floor(n[b]*p+(n[b-1]+d)*v);if((n[b]+=i.am(0,g,n,m,0,h))<g){i.dlShiftTo(m,y),n.subTo(y,n);while(n[b]<--g)n.subTo(y,n)}}null!=r&&(n.drShiftTo(h,r),o!=c&&t.ZERO.subTo(r,r)),n.t=h,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&t.ZERO.subTo(n,n)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,r){if(e>4294967295||e<1)return t.ONE;var n=A(),a=A(),s=r.convert(this),i=Z(e)-1;s.copyTo(n);while(--i>=0)if(r.sqrTo(n,a),(e&1<<i)>0)r.mulTo(a,s,n);else{var o=n;n=a,a=o}return r.revert(n)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=G(r),a=A(),s=A(),i="";this.divRemTo(n,a,s);while(a.signum()>0)i=(r+s.intValue()).toString(t).substr(1)+i,a.divRemTo(n,a,s);return s.intValue().toString(t)+i},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),a=Math.pow(r,n),s=!1,i=0,o=0,c=0;c<e.length;++c){var u=z(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(s=!0):(o=r*o+u,++i>=n&&(this.dMultiply(a),this.dAddOffset(o,0),i=0,o=0))}i>0&&(this.dMultiply(Math.pow(r,i)),this.dAddOffset(o,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,r,n){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(r))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this)}else{var s=[],i=7&e;s.length=1+(e>>3),r.nextBytes(s),i>0?s[0]&=(1<<i)-1:s[0]=0,this.fromString(s,256)}},t.prototype.bitwiseTo=function(t,e,r){var n,a,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(a=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(a,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},t.prototype.changeBit=function(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n},t.prototype.addTo=function(t,e){var r=0,n=0,a=Math.min(t.t,this.t);while(r<a)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n+=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,r){var n=Math.min(this.t+t.t,e);r.s=0,r.t=n;while(n>0)r[--n]=0;for(var a=r.t-this.t;n<a;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(a=Math.min(t.t,e);n<a;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()},t.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;r.s=0;while(--n>=0)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},t.prototype.millerRabin=function(e){var r=this.subtract(t.ONE),n=r.getLowestSetBit();if(n<=0)return!1;var a=r.shiftRight(n);e=e+1>>1,e>L.length&&(e=L.length);for(var s=A(),i=0;i<e;++i){s.fromInt(L[Math.floor(Math.random()*L.length)]);var o=s.modPow(a,this);if(0!=o.compareTo(t.ONE)&&0!=o.compareTo(r)){var c=1;while(c++<n&&0!=o.compareTo(r))if(o=o.modPowInt(2,this),0==o.compareTo(t.ONE))return!1;if(0!=o.compareTo(r))return!1}}return!0},t.prototype.square=function(){var t=A();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var r=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(r.compareTo(n)<0){var a=r;r=n,n=a}var s=r.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)e(r);else{s<i&&(i=s),i>0&&(r.rShiftTo(i,r),n.rShiftTo(i,n));var o=function(){(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),r.compareTo(n)>=0?(r.subTo(n,r),r.rShiftTo(1,r)):(n.subTo(r,n),n.rShiftTo(1,n)),r.signum()>0?setTimeout(o,0):(i>0&&n.lShiftTo(i,n),setTimeout((function(){e(n)}),0))};setTimeout(o,10)}},t.prototype.fromNumberAsync=function(e,r,n,s){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);var i=this,o=function(){i.dAddOffset(2,0),i.bitLength()>e&&i.subTo(t.ONE.shiftLeft(e-1),i),i.isProbablePrime(r)?setTimeout((function(){s()}),0):setTimeout(o,0)};setTimeout(o,0)}else{var c=[],u=7&e;c.length=1+(e>>3),r.nextBytes(c),u>0?c[0]&=(1<<u)-1:c[0]=0,this.fromString(c,256)}},t}(),I=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),M=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),F=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=A();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(C.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=A();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);while(t[r]>=t.DV)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),_=function(){function t(t){this.m=t,this.r2=A(),this.q3=A(),C.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=A();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function A(){return new C(null)}function V(t,e){return new C(t,e)}function N(t,e,r,n,a,s){while(--s>=0){var i=e*this[t++]+r[n]+a;a=Math.floor(i/67108864),r[n++]=67108863&i}return a}function H(t,e,r,n,a,s){var i=32767&e,o=e>>15;while(--s>=0){var c=32767&this[t],u=this[t++]>>15,h=o*c+u*i;c=i*c+((32767&h)<<15)+r[n]+(1073741823&a),a=(c>>>30)+(h>>>15)+o*u+(a>>>30),r[n++]=1073741823&c}return a}function q(t,e,r,n,a,s){var i=16383&e,o=e>>14;while(--s>=0){var c=16383&this[t],u=this[t++]>>14,h=o*c+u*i;c=i*c+((16383&h)<<14)+r[n]+a,a=(c>>28)+(h>>14)+o*u,r[n++]=268435455&c}return a}B&&"Microsoft Internet Explorer"==navigator.appName?(C.prototype.am=H,S=30):B&&"Netscape"!=navigator.appName?(C.prototype.am=N,S=26):(C.prototype.am=q,S=28),C.prototype.DB=S,C.prototype.DM=(1<<S)-1,C.prototype.DV=1<<S;var Y=52;C.prototype.FV=Math.pow(2,Y),C.prototype.F1=Y-S,C.prototype.F2=2*S-Y;var K,U,W=[];for(K="0".charCodeAt(0),U=0;U<=9;++U)W[K++]=U;for(K="a".charCodeAt(0),U=10;U<36;++U)W[K++]=U;for(K="A".charCodeAt(0),U=10;U<36;++U)W[K++]=U;function z(t,e){var r=W[t.charCodeAt(e)];return null==r?-1:r}function G(t){var e=A();return e.fromInt(t),e}function Z(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}C.ZERO=G(0),C.ONE=G(1);var $=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}();function J(){return new $}var X,Q,tt=256,et=null;if(null==et){et=[],Q=0;var rt=void 0;if(window.crypto&&window.crypto.getRandomValues){var nt=new Uint32Array(256);for(window.crypto.getRandomValues(nt),rt=0;rt<nt.length;++rt)et[Q++]=255&nt[rt]}var at=function(t){if(this.count=this.count||0,this.count>=256||Q>=tt)window.removeEventListener?window.removeEventListener("mousemove",at,!1):window.detachEvent&&window.detachEvent("onmousemove",at);else try{var e=t.x+t.y;et[Q++]=255&e,this.count+=1}catch(r){}};window.addEventListener?window.addEventListener("mousemove",at,!1):window.attachEvent&&window.attachEvent("onmousemove",at)}function st(){if(null==X){X=J();while(Q<tt){var t=Math.floor(65536*Math.random());et[Q++]=255&t}for(X.init(et),Q=0;Q<et.length;++Q)et[Q]=0;Q=0}return X.next()}var it=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=st()},t}();function ot(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var r=e-t.length-6,n="",a=0;a<r;a+=2)n+="ff";var s="0001"+n+"00"+t;return V(s,16)}function ct(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;var r=[],n=t.length-1;while(n>=0&&e>0){var a=t.charCodeAt(n--);a<128?r[--e]=a:a>127&&a<2048?(r[--e]=63&a|128,r[--e]=a>>6|192):(r[--e]=63&a|128,r[--e]=a>>6&63|128,r[--e]=a>>12|224)}r[--e]=0;var s=new it,i=[];while(e>2){i[0]=0;while(0==i[0])s.nextBytes(i);r[--e]=i[0]}return r[--e]=2,r[--e]=0,new C(r)}var ut=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);while(e.compareTo(r)<0)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=ct(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},t.prototype.setPrivate=function(t,e,r){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16),this.d=V(r,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,r,n,a,s,i,o){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=V(t,16),this.e=parseInt(e,16),this.d=V(r,16),this.p=V(n,16),this.q=V(a,16),this.dmp1=V(s,16),this.dmq1=V(i,16),this.coeff=V(o,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var r=new it,n=t>>1;this.e=parseInt(e,16);for(var a=new C(e,16);;){for(;;)if(this.p=new C(t-n,1,r),0==this.p.subtract(C.ONE).gcd(a).compareTo(C.ONE)&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new C(n,1,r),0==this.q.subtract(C.ONE).gcd(a).compareTo(C.ONE)&&this.q.isProbablePrime(10))break;if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var i=this.p.subtract(C.ONE),o=this.q.subtract(C.ONE),c=i.multiply(o);if(0==c.gcd(a).compareTo(C.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(c),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=V(t,16),r=this.doPrivate(e);return null==r?null:ht(r,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,r){var n=new it,a=t>>1;this.e=parseInt(e,16);var s=new C(e,16),i=this,o=function(){var e=function(){if(i.p.compareTo(i.q)<=0){var t=i.p;i.p=i.q,i.q=t}var e=i.p.subtract(C.ONE),n=i.q.subtract(C.ONE),a=e.multiply(n);0==a.gcd(s).compareTo(C.ONE)?(i.n=i.p.multiply(i.q),i.d=s.modInverse(a),i.dmp1=i.d.mod(e),i.dmq1=i.d.mod(n),i.coeff=i.q.modInverse(i.p),setTimeout((function(){r()}),0)):setTimeout(o,0)},c=function(){i.q=A(),i.q.fromNumberAsync(a,1,n,(function(){i.q.subtract(C.ONE).gcda(s,(function(t){0==t.compareTo(C.ONE)&&i.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(c,0)}))}))},u=function(){i.p=A(),i.p.fromNumberAsync(t-a,1,n,(function(){i.p.subtract(C.ONE).gcda(s,(function(t){0==t.compareTo(C.ONE)&&i.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(u,0)}))}))};setTimeout(u,0)};setTimeout(o,0)},t.prototype.sign=function(t,e,r){var n=ft(r),a=n+e(t).toString(),s=ot(a,this.n.bitLength()/4);if(null==s)return null;var i=this.doPrivate(s);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},t.prototype.verify=function(t,e,r){var n=V(e,16),a=this.doPublic(n);if(null==a)return null;var s=a.toString(16).replace(/^1f+00/,""),i=pt(s);return i==r(t).toString()},t}();function ht(t,e){var r=t.toByteArray(),n=0;while(n<r.length&&0==r[n])++n;if(r.length-n!=e-1||2!=r[n])return null;++n;while(0!=r[n])if(++n>=r.length)return null;var a="";while(++n<r.length){var s=255&r[n];s<128?a+=String.fromCharCode(s):s>191&&s<224?(a+=String.fromCharCode((31&s)<<6|63&r[n+1]),++n):(a+=String.fromCharCode((15&s)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return a}var lt={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function ft(t){return lt[t]||""}function pt(t){for(var e in lt)if(lt.hasOwnProperty(e)){var r=lt[e],n=r.length;if(t.substr(0,n)==r)return t.substr(n)}return t}
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var vt={};vt.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var a;for(a in r)t.prototype[a]=r[a];var s=function(){},i=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(a=0;a<i.length;a+=1){var r=i[a],n=e[r];"function"===typeof n&&n!=Object.prototype[r]&&(t[r]=n)}})}catch(o){}s(t.prototype,r)}}};
/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */
var dt={};"undefined"!=typeof dt.asn1&&dt.asn1||(dt.asn1={}),dt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1),n=r.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var a="",s=0;s<n;s++)a+="f";var i=new C(a,16),o=i.xor(t).add(C.ONE);e=o.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=dt,r=e.asn1,n=r.DERBoolean,a=r.DERInteger,s=r.DERBitString,i=r.DEROctetString,o=r.DERNull,c=r.DERObjectIdentifier,u=r.DEREnumerated,h=r.DERUTF8String,l=r.DERNumericString,f=r.DERPrintableString,p=r.DERTeletexString,v=r.DERIA5String,d=r.DERUTCTime,b=r.DERGeneralizedTime,m=r.DERSequence,y=r.DERSet,g=r.DERTaggedObject,w=r.ASN1Util.newObject,k=Object.keys(t);if(1!=k.length)throw"key of param shall be only one.";var x=k[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+x+":"))throw"undefined key: "+x;if("bool"==x)return new n(t[x]);if("int"==x)return new a(t[x]);if("bitstr"==x)return new s(t[x]);if("octstr"==x)return new i(t[x]);if("null"==x)return new o(t[x]);if("oid"==x)return new c(t[x]);if("enum"==x)return new u(t[x]);if("utf8str"==x)return new h(t[x]);if("numstr"==x)return new l(t[x]);if("prnstr"==x)return new f(t[x]);if("telstr"==x)return new p(t[x]);if("ia5str"==x)return new v(t[x]);if("utctime"==x)return new d(t[x]);if("gentime"==x)return new b(t[x]);if("seq"==x){for(var O=t[x],j=[],S=0;S<O.length;S++){var T=w(O[S]);j.push(T)}return new m({array:j})}if("set"==x){for(O=t[x],j=[],S=0;S<O.length;S++){T=w(O[S]);j.push(T)}return new y({array:j})}if("tag"==x){var E=t[x];if("[object Array]"===Object.prototype.toString.call(E)&&3==E.length){var D=w(E[2]);return new g({tag:E[0],explicit:E[1],obj:D})}var P={};if(void 0!==E.explicit&&(P.explicit=E.explicit),void 0!==E.tag&&(P.tag=E.tag),void 0===E.obj)throw"obj shall be specified for 'tag'.";return P.obj=w(E.obj),new g(P)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.getEncodedHex()}},dt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=Math.floor(r/40),a=r%40,s=(e=n+"."+a,""),i=2;i<t.length;i+=2){var o=parseInt(t.substr(i,2),16),c=("00000000"+o.toString(2)).slice(-8);if(s+=c.substr(1,7),"0"==c.substr(0,1)){var u=new C(s,2);e=e+"."+u.toString(10),s=""}}return e},dt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new C(t,10),a=n.toString(2),s=7-a.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";a=i+a;for(o=0;o<a.length-1;o+=7){var c=a.substr(o,7);o!=a.length-7&&(c="1"+c),r+=e(parseInt(c,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",a=t.split("."),s=40*parseInt(a[0])+parseInt(a[1]);n+=e(s),a.splice(0,2);for(var i=0;i<a.length;i++)n+=r(a[i]);return n},dt.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,r=e.toString(16);if(r.length%2==1&&(r="0"+r),e<128)return r;var n=r.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var a=128+n;return a.toString(16)+r},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},dt.asn1.DERAbstractString=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t?this.setString(t):"undefined"!=typeof t["str"]?this.setString(t["str"]):"undefined"!=typeof t["hex"]&&this.setStringHex(t["hex"]))},vt.lang.extend(dt.asn1.DERAbstractString,dt.asn1.ASN1Object),dt.asn1.DERAbstractTime=function(t){dt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e,r){var n=this.zeroPadding,a=this.localDateToUTC(t),s=String(a.getFullYear());"utc"==e&&(s=s.substr(2,2));var i=n(String(a.getMonth()+1),2),o=n(String(a.getDate()),2),c=n(String(a.getHours()),2),u=n(String(a.getMinutes()),2),h=n(String(a.getSeconds()),2),l=s+i+o+c+u+h;if(!0===r){var f=a.getMilliseconds();if(0!=f){var p=n(String(f),3);p=p.replace(/[0]+$/,""),l=l+"."+p}}return l+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,r,n,a,s){var i=new Date(Date.UTC(t,e-1,r,n,a,s,0));this.setByDate(i)},this.getFreshValueHex=function(){return this.hV}},vt.lang.extend(dt.asn1.DERAbstractTime,dt.asn1.ASN1Object),dt.asn1.DERAbstractStructured=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t["array"]&&(this.asn1Array=t["array"])},vt.lang.extend(dt.asn1.DERAbstractStructured,dt.asn1.ASN1Object),dt.asn1.DERBoolean=function(){dt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},vt.lang.extend(dt.asn1.DERBoolean,dt.asn1.ASN1Object),dt.asn1.DERInteger=function(t){dt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new C(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["bigint"]?this.setByBigInteger(t["bigint"]):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t["hex"]&&this.setValueHex(t["hex"]))},vt.lang.extend(dt.asn1.DERInteger,dt.asn1.ASN1Object),dt.asn1.DERBitString=function(t){if(void 0!==t&&"undefined"!==typeof t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}dt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var a=t.substr(r,8),s=parseInt(a,2).toString(16);1==s.length&&(s="0"+s),n+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):"undefined"!=typeof t["hex"]?this.setHexValueIncludingUnusedBits(t["hex"]):"undefined"!=typeof t["bin"]?this.setByBinaryString(t["bin"]):"undefined"!=typeof t["array"]&&this.setByBooleanArray(t["array"]))},vt.lang.extend(dt.asn1.DERBitString,dt.asn1.ASN1Object),dt.asn1.DEROctetString=function(t){if(void 0!==t&&"undefined"!==typeof t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}dt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},vt.lang.extend(dt.asn1.DEROctetString,dt.asn1.DERAbstractString),dt.asn1.DERNull=function(){dt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},vt.lang.extend(dt.asn1.DERNull,dt.asn1.ASN1Object),dt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new C(t,10),a=n.toString(2),s=7-a.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";a=i+a;for(o=0;o<a.length-1;o+=7){var c=a.substr(o,7);o!=a.length-7&&(c="1"+c),r+=e(parseInt(c,2))}return r};dt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",a=t.split("."),s=40*parseInt(a[0])+parseInt(a[1]);n+=e(s),a.splice(0,2);for(var i=0;i<a.length;i++)n+=r(a[i]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(t){var e=dt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"===typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},vt.lang.extend(dt.asn1.DERObjectIdentifier,dt.asn1.ASN1Object),dt.asn1.DEREnumerated=function(t){dt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new C(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t["hex"]&&this.setValueHex(t["hex"]))},vt.lang.extend(dt.asn1.DEREnumerated,dt.asn1.ASN1Object),dt.asn1.DERUTF8String=function(t){dt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},vt.lang.extend(dt.asn1.DERUTF8String,dt.asn1.DERAbstractString),dt.asn1.DERNumericString=function(t){dt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},vt.lang.extend(dt.asn1.DERNumericString,dt.asn1.DERAbstractString),dt.asn1.DERPrintableString=function(t){dt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},vt.lang.extend(dt.asn1.DERPrintableString,dt.asn1.DERAbstractString),dt.asn1.DERTeletexString=function(t){dt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},vt.lang.extend(dt.asn1.DERTeletexString,dt.asn1.DERAbstractString),dt.asn1.DERIA5String=function(t){dt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},vt.lang.extend(dt.asn1.DERIA5String,dt.asn1.DERAbstractString),dt.asn1.DERUTCTime=function(t){dt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return"undefined"==typeof this.date&&"undefined"==typeof this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},vt.lang.extend(dt.asn1.DERUTCTime,dt.asn1.DERAbstractTime),dt.asn1.DERGeneralizedTime=function(t){dt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},vt.lang.extend(dt.asn1.DERGeneralizedTime,dt.asn1.DERAbstractTime),dt.asn1.DERSequence=function(t){dt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t+=r.getEncodedHex()}return this.hV=t,this.hV}},vt.lang.extend(dt.asn1.DERSequence,dt.asn1.DERAbstractStructured),dt.asn1.DERSet=function(t){dt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},vt.lang.extend(dt.asn1.DERSet,dt.asn1.DERAbstractStructured),dt.asn1.DERTaggedObject=function(t){dt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["tag"]&&(this.hT=t["tag"]),"undefined"!=typeof t["explicit"]&&(this.isExplicit=t["explicit"]),"undefined"!=typeof t["obj"]&&(this.asn1Object=t["obj"],this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},vt.lang.extend(dt.asn1.DERTaggedObject,dt.asn1.ASN1Object);var bt=function(t){function e(r){var n=t.call(this)||this;return r&&("string"===typeof r?n.parseKey(r):(e.hasPrivateKeyProperty(r)||e.hasPublicKeyProperty(r))&&n.parsePropertiesFrom(r)),n}return d(e,t),e.prototype.parseKey=function(t){try{var e=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,a=n.test(t)?m.decode(t):y.unarmor(t),s=E.decode(a);if(3===s.sub.length&&(s=s.sub[2].sub[0]),9===s.sub.length){e=s.sub[1].getHexStringValue(),this.n=V(e,16),r=s.sub[2].getHexStringValue(),this.e=parseInt(r,16);var i=s.sub[3].getHexStringValue();this.d=V(i,16);var o=s.sub[4].getHexStringValue();this.p=V(o,16);var c=s.sub[5].getHexStringValue();this.q=V(c,16);var u=s.sub[6].getHexStringValue();this.dmp1=V(u,16);var h=s.sub[7].getHexStringValue();this.dmq1=V(h,16);var l=s.sub[8].getHexStringValue();this.coeff=V(l,16)}else{if(2!==s.sub.length)return!1;var f=s.sub[1],p=f.sub[0];e=p.sub[0].getHexStringValue(),this.n=V(e,16),r=p.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(v){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new dt.asn1.DERInteger({int:0}),new dt.asn1.DERInteger({bigint:this.n}),new dt.asn1.DERInteger({int:this.e}),new dt.asn1.DERInteger({bigint:this.d}),new dt.asn1.DERInteger({bigint:this.p}),new dt.asn1.DERInteger({bigint:this.q}),new dt.asn1.DERInteger({bigint:this.dmp1}),new dt.asn1.DERInteger({bigint:this.dmq1}),new dt.asn1.DERInteger({bigint:this.coeff})]},e=new dt.asn1.DERSequence(t);return e.getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new dt.asn1.DERSequence({array:[new dt.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new dt.asn1.DERNull]}),e=new dt.asn1.DERSequence({array:[new dt.asn1.DERInteger({bigint:this.n}),new dt.asn1.DERInteger({int:this.e})]}),r=new dt.asn1.DERBitString({hex:"00"+e.getEncodedHex()}),n=new dt.asn1.DERSequence({array:[t,r]});return n.getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(e=e||64,!t)return t;var r="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(r,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----",t},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----",t},e.hasPublicKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(ut),mt=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new bt(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(f(t))}catch(e){return!1}},t.prototype.encrypt=function(t){try{return l(this.getKey().encrypt(t))}catch(e){return!1}},t.prototype.sign=function(t,e,r){try{return l(this.getKey().sign(t,e,r))}catch(n){return!1}},t.prototype.verify=function(t,e,r){try{return this.getKey().verify(t,f(e),r)}catch(n){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new bt,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version="3.0.0-rc.1",t}();window.JSEncrypt=mt,t.JSEncrypt=mt,t.default=mt,Object.defineProperty(t,"__esModule",{value:!0})}))},"75a4":function(t,e){},"870f":function(t,e,r){r("b680");var n=-10;function a(){}function s(t,e){return t<n?t:e<n?n:e}function i(t,e,r,a){var s=0;return r<n?(s=r,t.day["open-crash"]++,t.profit["open-crash"]+=s,t.profit["open-crash"]=+t.profit["open-crash"].toFixed(2),a>0&&(t.day["reverse-crash"]++,t.profit["reverse-crash"]+=a+-n,t.profit["reverse-crash"]=+t.profit["reverse-crash"].toFixed(2))):a<n?(s=n,t.day["stop-crash"]++,t.profit["stop-crash"]+=a+-n,t.profit["stop-crash"]=+t.profit["stop-crash"].toFixed(2)):s=a,s}t.exports={init:a,process:i,getPTCChange:s}},9206:function(t,e){},"9dd4":function(t,e){},c116:function(t,e,r){r("b680");var n=r("870f"),a=r("2c5c"),s=0;function i(){s=0,0}function o(t,e,r,i){var o=n.getPTCChange(r,i),c=a.trend(e);"-"===c&&(t.day["down-trade"]++,t.profit["down-trade"]=+(t.profit["down-trade"]+o).toFixed(2),t.profitrate["down-trade"]=+(t.profit["down-trade"]/t.day["down-trade"]).toFixed(2),o>0?s++:0,t.winrate["down-trade"]=+(s/t.day["down-trade"]*100).toFixed(2))}t.exports={process:o,init:i}},c141:function(t,e){},c973:function(t,e){function r(t,e,r,n,a,s,i){try{var o=t[s](i),c=o.value}catch(u){return void r(u)}o.done?e(c):Promise.resolve(c).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,s){var i=t.apply(e,n);function o(t){r(i,a,s,o,c,"next",t)}function c(t){r(i,a,s,o,c,"throw",t)}o(void 0)}))}}t.exports=n},ce69:function(t,e){function r(t){return{name:t,profit:{max:0,"open-crash":-0,"stop-crash":0,"reverse-crash":0,normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},day:{normal:0,up:0,down:0,"open-crash":0,"stop-crash":0,"reverse-crash":0,trade:0,rest:0,compound:0,hot:0,"up-trade":0,"down-trade":0},profitrate:{normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},winrate:{normal:0,strategy:0,compound:0,hot:0,"up-trade":0,"down-trade":0},"daily-open-profit":[],"daily-close-profit":[],"daily-open-ptcchange":[],"daily-close-ptcchange":[]}}t.exports={generate:r}},d5d6:function(t,e){}}]);